<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'J3OX6892F7',
      apiKey: '38852eb9095216f8f2ada575a06a9cfc',
      indexName: 'Blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
<meta property="og:type" content="website">
<meta property="og:title" content="Nameless13">
<meta property="og:url" content="https://nameless13.github.io/page/14/index.html">
<meta property="og:site_name" content="Nameless13">
<meta property="og:description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nameless13">
<meta name="twitter:description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">






  <link rel="canonical" href="https://nameless13.github.io/page/14/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Nameless13</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Nameless13</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/python/readme.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/python/readme.html" itemprop="url">
                  readme
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-24 13:58:04" itemprop="dateModified" datetime="2017-09-24T13:58:04+08:00">2017-09-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python 标识符<br>在python里，标识符有字母、数字、下划线组成。<br>在python中，所有标识符可以包括英文、数字以及下划线（_），但不能以数字开头。<br>python中的标识符是区分大小写的。<br>以下划线开头的标识符是有特殊意义的。以单下划线开头（_foo）的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用”from xxx import *”而导入；<br>以双下划线开头的（<strong>foo）代表类的私有成员；以双下划线开头和结尾的（</strong>foo<strong>）代表python里特殊方法专用的标识，如</strong>init__（）代表类的构造函数。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/CM/Cloudera Manager和CDH快速入门指南.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/CM/Cloudera Manager和CDH快速入门指南.html" itemprop="url">
                  Cloudera Manager和CDH快速入门指南
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-29 23:19:59" itemprop="dateModified" datetime="2018-05-29T23:19:59+08:00">2018-05-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/CM/" itemprop="url" rel="index"><span itemprop="name">CM</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Cloudera-Manager和CDH快速入门指南"><a href="#Cloudera-Manager和CDH快速入门指南" class="headerlink" title="Cloudera Manager和CDH快速入门指南"></a>Cloudera Manager和CDH快速入门指南</h1><p>本快速入门指南介绍如何在四台主机的集群上快速创建Cloudera Manager 5，CDH 5和托管服务的新安装。生成的部署可用于演示和概念验证应用程序，但不推荐用于生产。</p>
<p>继续阅读：</p>
<ul>
<li>快速启动群集主机要求</li>
<li>下载并运行Cloudera Manager服务器安装程序</li>
<li>在RHEL 5和CentOS 5上，安装Python 2.6或2.7</li>
<li>启动Cloudera Manager管理控制台</li>
<li>使用Cloudera Manager向导安装和配置软件<ul>
<li>选择Cloudera Manager Edition和指定主机</li>
<li>安装CDH和托管服务软件</li>
<li>添加和配置服务</li>
</ul>
</li>
<li>测试安装<ul>
<li>运行MapReduce作业</li>
<li>使用Hue测试</li>
</ul>
</li>
</ul>
<h2 id="快速启动群集主机要求"><a href="#快速启动群集主机要求" class="headerlink" title="快速启动群集主机要求"></a>快速启动群集主机要求</h2><p>集群中的四台主机必须满足以下要求：</p>
<ul>
<li>主机必须至少有10 GB RAM。</li>
<li>您必须对主机具有root或无密码sudo访问权限。</li>
<li>如果使用root，主机必须接受相同的root密码。</li>
<li>主机必须具有Internet访问权限才能允许向导从中安装软件 archive.cloudera.com。</li>
<li>运行支持的操作系统：<ul>
<li>请参阅CDH 5和Cloudera Manager 5要求和支持的版本。</li>
<li>SLES - SUSE Linux Enterprise Server 11,64位。需要Service Pack 2或更高版本。Updates存储库必须是活动的，并且需要SUSE Linux Enterprise Software Development Kit 11 SP1。</li>
<li>Debian - Wheezy（7.0和7.1），64位。</li>
<li>Ubuntu - Trusty（14.04）和（Precise）12.04,64位。</li>
</ul>
</li>
</ul>
<p>如果您的环境不满足这些要求，则本指南中描述的过程可能无法正常工作。有关其他Cloudera Manager安装选项和要求的信息，请参阅 安装Cloudera Manager和CDH。</p>
<h2 id="下载并运行Cloudera-Manager服务器安装程序"><a href="#下载并运行Cloudera-Manager服务器安装程序" class="headerlink" title="下载并运行Cloudera Manager服务器安装程序"></a>下载并运行Cloudera Manager服务器安装程序</h2><p>将Cloudera Manager安装程序下载到要安装Cloudera Manager Server的集群主机：</p>
<ol>
<li>在Web浏览器中打开Cloudera Manager下载。</li>
<li>在Cloudera Manager框中，单击立即下载。</li>
<li><p>单击下载Cloudera Manager以下载最新版本的安装程序或单击选择不同的版本以下载较早版本。<br>将显示产品兴趣对话框。</p>
</li>
<li><p>点击登录并输入您的电子邮件地址和密码，或填写产品兴趣表单，然后点击继续。<br>将显示Cloudera标准许可证页面。</p>
</li>
<li><p>接受许可协议并单击提交。<br>显示自动安装说明。您还可以查看系统要求和发行说明，您可以转到文档。</p>
</li>
<li><p>下载安装程序：<br><code>$ wget https://archive.cloudera.com/cm5/installer/latest/cloudera-manager-installer.bin</code></p>
</li>
<li>更改 cloudera-manager-installer.bin 具有可执行权限：<br><code>$ chmod u + x cloudera-manager-installer.bin</code></li>
<li>通过执行以下操作之一运行Cloudera Manager Server安装程序：<ul>
<li>从Internet安装Cloudera Manager软件包：<code>$ sudo ./cloudera-manager-installer.bin</code></li>
<li>从本地存储库安装Cloudera Manager软件包：<code>$ sudo ./cloudera-manager-installer.bin --skip_repo_package = 1</code></li>
</ul>
</li>
<li>阅读Cloudera Manager README，然后按Return或Enter选择Next。</li>
<li>阅读Cloudera Express许可证，然后按Return或Enter选择下一步。使用箭头键，然后按Return或Enter选择是以确认您接受许可证。</li>
<li>阅读Oracle二进制代码许可协议，然后按Return或Enter选择 Next。</li>
<li>使用箭头键，然后按Return或Enter选择是以确认您接受Oracle二进制代码许可协议。发生以下情况：<ul>
<li>安装程序将安装Oracle JDK和Cloudera Manager存储库文件。</li>
<li>安装程序将安装Cloudera Manager Server和嵌入式PostgreSQL软件包。</li>
<li>安装程序启动Cloudera Manager Server和嵌入式PostgreSQL数据库。</li>
</ul>
</li>
<li>安装完成后，将显示Cloudera Manager管理控制台的完整URL，包括端口号，默认情况下为7180。按Return或Enter选择确定继续。</li>
<li>按Return或Enter选择确定以退出安装程序。</li>
</ol>
<h2 id="在RHEL-5和CentOS-5上，安装Python-2-6或2-7"><a href="#在RHEL-5和CentOS-5上，安装Python-2-6或2-7" class="headerlink" title="在RHEL 5和CentOS 5上，安装Python 2.6或2.7"></a>在RHEL 5和CentOS 5上，安装Python 2.6或2.7</h2><p>CDH 5 Hue仅与安装在其上的操作系统的默认系统Python版本一起工作。例如，在RHEL / CentOS 6上，您需要使用Python 2.6启动Hue。<br>要从EPEL存储库安装软件包，请将相应的软件包RPM软件包下载到您的计算机，然后使用安装Python yum。例如，对RHEL 5或CentOS 5使用以下命令：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ su -c&apos;rpm -Uvh http://download.fedoraproject.org/pub/epel/5/i386/epel-release-5-4.noarch.rpm&apos;</div><div class="line">... ...</div><div class="line">$ yum install python26</div></pre></td></tr></table></figure>
</p>
<h2 id="启动Cloudera-Manager管理控制台"><a href="#启动Cloudera-Manager管理控制台" class="headerlink" title="启动Cloudera Manager管理控制台"></a>启动Cloudera Manager管理控制台</h2><ol>
<li>等待几分钟，Cloudera Manager Server启动。要观察启动过程，请运行tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log在Cloudera Manager Server主机上。如果Cloudera Manager Server未启动，请参阅 排除安装和升级问题。</li>
<li>在Web浏览器中，输入 http：// 服务器主机：7180，其中Server主机是运行Cloudera Manager Server的主机的FQDN或IP地址。<br>将显示Cloudera Manager管理控制台的登录屏幕。</li>
<li>使用凭据登录到Cloudera Manager管理控制台：<strong>用户名</strong>： 管理员 <strong>密码</strong>： 管理员。</li>
<li>登录后，将显示“ <strong>Cloudera Manager最终用户许可条款和条件</strong>”页面。阅读条款和条件，然后选择是接受它们。</li>
<li>单击<strong>继续</strong>。将显示<strong>欢迎使用Cloudera Manager</strong>页面。</li>
</ol>
<h2 id="使用Cloudera-Manager向导安装和配置软件"><a href="#使用Cloudera-Manager向导安装和配置软件" class="headerlink" title="使用Cloudera Manager向导安装和配置软件"></a>使用Cloudera Manager向导安装和配置软件</h2><p>在群集主机上安装和配置Cloudera Manager，CDH和托管服务软件涉及以下主要步骤。</p>
<p>继续阅读：</p>
<ul>
<li>选择Cloudera Manager Edition和指定主机</li>
<li>安装CDH和托管服务软件</li>
<li>添加和配置服务</li>
</ul>
<h3 id="选择Cloudera-Manager-Edition和指定主机"><a href="#选择Cloudera-Manager-Edition和指定主机" class="headerlink" title="选择Cloudera Manager Edition和指定主机"></a>选择Cloudera Manager Edition和指定主机</h3><ol>
<li>选择Cloudera企业 数据中心版试用版，它不需要许可证，但在60天后过期，无法续订。试用版允许您创建Cloudera Manager支持的所有CDH和托管服务。单击继续。</li>
<li>将显示信息，指示将安装Cloudera Manager的哪个版本以及您可以选择的服务。单击继续。将显示“指定CDH群集安装的主机”屏幕。</li>
<li>指定要在其上安装CDH和托管服务的四个主机。您可以指定主机名或IP地址和范围，例如：10.1.1。[1-4]或主机[1-3] .company.com。您可以通过用逗号，分号，制表符或空格分隔多个地址和地址范围，或将它们放在单独的行上。</li>
<li>单击搜索。Cloudera Manager标识集群上的主机。验证显示的主机数量与要安装服务的主机数量匹配。清除不存在的主机条目，并清除不想安装服务的主机。单击继续。将显示“选择存储库”屏幕。</li>
</ol>
<h3 id="安装CDH和托管服务软件"><a href="#安装CDH和托管服务软件" class="headerlink" title="安装CDH和托管服务软件"></a>安装CDH和托管服务软件</h3><ol>
<li>保留默认分发方法使用宗地和CDH的默认版本5.将“其他宗地”选项保留为“无”。</li>
<li>对于Cloudera Manager Agent，保留此Cloudera Manager Server的默认匹配版本。单击继续。将显示“JDK安装选项”屏幕。</li>
<li>选择安装Oracle Java SE开发工具包（JDK）复选框以允许Cloudera Manager在每个群集主机上安装JDK或取消选中是否打算自行安装。保持安装Java无限强度加密策略文件复选框。单击继续。将显示“启用单用户模式”屏幕。</li>
<li>将单用户模式复选框清除，然后单击继续。此时将显示“提供SSH登录凭据”页面。</li>
<li>指定主机SSH登录属性：</li>
<li>保留默认登录根目录或输入具有无密码sudo权限的帐户的用户名。</li>
<li>如果选择使用密码验证，请输入并确认密码。</li>
<li>单击继续。Cloudera Manager在每个主机上安装Oracle JDK和Cloudera Manager Agent软件包，并启动代理。</li>
<li>单击继续。将显示“安装所选宗地”屏幕。Cloudera Manager安装CDH。在包裹安装过程中，会在单独的进度条中指示包裹安装过程的各个阶段的进度。当屏幕底部的继续按钮变为蓝色时，安装过程完成。</li>
<li>单击继续。主机检查器运行以验证安装，并提供其查找的摘要，包括已安装组件的所有版本。单击“完成”。将显示群集设置屏幕。</li>
</ol>
<h3 id="添加和配置服务"><a href="#添加和配置服务" class="headerlink" title="添加和配置服务"></a>添加和配置服务</h3><ol>
<li>选择所有服务以创建HDFS，YARN（包括MapReduce 2），ZooKeeper，Oozie，Hive，Hue，Sqoop，HBase，Impala，Solr，Spark和Key-Value Store Indexer服务。单击继续。将显示自定义角色分配屏幕。</li>
<li>配置以下角色分配：<ul>
<li>单击HBase Thrift Server角色下的文本字段。在显示的主机选择对话框中，选中任何主机旁边的复选框，然后单击右下角的确定 。</li>
<li>单击ZooKeeper服务的服务器角色下的文本字段。在显示的主机选择对话框中，取消选中默认分配的主机（主主机）旁边的复选框，并选中其余三台主机旁边的复选框。单击右下角的确定。</li>
</ul>
</li>
<li>单击继续。显示数据库设置屏幕。</li>
<li>保留使用嵌入式数据库的默认设置，以使Cloudera Manager在嵌入式PostgreSQL数据库中创建和配置所有必需的数据库。单击测试连接。测试完成后，单击继续。将显示“查看更改”屏幕。</li>
<li>查看要应用的配置更改。单击继续。将显示“命令进度”页面。</li>
<li>向导将执行32个步骤来配置和启动服务。启动完成后，单击继续。</li>
<li>将显示一条成功消息，指示集群已成功启动。单击完成以继续到首页 &gt; 状态选项卡。</li>
</ol>
<h2 id="测试安装"><a href="#测试安装" class="headerlink" title="测试安装"></a>测试安装</h2><p>在屏幕的左侧是当前运行的服务及其状态信息的列表。所有服务应以良好 运行状态运行，但是可能有少量配置警告由扳手图标和数字指示，您可以忽略它。</p>
<p>您可以单击每个服务以查看有关服务的更多详细信息。您还可以通过运行MapReduce作业或使用Hue应用程序与群集交互来测试安装。</p>
<h3 id="运行MapReduce作业"><a href="#运行MapReduce作业" class="headerlink" title="运行MapReduce作业"></a>运行MapReduce作业</h3><ol>
<li>登录到群集主机。</li>
<li><p>运行Hadoop PiEstimator示例：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo -u hdfs hadoop jar \</div><div class="line">/opt/cloudera/parcels/CDH/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar \</div><div class="line">pi 10 100</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>通过从Cloudera Manager管理控制台顶部导航栏中选择以下内容来查看运行作业的结果：集群 &gt; 集群名称 &gt; YARN应用程序。您将看到如下所示的条目：<br>&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;</p>
</li>
</ol>
<h3 id="使用Hue测试"><a href="#使用Hue测试" class="headerlink" title="使用Hue测试"></a>使用Hue测试</h3><p>测试集群的一个好方法是运行作业。此外，您可以通过运行其中一个Hue Web应用程序来测试集群。Hue是一个图形用户界面，允许您通过运行允许浏览HDFS，管理Hive元数据转储，运行Hive，Impala和搜索查询，Pig脚本和Oozie工作流的应用程序与群集进行交互。</p>
<ol>
<li>在Cloudera Manager管理控制台首页 &gt; 状态选项卡中，单击Hue服务。</li>
<li>单击Hue Web UI链接，它将在新窗口中打开Hue。</li>
<li>使用凭据登录，用户名： hdfs，密码： hdfs。</li>
<li>在浏览器窗口顶部的导航栏中选择一个应用程序。</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/备份数据库.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/备份数据库.html" itemprop="url">
                  备份数据库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-23 01:22:01" itemprop="dateModified" datetime="2018-05-23T01:22:01+08:00">2018-05-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/Notes/" itemprop="url" rel="index"><span itemprop="name">Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h1><blockquote>
<p><strong>v1.0</strong> updated:2017-04-01 Nameless13<br><a href="https://www.cloudera.com/documentation/enterprise/latest/topics/cm_ag_backup_dbs.html" target="_blank" rel="noopener">原文</a></p>
</blockquote>
<ul>
<li>Cloudera Manager - 包含有关服务的配置及其角色分配的所有信息,所有配置历史，命令，用户和正在运行的进程,这是一个相对较小的数据库(&lt;100MB)是但却是最重要的备份</li>
</ul>
<p><strong>重要:</strong>重新启动进程时，将使用保存在Cloudera Manager数据库中的信息重新部署每个服务的配置,如果此信息不可用，您的群集不会启动或正常运行。您必须安排并维护Cloudera Manager数据库的常规备份，以在发生数据库丢失时恢复集群</p>
<ul>
<li>Oozie服务器 - 包含Oozie workflow, coordinator, and bundle data. </li>
<li>Sqoop Server - Contains entities such as the connector, driver, links and jobs. Relatively small.</li>
<li>Activity Monitor - Contains information about past activities. In large clusters, this database can grow large. Configuring an Activity Monitor database is only necessary if a MapReduce service is deployed.</li>
<li>Reports Manager - Tracks disk utilization and processing activities over time. Medium-sized.</li>
<li>Hive Metastore Server - Contains Hive metadata. Relatively small.</li>
<li>Hue Server - Contains user account information, job submissions, and Hive queries. Relatively small.</li>
<li>Sentry Server - Contains authorization metadata. Relatively small.</li>
<li>Cloudera Navigator Audit Server - Contains auditing information. In large clusters, this database can grow large.</li>
<li>Cloudera Navigator Metadata Server - Contains authorization, policies, and audit report metadata. Relatively small.</li>
</ul>
<h2 id="备份前准备"><a href="#备份前准备" class="headerlink" title="备份前准备"></a>备份前准备</h2><ol>
<li>登录到安装Cloudera Manager Server的主机</li>
<li>获取Cloudera Manager数据库的名称，用户和密码属性 <code>cat /etc/cloudera-scm-server/db.properties</code><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">com.cloudera.cmf.db.name=scm</div><div class="line">com.cloudera.cmf.db.user=scm</div><div class="line">com.cloudera.cmf.db.password=NnYfWIjlbk</div></pre></td></tr></table></figure>
</p>
</li>
</ol>
<h2 id="备份MySQL数据库"><a href="#备份MySQL数据库" class="headerlink" title="备份MySQL数据库"></a>备份MySQL数据库</h2><p>在要备份的MySQL主机上执行<code>mysqldump</code>命令:<br><code>$ mysqldump -hhostname -uusername -ppassword database &gt; /tmp/database-backup.sql</code><br>本机例子:<br><code>$ mysqldump -pamon_password amon &gt; /tmp/amon-backup.sql</code><br>远程例子<br><code>$ mysqldump -hmyhost.example.com -uroot -pcloudera amon &gt; /tmp/amon-backup.sql</code></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/快速启动CDH-VM管理信息.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/快速启动CDH-VM管理信息.html" itemprop="url">
                  快速启动CDH-VM管理信息
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-23 01:22:01" itemprop="dateModified" datetime="2018-05-23T01:22:01+08:00">2018-05-23</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/Notes/" itemprop="url" rel="index"><span itemprop="name">Notes</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="快速启动VM管理信息"><a href="#快速启动VM管理信息" class="headerlink" title="快速启动VM管理信息"></a>快速启动VM管理信息</h1><p>在大多数情况下，除了管理已安装的产品和服务之外，QuickStart VM不需要管理。如果需要其他管理或出现问题，本主题提供有关帐户的信息，以及一些常见问题的可能解释和解决方案。<br><a href="http://s3.amazonaws.com/trainingvms/Cloudera-Training-Get2EC2-VM-1.2-vmware.zip" target="_blank" rel="noopener">Cloudera-Training-Get2EC2-VM-1.2-vmware</a></p>
<h2 id="帐户"><a href="#帐户" class="headerlink" title="帐户"></a>帐户</h2><p>一旦启动VM，您将自动登录 cloudera 用户：<br>用户名： cloudera<br>密码： cloudera<br>cloudera 帐户有VM中sudo的权限,密码是cloudera。<br>MySQL root密码（和其他MySQL用户帐户的密码）也是cloudera。<br>Hue和Cloudera Manager使用相同的凭据。</p>
<h2 id="快速启动VMware映像"><a href="#快速启动VMware映像" class="headerlink" title="快速启动VMware映像"></a>快速启动VMware映像</h2><p>要启动VMware映像，您需要适用于Windows和Linux的VMware Player或适用于Mac的VMware Fusion。</p>
<p><strong>注意： VMware Fusion仅在英特尔架构上工作，因此具有PowerPC处理器的旧版Mac无法运行QuickStart VM。</strong></p>
<h2 id="快速启动VirtualBox图像"><a href="#快速启动VirtualBox图像" class="headerlink" title="快速启动VirtualBox图像"></a>快速启动VirtualBox图像</h2><p>有些用户报告了在VirtualBox中运行CentOS 6.4的问题。如果在VirtualBox VM启动时发生内核崩溃，您可以尝试解决此问题，方法是打开设置 &gt; 系统 &gt; 主板选项卡，然后为芯片集选择 ICH9而不是PIIX3。如果尚未这样做，还必须在同一选项卡上启用I / O APIC。</p>
<h2 id="快速启动KVM映像"><a href="#快速启动KVM映像" class="headerlink" title="快速启动KVM映像"></a>快速启动KVM映像</h2><p>KVM映像提供了可由许多管理程序使用的原始磁盘映像。使用足够的RAM配置使用此映像的计算机。有关VM大小要求，请参阅Cloudera QuickStart VM。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Kafka/kafka的相关概念.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Kafka/kafka的相关概念.html" itemprop="url">
                  kafka的相关概念
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-24 13:58:04" itemprop="dateModified" datetime="2017-09-24T13:58:04+08:00">2017-09-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Kafka/" itemprop="url" rel="index"><span itemprop="name">Kafka</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="kafka的相关概念"><a href="#kafka的相关概念" class="headerlink" title="kafka的相关概念"></a>kafka的相关概念</h2><h3 id="AMPQ协议"><a href="#AMPQ协议" class="headerlink" title="AMPQ协议"></a>AMPQ协议</h3><p>一些基本的概念:</p>
<ul>
<li>消费者(Consumer):从消息队列中请求消息的客户端应用程序</li>
<li>生产者(Producer):向broker发布消息的客户端应用程序</li>
<li>AMQP服务器端(broker):用来接收生产者发送的消息并将这些消息路由给服务器中的队列</li>
</ul>
<h3 id="kafka支持的客户端语言"><a href="#kafka支持的客户端语言" class="headerlink" title="kafka支持的客户端语言"></a>kafka支持的客户端语言</h3><p>支持当前大部分主流语言(变形自己的consumer和producer程序)</p>
<h3 id="kafka架构"><a href="#kafka架构" class="headerlink" title="kafka架构"></a>kafka架构</h3><p>一些基本的概念:</p>
<ul>
<li>主题(Topic):一个主题类似新闻中的体育,娱乐,教育等分类概念,在实际工程中通常一个业务一个主题</li>
<li>分区(Partition):一个topic钟的消息数据按照多个分区组织,分区是kafka消息队列组织的最小单位,一个分区可以看做是一个FIFO的队列</li>
</ul>
<hr>
<h2 id="Zookeeper集群搭建"><a href="#Zookeeper集群搭建" class="headerlink" title="Zookeeper集群搭建"></a>Zookeeper集群搭建</h2><ul>
<li>集群搭建</li>
<li>集群配置参数介绍<ul>
<li>myid文件 和server.myid</li>
<li>zoo.cfg文件</li>
<li>log4j.properties文件</li>
<li>zkEnv.sh和zkServer.sh</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/OpenLDAP/slapd配置文件.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/OpenLDAP/slapd配置文件.html" itemprop="url">
                  slapd配置文件
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-24 13:58:04" itemprop="dateModified" datetime="2017-09-24T13:58:04+08:00">2017-09-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/OpenLDAP/" itemprop="url" rel="index"><span itemprop="name">OpenLDAP</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#</div><div class="line"># See slapd.conf(5) for details on configuration options.</div><div class="line"># This file should NOT be world readable.</div><div class="line">#</div><div class="line"></div><div class="line">include		/etc/openldap/schema/corba.schema</div><div class="line">include		/etc/openldap/schema/core.schema</div><div class="line">include		/etc/openldap/schema/cosine.schema</div><div class="line">include		/etc/openldap/schema/duaconf.schema</div><div class="line">include		/etc/openldap/schema/dyngroup.schema</div><div class="line">include		/etc/openldap/schema/inetorgperson.schema</div><div class="line">include		/etc/openldap/schema/java.schema</div><div class="line">include		/etc/openldap/schema/misc.schema</div><div class="line">include		/etc/openldap/schema/nis.schema</div><div class="line">include		/etc/openldap/schema/openldap.schema</div><div class="line">include		/etc/openldap/schema/ppolicy.schema</div><div class="line">include		/etc/openldap/schema/collective.schema</div><div class="line"></div><div class="line"># Allow LDAPv2 client connections.  This is NOT the default.</div><div class="line">allow bind_v2</div><div class="line"></div><div class="line"># Do not enable referrals until AFTER you have a working directory</div><div class="line"># service AND an understanding of referrals.</div><div class="line">#referral	ldap://root.openldap.org</div><div class="line"></div><div class="line">pidfile		/var/run/openldap/slapd.pid</div><div class="line">argsfile	/var/run/openldap/slapd.args</div><div class="line"></div><div class="line"># Load dynamic backend modules</div><div class="line"># - modulepath is architecture dependent value (32/64-bit system)</div><div class="line"># - back_sql.la overlay requires openldap-server-sql package</div><div class="line"># - dyngroup.la and dynlist.la cannot be used at the same time</div><div class="line"></div><div class="line"># modulepath /usr/lib/openldap</div><div class="line"># modulepath /usr/lib64/openldap</div><div class="line"></div><div class="line"># moduleload accesslog.la</div><div class="line"># moduleload auditlog.la</div><div class="line"># moduleload back_sql.la</div><div class="line"># moduleload chain.la</div><div class="line"># moduleload collect.la</div><div class="line"># moduleload constraint.la</div><div class="line"># moduleload dds.la</div><div class="line"># moduleload deref.la</div><div class="line"># moduleload dyngroup.la</div><div class="line"># moduleload dynlist.la</div><div class="line"># moduleload memberof.la</div><div class="line"># moduleload pbind.la</div><div class="line"># moduleload pcache.la</div><div class="line"># moduleload ppolicy.la</div><div class="line"># moduleload refint.la</div><div class="line"># moduleload retcode.la</div><div class="line"># moduleload rwm.la</div><div class="line"># moduleload seqmod.la</div><div class="line"># moduleload smbk5pwd.la</div><div class="line"># moduleload sssvlv.la</div><div class="line"># moduleload syncprov.la</div><div class="line"># moduleload translucent.la</div><div class="line"># moduleload unique.la</div><div class="line"># moduleload valsort.la</div><div class="line"></div><div class="line"># The next three lines allow use of TLS for encrypting connections using a</div><div class="line"># dummy test certificate which you can generate by running</div><div class="line"># /usr/libexec/openldap/generate-server-cert.sh. Your client software may balk</div><div class="line"># at self-signed certificates, however.</div><div class="line">TLSCACertificatePath /etc/openldap/certs</div><div class="line">TLSCertificateFile &quot;\&quot;OpenLDAP Server\&quot;&quot;</div><div class="line">TLSCertificateKeyFile /etc/openldap/certs/password</div><div class="line"></div><div class="line"># Sample security restrictions</div><div class="line">#	Require integrity protection (prevent hijacking)</div><div class="line">#	Require 112-bit (3DES or better) encryption for updates</div><div class="line">#	Require 63-bit encryption for simple bind</div><div class="line"># security ssf=1 update_ssf=112 simple_bind=64</div><div class="line"></div><div class="line"># Sample access control policy:</div><div class="line">#	Root DSE: allow anyone to read it</div><div class="line">#	Subschema (sub)entry DSE: allow anyone to read it</div><div class="line">#	Other DSEs:</div><div class="line">#		Allow self write access</div><div class="line">#		Allow authenticated users read access</div><div class="line">#		Allow anonymous users to authenticate</div><div class="line">#	Directives needed to implement policy:</div><div class="line"># access to dn.base=&quot;&quot; by * read</div><div class="line"># access to dn.base=&quot;cn=Subschema&quot; by * read</div><div class="line"># access to *</div><div class="line">#	by self write</div><div class="line">#	by users read</div><div class="line">#	by anonymous auth</div><div class="line">#</div><div class="line"># if no access controls are present, the default policy</div><div class="line"># allows anyone and everyone to read anything but restricts</div><div class="line"># updates to rootdn.  (e.g., &quot;access to * by * read&quot;)</div><div class="line">#</div><div class="line"># rootdn can always read and write EVERYTHING!</div><div class="line"></div><div class="line"># enable on-the-fly configuration (cn=config)</div><div class="line">database config</div><div class="line">access to *</div><div class="line">	by dn.exact=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; manage</div><div class="line">	by * none</div><div class="line"></div><div class="line"># enable server status monitoring (cn=monitor)</div><div class="line">database monitor</div><div class="line">access to *</div><div class="line">	by dn.exact=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; read</div><div class="line">        by dn.exact=&quot;cn=Manager,dc=my-domain,dc=com&quot; read</div><div class="line">        by * none</div><div class="line"></div><div class="line">#######################################################################</div><div class="line"># database definitions</div><div class="line">#######################################################################</div><div class="line"></div><div class="line">database	bdb</div><div class="line">suffix		&quot;dc=my-domain,dc=com&quot;</div><div class="line">checkpoint	1024 15</div><div class="line">rootdn		&quot;cn=Manager,dc=my-domain,dc=com&quot;</div><div class="line"># Cleartext passwords, especially for the rootdn, should</div><div class="line"># be avoided.  See slappasswd(8) and slapd.conf(5) for details.</div><div class="line"># Use of strong authentication encouraged.</div><div class="line"># rootpw		secret</div><div class="line"># rootpw		&#123;crypt&#125;ijFYNcSNctBYg</div><div class="line"></div><div class="line"># The database directory MUST exist prior to running slapd AND </div><div class="line"># should only be accessible by the slapd and slap tools.</div><div class="line"># Mode 700 recommended.</div><div class="line">directory	/var/lib/ldap</div><div class="line"></div><div class="line"># Indices to maintain for this database</div><div class="line">index objectClass                       eq,pres</div><div class="line">index ou,cn,mail,surname,givenname      eq,pres,sub</div><div class="line">index uidNumber,gidNumber,loginShell    eq,pres</div><div class="line">index uid,memberUid                     eq,pres,sub</div><div class="line">index nisMapName,nisMapEntry            eq,pres,sub</div><div class="line"></div><div class="line"># Replicas of this database</div><div class="line">#replogfile /var/lib/ldap/openldap-master-replog</div><div class="line">#replica host=ldap-1.example.com:389 starttls=critical</div><div class="line">#     bindmethod=sasl saslmech=GSSAPI</div><div class="line">#     authcId=host/ldap-master.example.com@EXAMPLE.COM</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/linux系统中常见的性能分析工具.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/linux系统中常见的性能分析工具.html" itemprop="url">
                  linux系统中常见的性能分析工具
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-24 13:58:04" itemprop="dateModified" datetime="2017-09-24T13:58:04+08:00">2017-09-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>linux系统中常见的性能分析工具</p>
<h2 id="vmstat"><a href="#vmstat" class="headerlink" title="vmstat"></a>vmstat</h2><pre><code>vmstat是linux/unix上一个监控工具，能展示给定时间间隔的服务器的状态，包括操作系统的内存信息，CPU使用状态、进程信息等。

</code></pre><p>语法：<br>vmstat [-V] [delay [count]]</p>
<pre><code>#-V     打印出vmstat工具的版本信息
#delay  设置两次输出的时间间隔
#count  设置总共输出的次数


</code></pre><hr>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">host-xxx-xxx-xxx-xxx:~ # vmstat -V</div><div class="line">procps version 3.2.7</div><div class="line">host-xxx-xxx-xxx-xxx:~ # vmstat 2 3</div><div class="line">procs -----------memory---------- ---swap-- -----io---- -system-- -----cpu------</div><div class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</div><div class="line"> 0  0      0 13107104 1981044 766592    0    0     0    18    0    1  0  0 100  0  0</div><div class="line"> 0  0      0 13106776 1981044 766592    0    0     0     0  833  697  0  0 100  0  0</div><div class="line"> 0  0      0 13106784 1981044 766592    0    0     0     0  391  427  0  0 100  0  0</div></pre></td></tr></table></figure>
</p>
<p>对输出参数进行讲解<br>    procs<br>        r：运行进程数（即真正分配到cpu的进程数量），如果该值长期大于系统逻辑cpu的数量，表示cpu不足<br>        b：表示阻塞的进程数<br>    memory<br>        swpd：表示正在使用的虚拟内存的多少<br>        free：表示当前空闲的物理内存的大小<br>        buff：表示当前使用的buffers的大小<br>        cached：表示当前使用的cached的大小<br>buffers和cached的区别：<br>    ①buffers和cached都是内存的一部分<br>    ②buffers是内存与磁盘之间的，当对磁盘进行读写操作时，内存先将数据缓存到buffers中，然后再写入磁盘;cached是cpu和内存之间的，cached是缓存读取过的内容，下次再读时，如果在缓存中命中，则直接从缓存读取，否则读取磁盘。<br>      swap<br>        si：表示从磁盘读入到虚拟内存的大小<br>        so：表示从虚拟内存写入到磁盘的大小</p>
<p>如果si和so长期不为0,表示系统内存不足;而如果swpd的值长期不为0,但si和so的值长期为0,则无需担心<br>      io<br>        bi：表示从磁盘读取数据的总量<br>        bo：表示写入磁盘的数据总量<br>      system<br>        in：表示系统中断数<br>        cs：表示每秒产生的上下文切换次数<br>in和cs的值越大，内核消耗cpu时间越大<br>      cpu<br>         us：用户进程消耗的cpu时间所占百分比<br>         sy：内核进程消耗的cpu时间所占百分比<br>          id：cpu空闲状态的时间百分比<br>          wa：表示IO等待所占用的cpu时间百分比</p>
<p>us+sy+id=100</p>
<h2 id="sar命令"><a href="#sar命令" class="headerlink" title="sar命令"></a>sar命令</h2><p> sar命令可以获取系统的cpu、磁盘、内存、网络运行状态等信息<br>常见用法有</p>
<hr>
<p>host-xxx-xxx-xxx-xxx:~ # sar -u 1 3<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>10:00:56        CPU     %user     %nice   %system   %iowait    %steal     %idle<br>10:00:57        all      0.12      0.00      0.12      0.00      0.00     99.75<br>10:00:58        all      0.25      0.00      0.25      0.00      0.00     99.50<br>10:00:59        all      0.00      0.00      0.00      0.00      0.00    100.00<br>Average:        all      0.13      0.00      0.13      0.00      0.00     99.75</p>
<p>host-xxx-xxx-xxx-xxx:~ # sar -P 0 1 2<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>10:02:10        CPU     %user     %nice   %system   %iowait    %steal     %idle<br>10:02:11          0      0.00      0.00      1.00      0.00      0.00     99.00<br>10:02:12          0      3.00      0.00      0.00      0.00      0.00     97.00<br>Average:          0      1.50      0.00      0.50      0.00      0.00     98.00<br>host-xxx-xxx-xxx-xxx:~ # sar -d 1 3<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>10:02:20          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>10:02:21     dev202-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:21     dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:21     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:21     dev253-2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</p>
<p>10:02:21          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>10:02:22     dev202-0      0.99      0.00     15.84     16.00      0.00      0.00      0.00      0.00<br>10:02:22     dev253-0      1.98      0.00     15.84      8.00      0.00      0.00      0.00      0.00<br>10:02:22     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:22     dev253-2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</p>
<p>10:02:22          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>10:02:23     dev202-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:23     dev253-0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:23     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:02:23     dev253-2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00</p>
<p>Average:          DEV       tps  rd_sec/s  wr_sec/s  avgrq-sz  avgqu-sz     await     svctm     %util<br>Average:     dev202-0      0.34      0.00      5.39     16.00      0.00      0.00      0.00      0.00<br>Average:     dev253-0      0.67      0.00      5.39      8.00      0.00      0.00      0.00      0.00<br>Average:     dev253-1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>Average:     dev253-2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>host-xxx-xxx-xxx-xxx:~ # sar -r 1 3<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>10:02:32    kbmemfree kbmemused  %memused kbbuffers  kbcached  kbcommit   %commit<br>10:02:33     13106232   3189176     19.57   1981048    766804   1231016      6.01<br>10:02:34     13105448   3189960     19.58   1981048    766804   1231016      6.01<br>10:02:35     13105448   3189960     19.58   1981048    766804   1231016      6.01<br>Average:     13105709   3189699     19.57   1981048    766804   1231016      6.01<br>host-xxx-xxx-xxx-xxx:~ # sar -n DEV 1 1<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>10:03:02        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>10:03:03           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>10:03:03         eth0    371.72    363.64     58.21     28.63      0.00      0.00      0.00</p>
<p>Average:        IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s<br>Average:           lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00<br>Average:         eth0    371.72    363.64     58.21     28.63      0.00      0.00      0.00<br>注意要点：<br>    -u表示查看系统cpu整体的使用状态，-P可以分开查询每个cpu的使用情况，其中对cpu的计数是从0开始的</p>
<h2 id="iostat"><a href="#iostat" class="headerlink" title="iostat"></a>iostat</h2><p>可以对系统磁盘的IO操作进行监控，同时也可以输出显示cpu的使用情况<br>语法：</p>
<p>iostat options [interval [count]]<br>options<br>说明<br>-c<br>显示cpu的使用情况<br>-d<br>显示磁盘的使用情况<br>-k<br>表示以KB为单位显示数据<br>-x device<br>指定要统计的磁盘设备</p>
<p>host-xxx-xxx-xxx-xxx:~ # iostat -d -k<br>Linux 3.0.76-0.11-default (host-10-200-43-168)  10/19/16    _x86<em>64</em></p>
<p>Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn<br>xvda              3.65         0.08       144.00     556844  970083876<br>dm-0              0.69         0.07         2.75     494361   18546224<br>dm-1             35.31         0.00       141.22      13817  951330764<br>dm-2              0.01         0.00         0.03      24905     206736</p>
<p>KB_read/s:表示每秒读取的数据块数量<br>KB_wrtn/s:表示每秒写入的数据块数量<br>KB_read:表示总共读的数据块数量KB_wrtn:表示总共写的数据块数量</p>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><pre><code>可以显示网络连接、端口状态和路由表等信息

</code></pre><p>语法：netstat [options]<br>常见option<br>说明<br>-a<br>显示所有的连接和监听的端口<br>-r<br>显示路由信息<br>-t<br>显示tcp连接<br>-u<br>显示udp连接<br>-l<br>显示连接状态为LISTEN的连接<br>-p<br>显示连接对应的PID<br>-n<br>以IP和端口的形式显示连接<br>比较常见用法：<br>netstat -plnt<br>netstat -puln<br>netstat -r</p>
<h2 id="free"><a href="#free" class="headerlink" title="free"></a>free</h2><pre><code>监控linux内存的使用情况

</code></pre><p>host-xxx-xxx-xxx-xxx:~ # free<br>             total       used       free     shared    buffers     cached<br>Mem:      16295408    3190164   13105244          0    1981048     766576<br>-/+ buffers/cache:     442540   15852868<br>Swap:      4193276          0    4193276</p>
<h2 id="uptime"><a href="#uptime" class="headerlink" title="uptime"></a>uptime</h2><pre><code>可以查看系统的启动时长和cpu的负载情况

</code></pre><p>host-xxx-xxx-xxx-xxx:~ # uptime<br> 10:12am  up 77 days 23:17,  3 users,  load average: 0.08, 0.12, 0.13<br>系统现在时间    启动时长   登录用户数量      1分钟内的平均负载  5分钟内的平均负载   15分钟内的平均负载<br>注意：load average的三个输出值如果大于系统逻辑cpu数量时，表示cpu繁忙，会影响系统性能</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Sentry/hive Sentry 权限配置.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Sentry/hive Sentry 权限配置.html" itemprop="url">
                  hive Sentry 权限配置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-09-24 13:58:04" itemprop="dateModified" datetime="2017-09-24T13:58:04+08:00">2017-09-24</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/Sentry/" itemprop="url" rel="index"><span itemprop="name">Sentry</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="hive-Sentry用户授权配置"><a href="#hive-Sentry用户授权配置" class="headerlink" title="hive Sentry用户授权配置"></a>hive Sentry用户授权配置</h1><p><a href="www.cloudera.com/documentation/enterprise/latest/topics/sg_hive_sql.html#concept_c2q_4qx_p4__section_t5x_pg4_rp">Hive SQL Syntax for Use with Sentry</a></p>
<h2 id="为Hive用户添加全局的权限。"><a href="#为Hive用户添加全局的权限。" class="headerlink" title="为Hive用户添加全局的权限。"></a>为Hive用户添加全局的权限。</h2><p>目前的管理员为Hive，用户授权的操作都需要由Hive完成。这里使用Hive用户的Kerberos账户进入Beeline<br>为hive用户获取principal </p>
<p><code>kinit -kt hive.keytab  hive</code></p>
<p>列出了当前缓存中保存的Kerberos主体和Kerberos principal</p>
<p><code>klist</code></p>
<p>由于我们使用的是sentry基于数据库的存储方式,我们直接建在了hive的元数据库中</p>
<p><code>beeline -u &#39;jdbc:hive2://xx.xxx.xx.xx:xxxx/rptdata;principal=hive/xxxx@XXXX&#39;</code></p>
<p>在beeline中，添加管理员角色，然后将Sentry服务器上的所有权限付给hive用户，然后将admin的角色赋给hive组，让hive组能够自由的建立数据库。</p>
<h3 id="创建角色声明"><a href="#创建角色声明" class="headerlink" title="创建角色声明"></a>创建角色声明</h3><p>语句创建一个可以授予权限的角色。权限可以授予角色，然后可以将其分配给用户。已分配角色的用户只能行使该角色的权限。<br>只有具有管理权限的用户才能创建/删除角色。默认情况下hive, impala 和 hue用户在Sentry中拥有管理员权限。(然而并没有)</p>
<p><code>CREATE ROLE [role_name];</code></p>
<h3 id="删除角色声明"><a href="#删除角色声明" class="headerlink" title="删除角色声明"></a>删除角色声明</h3><p>一旦删除，该角色将被撤销给以前分配给它的所有用户。已经执行的查询不会受到影响。但是，由于Hive在执行每个查询之前检查用户权限，因此角色已启用的活动用户会话将受到影响。</p>
<p><code>DROP ROLE [role_name];</code></p>
<h3 id="授权角色声明"><a href="#授权角色声明" class="headerlink" title="授权角色声明"></a>授权角色声明</h3><p>只有Sentry管理员用户可以将角色授予组。</p>
<p><code>GRANT ROLE role_name [, role_name] TO GROUP &lt;groupName&gt; [,GROUP &lt;groupName&gt;]</code></p>
<h3 id="撤销角色声明"><a href="#撤销角色声明" class="headerlink" title="撤销角色声明"></a>撤销角色声明</h3><p>可用于从组中撤销角色。只有Sentry管理员用户可以从组中撤销该角色。</p>
<p><code>REVOKE ROLE role_name [, role_name] FROM GROUP &lt;groupName&gt; [,GROUP &lt;groupName&gt;]</code></p>
<h3 id="赋予角色权限声明"><a href="#赋予角色权限声明" class="headerlink" title="赋予角色权限声明"></a>赋予角色权限声明</h3><p>用户必须是Sentry admin用户。</p>
<p><code>GRANT &lt;PRIVILEGE&gt; [, &lt;PRIVILEGE&gt; ] ON &lt;OBJECT&gt; &lt;object_name&gt; TO ROLE &lt;roleName&gt; [,ROLE &lt;roleName&gt;]</code></p>
<h3 id="赋予角色外部表权限"><a href="#赋予角色外部表权限" class="headerlink" title="赋予角色外部表权限"></a>赋予角色外部表权限</h3><p><code>GRANT ALL ON URI &#39;hdfs://namenode:XXX/path/to/table&#39;</code></p>
<p><code>grant all on URI &#39;hdfs://nameservice1/user/thadoop/ods&#39; to role thadoop</code></p>
<h3 id="撤销角色权限"><a href="#撤销角色权限" class="headerlink" title="撤销角色权限"></a>撤销角色权限</h3><p>只有Sentry管理员用户可以从组中撤销权限</p>
<p><code>REVOKE &lt;PRIVILEGE&gt; [, &lt;PRIVILEGE&gt; ] ON &lt;OBJECT&gt; &lt;object_name&gt; FROM ROLE &lt;roleName&gt; [,ROLE &lt;roleName&gt;]</code></p>
<h3 id="指定角色声明"><a href="#指定角色声明" class="headerlink" title="指定角色声明"></a>指定角色声明</h3><p>用于指定当前会话启用的角色。用户只能启用已授予他们的角色。任何未列出，尚未启用的角色均将禁用当前会话。如果没有指定启用任何角色，用户将具有由他所属的所有角色授予的权限。</p>
<ul>
<li>启用特定角色</li>
</ul>
<p><code>SET ROLE &lt;roleName&gt;;</code></p>
<ul>
<li>启用所有角色：</li>
</ul>
<p><code>SET ROLE ALL;</code></p>
<ul>
<li>未启用角色：</li>
</ul>
<p><code>SET ROLE NONE;</code></p>
<h3 id="show声明"><a href="#show声明" class="headerlink" title="show声明"></a>show声明</h3><ul>
<li>列出当前用户具有数据库，表或列级访问的数据库：</li>
</ul>
<p><code>SHOW DATABASES;</code></p>
<ul>
<li>列出当前用户具有表或列级访问权限的表：</li>
</ul>
<p><code>SHOW TABLES;</code></p>
<ul>
<li>列出当前用户拥有的列的访问：</li>
</ul>
<p><code>SHOW COLUMNS;</code></p>
<ul>
<li>列出系统中的所有角色（仅适用于哨兵管理员用户）：</li>
</ul>
<p><code>SHOW ROLES;</code></p>
<ul>
<li>列出当前用户会话有效的所有角色：</li>
</ul>
<p><code>SHOW CURRENT ROLES;</code></p>
<ul>
<li>列出分配给给定的所有角色 &lt;groupName&gt; （仅允许Sentry管理员用户和属于指定的组的其他用户 &lt;groupName&gt;）：</li>
</ul>
<p><code>SHOW ROLE GRANT GROUP &lt;groupName&gt;;</code></p>
<ul>
<li>SHOW语句也可以用于列出授予角色的特权或给予特定对象的角色的所有特权</li>
</ul>
<p><code>SHOW GRANT ROLE &lt;roleName&gt;;</code></p>
<ul>
<li>列出给定的角色的所有授权</li>
</ul>
<p><code>SHOW GRANT ROLE &lt;roleName&gt; on OBJECT &lt;objectName&gt;;</code></p>
<h2 id="操作样例"><a href="#操作样例" class="headerlink" title="操作样例:"></a>操作样例:</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt; create role test_role;</div><div class="line">&gt; grant all on server hive to role test_role;</div><div class="line">&gt; show roles;</div><div class="line">+---------------+--+</div><div class="line">|     role      |</div><div class="line">+---------------+--+</div><div class="line">| test_role     |</div><div class="line">| thadoop       |</div><div class="line">| admin_role    |</div><div class="line">| thadoop_role  |</div><div class="line">+---------------+--+</div><div class="line">4 rows selected (0.179 seconds)</div><div class="line">&gt; show grant role test_role;</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| database  | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| *         |        |            |         | test_role       | ROLE            | *          | false         | 1493690779745000  | --       |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">1 row selected (0.146 seconds)</div><div class="line">&gt; show grant role admin_role;</div><div class="line"></div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| database  | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| *         |        |            |         | admin_role      | ROLE            | *          | false         | 1490532327514000  | --       |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">1 row selected (0.167 seconds)</div><div class="line"></div><div class="line">&gt; drop role test_role;</div><div class="line">&gt; show roles;</div><div class="line">+---------------+--+</div><div class="line">|     role      |</div><div class="line">+---------------+--+</div><div class="line">| thadoop       |</div><div class="line">| admin_role    |</div><div class="line">| thadoop_role  |</div><div class="line">+---------------+--+</div><div class="line">&gt; grant select on database rpt to role thadoop;</div><div class="line">&gt; grant insert on database rpt to role thadoop;</div><div class="line">&gt; grant all on database rptdata to role thadoop;</div><div class="line"></div><div class="line">#对于建表权限 必须先把要要建的表的权限赋给相应的role</div><div class="line">&gt; grant all on database ods to role thadoop;</div><div class="line">&gt; show grant role thadoop;</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">|               database                |               table               | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| hdfs://nameservice1/user/thadoop/ods  |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493369887314000  | --       |</div><div class="line">| ods                                   | pub_50118_visit_log_voms_tour_ex  |            |         | thadoop         | ROLE            | select     | false         | 1492593741232000  | --       |</div><div class="line">| rptdata                               |                                   |            |         | thadoop         | ROLE            | *          | false         | 1492619387707000  | --       |</div><div class="line">| rpt                                   |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493023378368000  | --       |</div><div class="line">| ods                                   |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493369642620000  | --       |</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">5 rows selected (0.159 seconds)</div><div class="line">&gt; use ods;</div><div class="line">&gt; revoke select on table pub_50118_visit_log_voms_tour_ex from role thadoop;</div><div class="line">&gt; show grant role thadoop;</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">|               database                | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| ods                                   |        |            |         | thadoop         | ROLE            | *          | false         | 1493369642620000  | --       |</div><div class="line">| hdfs://nameservice1/user/thadoop/ods  |        |            |         | thadoop         | ROLE            | *          | false         | 1493369887314000  | --       |</div><div class="line">| rptdata                               |        |            |         | thadoop         | ROLE            | *          | false         | 1492619387707000  | --       |</div><div class="line">| rpt                                   |        |            |         | thadoop         | ROLE            | *          | false         | 1493023378368000  | --       |</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">4 rows selected (0.142 seconds)</div></pre></td></tr></table></figure>
</p>
<h4 id="此外发现hive开启sentry后-hue中对应的用户也得是sentry最终授权的用户-否则将无法访问元数据"><a href="#此外发现hive开启sentry后-hue中对应的用户也得是sentry最终授权的用户-否则将无法访问元数据" class="headerlink" title="此外发现hive开启sentry后 hue中对应的用户也得是sentry最终授权的用户,否则将无法访问元数据"></a>此外发现hive开启sentry后 hue中对应的用户也得是sentry最终授权的用户,否则将无法访问元数据</h4>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Error/[Linux]磁盘inode满导致数据无法写入.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Error/[Linux]磁盘inode满导致数据无法写入.html" itemprop="url">
                  磁盘inode满导致数据无法写入
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-29 23:19:59" itemprop="dateModified" datetime="2018-05-29T23:19:59+08:00">2018-05-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/Error/" itemprop="url" rel="index"><span itemprop="name">Error</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="磁盘inode满导致数据无法写入"><a href="#磁盘inode满导致数据无法写入" class="headerlink" title="磁盘inode满导致数据无法写入"></a>磁盘inode满导致数据无法写入</h1><p>BDI的一个工作节点,报错数据没有空间写入,但是通过命令df查看磁盘空间还有剩余,当前目录文件数目也没有超过最大限制,<br>最后发现是分区inode满了导致</p>
<p>同时bdi的调度,虽然服务停止了之前的调度任务被分配到该节点的话就不会自动选择其他正常工作的节点了<br><a href="https://www.ibm.com/developerworks/cn/aix/library/au-speakingunix14/" target="_blank" rel="noopener">参考文档</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/CM/impala hdfs hbase等用户的nproc的设置.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/CM/impala hdfs hbase等用户的nproc的设置.html" itemprop="url">
                  impala hdfs hbase等用户的nproc的设置
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-05-24 00:00:00" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">2017-05-24</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-05-29 23:19:59" itemprop="dateModified" datetime="2018-05-29T23:19:59+08:00">2018-05-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/" itemprop="url" rel="index"><span itemprop="name">CDH</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/CDH/CM/" itemprop="url" rel="index"><span itemprop="name">CM</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://www.cloudera.com/documentation/enterprise/latest/topics/cdh_ig_hbase_config.html" target="_blank" rel="noopener">请参考下面的方法，检查一下impala／hdfs／hbase等用户的nproc的设置是否符合cloudera推荐的值</a></p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ddp-cm:/dev/shm # vi /etc/security/limits.conf </div><div class="line"></div><div class="line"># /etc/security/limits.conf</div><div class="line">#</div><div class="line">#Each line describes a limit for a user in the form:</div><div class="line">#</div><div class="line">#&lt;domain&gt;        &lt;type&gt;  &lt;item&gt;  &lt;value&gt;</div><div class="line">#</div><div class="line">#Where:</div><div class="line">#&lt;domain&gt; can be:</div><div class="line">#        - an user name</div><div class="line">#        - a group name, with @group syntax</div><div class="line">#        - the wildcard *, for default entry</div><div class="line">#        - the wildcard %, can be also used with %group syntax,</div><div class="line">#                 for maxlogin limit</div><div class="line">#</div><div class="line">#&lt;type&gt; can have the two values:</div><div class="line">#        - &quot;soft&quot; for enforcing the soft limits</div><div class="line">#        - &quot;hard&quot; for enforcing hard limits</div><div class="line">#</div><div class="line">#&lt;item&gt; can be one of the following:</div><div class="line">#        - core - limits the core file size (KB)</div><div class="line">#        - data - max data size (KB)</div><div class="line">#        - fsize - maximum filesize (KB)</div><div class="line">#        - memlock - max locked-in-memory address space (KB)</div><div class="line">#        - nofile - max number of open files</div><div class="line">#        - rss - max resident set size (KB)</div><div class="line">#        - stack - max stack size (KB)</div><div class="line">#        - cpu - max CPU time (MIN)</div><div class="line">#        - nproc - max number of processes</div><div class="line">#        - as - address space limit (KB)</div><div class="line">#        - maxlogins - max number of logins for this user</div><div class="line">#        - maxsyslogins - max number of logins on the system</div><div class="line">#        - priority - the priority to run user process with</div><div class="line">#        - locks - max number of file locks the user can hold</div><div class="line">#        - sigpending - max number of pending signals</div><div class="line">#        - msgqueue - max memory used by POSIX message queues (bytes)</div><div class="line">#        - nice - max nice priority allowed to raise to values: [-20, 19]</div><div class="line">#        - rtprio - max realtime priority</div><div class="line">#</div><div class="line">#&lt;domain&gt;      &lt;type&gt;  &lt;item&gt;         &lt;value&gt;</div><div class="line">#</div><div class="line"></div><div class="line">#*               soft    core            0</div><div class="line">#*               hard    rss             10000</div><div class="line">#@student        hard    nproc           20</div><div class="line">#@faculty        soft    nproc           20</div><div class="line">#@faculty        hard    nproc           50</div><div class="line">#ftp             hard    nproc           0</div><div class="line">#@student        -       maxlogins       4</div><div class="line"></div><div class="line"># End of file</div><div class="line"></div><div class="line">oracle           soft    nproc   2047</div><div class="line">oracle           hard    nproc   16384</div><div class="line">oracle           soft    nofile  1024</div><div class="line">oracle           hard    nofile  65536</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Nameless13" />
            
              <p class="site-author-name" itemprop="name">Nameless13</p>
              <p class="site-description motion-element" itemprop="description">─=≡Σ((( つ•̀ω•́)つ，大数据运维工程狮，90后</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">164</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">33</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nameless13</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.4.3</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



	





  





  










  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=6.3.0"></script>



  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
