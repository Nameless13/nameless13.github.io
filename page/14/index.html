<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:type" content="website">
<meta property="og:title" content="Nameless13">
<meta property="og:url" content="https://nameless13.github.io/page/14/index.html">
<meta property="og:site_name" content="Nameless13">
<meta property="og:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nameless13">
<meta name="twitter:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'J3OX6892F7',
      apiKey: '38852eb9095216f8f2ada575a06a9cfc',
      indexName: 'Blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://nameless13.github.io/page/14/"/>





  <title>Nameless13</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Nameless13</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/CDH.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/CDH.html" itemprop="url">CDH</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Process-Management"><a href="#Process-Management" class="headerlink" title="Process Management"></a>Process Management</h2><p>在Cloudera Manager受管集群中，您只能使用Cloudera Manager启动或停止角色实例进程。</p>
<p>Cloudera Manager使用名为<strong>supervisord</strong>的开源过程管理工具,启动进程，负责重定向日志文件，通知进程失败，将调用进程的有效用户ID设置为正确的用户，等等。</p>
<p>停止Cloudera Manager Server和Cloudera Manager Agent不会降低您的服务;任何正在运行的角色实例都会继续运行</p>
<p>有些用户报告了在VirtualBox中运行CentOS 6.4的问题。如果在VirtualBox VM启动时发生内核崩溃，您可以尝试解决此问题，方法是打开设置 &gt; 系统 &gt; 主板选项卡，然后为芯片集选择 ICH9而不是PIIX3。如果尚未这样做，还必须在同一选项卡上启用I / O APIC。</p>
<hr>
<hr>
<p>yarn impala hbase 内存调整 总可用内存的80%</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Yarn</div><div class="line">container memory </div><div class="line">yarn.nodemanager.resource.memory-mb</div><div class="line">Hbase</div><div class="line">Java Heap Size of HBase RegionServer in Bytes</div><div class="line">Impala</div><div class="line">Impala Daemon Memory Limit</div></pre></td></tr></table></figure>
</p>
<hr>
<p>从节点的内存需要根据CPU的虚拟核数（vcore）进行匹配，<br>CPU的虚拟核数计算公式=cpu<em>单CPU核数</em>超线程数<br>内存容量大小=vcore数*2GB 至少2GB</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Upgrade/手动安装zypper源和rpm包.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Upgrade/手动安装zypper源和rpm包.html" itemprop="url">从zypper源手动安装CDH,以及所缺rpm包</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Upgrade/" itemprop="url" rel="index">
                    <span itemprop="name">Upgrade</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="手动安装CDH"><a href="#手动安装CDH" class="headerlink" title="手动安装CDH"></a>手动安装CDH</h1><p>因CDH平台升级,有部分节点发现通过cm批量安装失败,且新版本需要将安装python-psycopg2-2.6.2-3.3.x86_64.rpm这个包</p>
<blockquote>
<p>操作系统:SUSE11 SP3<br>CM版本:CM5.10.0<br>CDH版本:CDH5.10.1<br>使用root用户对集群进行部署</p>
</blockquote>
<h2 id="CM前端管理方式安装CDH失败"><a href="#CM前端管理方式安装CDH失败" class="headerlink" title="CM前端管理方式安装CDH失败:"></a>CM前端管理方式安装CDH失败:</h2><ol>
<li>主机密码不对</li>
<li><p>先手工卸载旧rpm包,手工配zypper源安装<br>如果安装时报出缺少<code>libpq.so.5()(64bit)</code>依赖,需要先安装系统ISO镜像自带的postgresql91-9.1.9-0.3.1.x86_64.rpm（需要用到此包中的libpq库）,之后再安装python-psycopg2-2.6.2-3.3.x86_64.rpm</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">zypper in postgresql91</div><div class="line">rpm -ivh python-psycopg2-2.6.2-3.2.x86_64.rpm</div></pre></td></tr></table></figure>
</p>
<p><a href="https://software.opensuse.org/download.html?project=server%3Adatabase%3Apostgresql&amp;package=python-psycopg2" target="_blank" rel="noopener">下载地址1</a><br><a href="http://ftp.rrzn.uni-hannover.de/opensuse/repositories/server:/database:/postgresql/SLE_11_SP3/x86_64/?winzoom=1" target="_blank" rel="noopener">下载地址2</a></p>
</li>
<li>zypper源指向不对,删除无效的zypper源<ol>
<li>Backup repository.<br><code>find /etc/zypp/repos.d -name &quot;*.repo&quot; -exec mv {} {}.bak \;</code></li>
<li>Change<br><code>sudo zypper mr -d &quot;SUSE-Linux-Enterprise-Server-11-SP3 11.3.3-1.138&quot;</code><br><code>zypper ar http://10.200.58.43/ local.main</code></li>
<li>Update cache<br><code>zypper ref</code></li>
</ol>
</li>
</ol>
<p>先手工卸载旧rpm包</p>
<ol>
<li><p>hostd影响,</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">/etc/hosts和CM节点不一致</div><div class="line">mv /usr/bin/host /usr/bin/host.bak</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>supervisord进程未停止<br><code>ps aux|grep  supervisord |grep -v grep | awk &#39;{print &quot;kill -9 &quot;$2}&#39;|sh</code></p>
<p>zypper in cloudera-manager-daemons-5.11.1-1.cm5111.p0.9.sles11<br>zypper in cloudera-manager-agent-5.11.1-1.cm5111.p0.9.sles11</p>
</li>
</ol>
<hr>
<h2 id="Zookeeper提权"><a href="#Zookeeper提权" class="headerlink" title="Zookeeper提权"></a>Zookeeper提权</h2><p><a href="http://stackoverflow.com/questions/35544155/how-to-access-a-zookeeper-ensemble-as-a-super-user-via-zookeeper-shell/35654757#35654757" target="_blank" rel="noopener">Zookeeper 绕过密码注册超级管理员</a></p>
<p>cm中 <strong>Zookeeper Server 的 Java 配置选项</strong><br><code>SERVER_JVMFLAGS=-Dzookeeper.DigestAuthenticationProvider.superDigest=super:DyNYQEQvajljsxlhf5uS4PJ9R28=</code></p>
<p><a href="http://www.tuicool.com/articles/neY7Vrq" target="_blank" rel="noopener">http://www.tuicool.com/articles/neY7Vrq</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/python/Python 学习笔记.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/python/Python 学习笔记.html" itemprop="url">Python 学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="LEGB-L-gt-E-gt-G-gt-B"><a href="#LEGB-L-gt-E-gt-G-gt-B" class="headerlink" title="LEGB : L&gt;E&gt;G&gt;B"></a>LEGB : L&gt;E&gt;G&gt;B</h2><ul>
<li>L:local 函数内部作用域</li>
<li>E:enclosing 函数内部与内嵌函数之间</li>
<li>G:global 全局作用域</li>
<li>B:buil-in 内置作用域</li>
</ul>
<hr>
<p>函数体内部的语句在执行时，一旦执行到return时，函数就执行完毕，并将结果返回。因此，函数内部通过条件判断和循环可以实现非常复杂的逻辑。</p>
<p>如果没有return语句，函数执行完毕后也会返回结果，只是结果为None。</p>
<p>实际上pass可以用来作为占位符，比如现在还没想好怎么写函数的代码，就可以先放一个pass，让代码能运行起来。</p>
<p>写列表生成式时，把要生成的元素x * x放到前面，后面跟for循环，就可以把list创建出来，十分有用，多写几次，很快就可以熟悉这种语法</p>
<p>for循环后面还可以加上if判断，这样我们就可以筛选出仅偶数的平方：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;&gt;&gt; [x * x for x in range(1, 11) if x % 2 == 0]</div><div class="line">[4, 16, 36, 64, 100]</div></pre></td></tr></table></figure>
</p>
<p>如果列表元素可以按照某种算法推算出来，那我们是否可以在循环的过程中不断推算出后续的元素呢？这样就不必创建完整的list，从而节省大量的空间。在Python中，这种一边循环一边计算的机制，称为生成器（Generator）。</p>
<p>map()函数接收两个参数，一个是函数，一个是序列，map将传入的函数依次作用到序列的每个元素，并把结果作为新的list返回。</p>
<p>reduce把一个函数作用在一个序列[x1, x2, x3…]上，这个函数必须接收两个参数，reduce把结果继续和序列的下一个元素做累积计算，</p>
<p>filter()也接收一个函数和一个序列。和map()不同的时，filter()把传入的函数依次作用于每个元素，然后根据返回值是True还是False决定保留还是丢弃该元素。</p>
<p>返回闭包时牢记的一点就是：返回函数不要引用任何循环变量，或者后续会发生变化的变量。<br>如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;&gt;&gt; def count():</div><div class="line">...     fs = []</div><div class="line">...     for i in range(1, 4):</div><div class="line">...         def f(j):</div><div class="line">...             def g():</div><div class="line">...                 return j*j</div><div class="line">...             return g</div><div class="line">...         fs.append(f(i))</div><div class="line">...     return fs</div><div class="line">... </div><div class="line">&gt;&gt;&gt; f1, f2, f3 = count()</div><div class="line">&gt;&gt;&gt; f1()</div><div class="line">1</div><div class="line">&gt;&gt;&gt; f2()</div><div class="line">4</div><div class="line">&gt;&gt;&gt; f3()</div><div class="line">9</div></pre></td></tr></table></figure>
</p>
<p>关键字lambda表示匿名函数，冒号前面的x表示函数参数。</p>
<p>匿名函数有个限制，就是只能有一个表达式，不用写return，返回值就是该表达式的结果。</p>
<p>用匿名函数有个好处，因为函数没有名字，不必担心函数名冲突。此外，匿名函数也是一个函数对象，也可以把匿名函数赋值给一个变量，再利用变量来调用该函数：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;&gt;&gt; map(lambda x: x * x, [1, 2, 3, 4, 5, 6, 7, 8, 9])</div><div class="line">[1, 4, 9, 16, 25, 36, 49, 64, 81]</div></pre></td></tr></table></figure>
</p>
<p><em>args是非关键字参数，用于元组，*</em>kw是关键字参数，用于字典</p>
<p>注意到<strong>init</strong>方法的第一个参数永远是self，表示创建的实例本身，因此，在<strong>init</strong>方法内部，就可以把各种属性绑定到self，因为self就指向创建的实例本身。</p>
<p>有了<strong>init</strong>方法，在创建实例的时候，就不能传入空的参数了，必须传入与<strong>init</strong>方法匹配的参数，但self不需要传，Python解释器自己会把实例变量传进去：</p>
<p>和普通的函数相比，在类中定义的函数只有一点不同，就是第一个参数永远是实例变量self，并且，调用时，不用传递该参数。除此之外，类的方法和普通函数没有什么区别，所以，你仍然可以用默认参数、可变参数和关键字参数。</p>
<p>如果要让内部属性不被外部访问，可以把属性的名称前加上两个下划线<strong>，在Python中，实例的变量名如果以</strong>开头，就变成了一个私有变量（private），只有内部可以访问，外部不能访问，所以，我们把Student类改一改：</p>
<p>但是如果外部代码要获取name和score怎么办？可以给Student类增加get_name和get_score这样的方法</p>
<hr>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"></div><div class="line">class Student(object):</div><div class="line">    ...</div><div class="line"></div><div class="line">    def get_name(self):</div><div class="line">        return self.__name</div><div class="line"></div><div class="line">    def get_score(self):</div><div class="line">        return self.__score</div></pre></td></tr></table></figure>
</p>
<p>如果又要允许外部代码修改score怎么办？可以给Student类增加set_score方法<br>你也许会问，原先那种直接通过bart.score = 59也可以修改啊，为什么要定义一个方法大费周折？因为在方法中，可以对参数做检查，避免传入无效的参数：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">class Student(object):</div><div class="line">    ...</div><div class="line"></div><div class="line">    def set_score(self, score):</div><div class="line">        if 0 &lt;= score &lt;= 100:</div><div class="line">            self.__score = score</div><div class="line">        else:</div><div class="line">            raise ValueError(&apos;bad score&apos;)</div></pre></td></tr></table></figure></p>
<p>要理解什么是多态，我们首先要对数据类型再作一点说明。当我们定义一个class的时候，我们实际上就定义了一种数据类型。我们定义的数据类型和Python自带的数据类型，比如str、list、dict没什么两样：</p>
<p>最后注意到有一种类型就叫TypeType，所有类型本身的类型就是TypeType</p>
<hr>
<h2 id="错误错误处理"><a href="#错误错误处理" class="headerlink" title="错误错误处理"></a>错误错误处理</h2><p>从输出可以看到，当错误发生时，后续语句print ‘result:’, r不会被执行，except由于捕获到ZeroDivisionError，因此被执行。最后，finally语句被执行。然后，程序继续按照流程往下走。</p>
<p>由于没有错误发生，所以except语句块不会被执行，但是finally如果有，则一定会被执行（可以没有finally语句）。<br>错误应该有很多种类，如果发生了不同类型的错误，应该由不同的except语句块处理。没错，可以有多个except来捕获不同类型的错误：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">try:</div><div class="line">    print &apos;try...&apos;</div><div class="line">    r = 10 / int(&apos;a&apos;)</div><div class="line">    print &apos;result:&apos;, r</div><div class="line">except ValueError, e:</div><div class="line">    print &apos;ValueError:&apos;, e</div><div class="line">except ZeroDivisionError, e:</div><div class="line">    print &apos;ZeroDivisionError:&apos;, e</div><div class="line">finally:</div><div class="line">    print &apos;finally...&apos;</div><div class="line">print &apos;END&apos;</div></pre></td></tr></table></figure></p>
<p>Python所有的错误都是从BaseException类派生的，常见的错误类型和继承关系看这里：</p>
<p><a href="https://docs.python.org/2/library/exceptions.html#exception-hierarchy" target="_blank" rel="noopener">https://docs.python.org/2/library/exceptions.html#exception-hierarchy</a></p>
<p>使用try…except捕获错误还有一个巨大的好处，就是可以跨越多层调用，比如函数main()调用foo()，foo()调用bar()，结果bar()出错了，这时，只要main()捕获到了，就可以处理</p>
<p>如果不捕获错误，自然可以让Python解释器来打印出错误堆栈，但程序也被结束了。既然我们能捕获错误，就可以把错误堆栈打印出来，然后分析错误原因，同时，让程序继续执行下去</p>
<p>如果要抛出错误，首先根据需要，可以定义一个错误的class，选择好继承关系，然后，用raise语句抛出一个错误的实例</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># err.py</div><div class="line">class FooError(StandardError):</div><div class="line">    pass</div><div class="line"></div><div class="line">def foo(s):</div><div class="line">    n = int(s)</div><div class="line">    if n==0:</div><div class="line">        raise FooError(&apos;invalid value: %s&apos; % s)</div><div class="line">    return 10 / n</div></pre></td></tr></table></figure>
</p>
<p>assert的意思是，表达式n != 0应该是True，否则，后面的代码就会出错。</p>
<p>如果断言失败，assert语句本身就会抛出AssertionError：</p>
<p>在Thread和Process中，应当优选Process，因为Process更稳定，而且，Process可以分布到多台机器上，而Thread最多只能分布到同一台机器的多个CPU上。</p>
<p>Python的multiprocessing模块不但支持多进程，其中managers子模块还支持把多进程分布到多台机器上。一个服务进程可以作为调度者，将任务分布到其他多个进程中，依靠网络通信。由于managers模块封装很好，不必了解网络通信的细节，就可以很容易地编写分布式多进程程序 </p>
<hr>
<p>IP协议负责把数据从一台计算机通过网络发送到另一台计算机。数据被分割成一小块一小块，然后通过IP包发送出去。由于互联网链路复杂，两台计算机之间经常有多条线路，因此，路由器就负责决定如何把一个IP包转发出去。IP包的特点是按块发送，途径多个路由，但不保证能到达，也不保证顺序到达。</p>
<p>TCP协议则是建立在IP协议之上的。TCP协议负责在两台计算机之间建立可靠连接，保证数据包按顺序到达。TCP协议会通过握手建立连接，然后，对每个IP包编号，确保对方按顺序收到，如果包丢掉了，就自动重发。</p>
<p>许多常用的更高级的协议都是建立在TCP协议基础上的，比如用于浏览器的HTTP协议、发送邮件的SMTP协议等。</p>
<p>一个IP包除了包含要传输的数据外，还包含源IP地址和目标IP地址，源端口和目标端口。</p>
<p>端口有什么作用？在两台计算机通信时，只发IP地址是不够的，因为同一台计算机上跑着多个网络程序。一个IP包来了之后，到底是交给浏览器还是QQ，就需要端口号来区分。每个网络程序都向操作系统申请唯一的端口号，这样，两个进程在两台计算机之间建立网络连接就需要各自的IP地址和各自的端口号。</p>
<p>一个进程也可能同时与多个计算机建立链接，因此它会申请很多端口。</p>
<p>通常我们用一个Socket表示“打开了一个网络链接”，而打开一个Socket需要知道目标计算机的IP地址和端口号，再指定协议类型即可。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Upgrade/Impala_swapp.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Upgrade/Impala_swapp.html" itemprop="url">Impala_swapp</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Upgrade/" itemprop="url" rel="index">
                    <span itemprop="name">Upgrade</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Impala-swapp"><a href="#Impala-swapp" class="headerlink" title="Impala_swapp"></a>Impala_swapp</h1><p>部分组件HDFS,YARN,HBAS有黄色警告是因为系统默认SWAP默认值为60，导致内存未使用满便使用swap memory导致的，已经修改过配对应系统的配置值为SWAP=0。<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">echo 0 &gt;/proc/sys/vm/swappiness</div><div class="line">echo &apos;vm.swappiness=0&apos;&gt;&gt; /etc/sysctl.conf</div><div class="line">cat /proc/sys/vm/swappiness</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/备份数据库.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/备份数据库.html" itemprop="url">备份数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h1><blockquote>
<p><strong>v1.0</strong> updated:2017-04-01 Nameless13<br><a href="https://www.cloudera.com/documentation/enterprise/latest/topics/cm_ag_backup_dbs.html" target="_blank" rel="noopener">原文</a></p>
</blockquote>
<ul>
<li>Cloudera Manager - 包含有关服务的配置及其角色分配的所有信息,所有配置历史，命令，用户和正在运行的进程,这是一个相对较小的数据库(&lt;100MB)是但却是最重要的备份</li>
</ul>
<p><strong>重要:</strong>重新启动进程时，将使用保存在Cloudera Manager数据库中的信息重新部署每个服务的配置,如果此信息不可用，您的群集不会启动或正常运行。您必须安排并维护Cloudera Manager数据库的常规备份，以在发生数据库丢失时恢复集群</p>
<ul>
<li>Oozie服务器 - 包含Oozie workflow, coordinator, and bundle data. </li>
<li>Sqoop Server - Contains entities such as the connector, driver, links and jobs. Relatively small.</li>
<li>Activity Monitor - Contains information about past activities. In large clusters, this database can grow large. Configuring an Activity Monitor database is only necessary if a MapReduce service is deployed.</li>
<li>Reports Manager - Tracks disk utilization and processing activities over time. Medium-sized.</li>
<li>Hive Metastore Server - Contains Hive metadata. Relatively small.</li>
<li>Hue Server - Contains user account information, job submissions, and Hive queries. Relatively small.</li>
<li>Sentry Server - Contains authorization metadata. Relatively small.</li>
<li>Cloudera Navigator Audit Server - Contains auditing information. In large clusters, this database can grow large.</li>
<li>Cloudera Navigator Metadata Server - Contains authorization, policies, and audit report metadata. Relatively small.</li>
</ul>
<h2 id="备份前准备"><a href="#备份前准备" class="headerlink" title="备份前准备"></a>备份前准备</h2><ol>
<li>登录到安装Cloudera Manager Server的主机</li>
<li>获取Cloudera Manager数据库的名称，用户和密码属性 <code>cat /etc/cloudera-scm-server/db.properties</code><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">com.cloudera.cmf.db.name=scm</div><div class="line">com.cloudera.cmf.db.user=scm</div><div class="line">com.cloudera.cmf.db.password=NnYfWIjlbk</div></pre></td></tr></table></figure>
</p>
</li>
</ol>
<h2 id="备份MySQL数据库"><a href="#备份MySQL数据库" class="headerlink" title="备份MySQL数据库"></a>备份MySQL数据库</h2><p>在要备份的MySQL主机上执行<code>mysqldump</code>命令:<br><code>$ mysqldump -hhostname -uusername -ppassword database &gt; /tmp/database-backup.sql</code><br>本机例子:<br><code>$ mysqldump -pamon_password amon &gt; /tmp/amon-backup.sql</code><br>远程例子<br><code>$ mysqldump -hmyhost.example.com -uroot -pcloudera amon &gt; /tmp/amon-backup.sql</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/快速启动CDH-VM管理信息.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/快速启动CDH-VM管理信息.html" itemprop="url">快速启动CDH-VM管理信息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="快速启动VM管理信息"><a href="#快速启动VM管理信息" class="headerlink" title="快速启动VM管理信息"></a>快速启动VM管理信息</h1><p>在大多数情况下，除了管理已安装的产品和服务之外，QuickStart VM不需要管理。如果需要其他管理或出现问题，本主题提供有关帐户的信息，以及一些常见问题的可能解释和解决方案。<br><a href="http://s3.amazonaws.com/trainingvms/Cloudera-Training-Get2EC2-VM-1.2-vmware.zip" target="_blank" rel="noopener">Cloudera-Training-Get2EC2-VM-1.2-vmware</a></p>
<h2 id="帐户"><a href="#帐户" class="headerlink" title="帐户"></a>帐户</h2><p>一旦启动VM，您将自动登录 cloudera 用户：<br>用户名： cloudera<br>密码： cloudera<br>cloudera 帐户有VM中sudo的权限,密码是cloudera。<br>MySQL root密码（和其他MySQL用户帐户的密码）也是cloudera。<br>Hue和Cloudera Manager使用相同的凭据。</p>
<h2 id="快速启动VMware映像"><a href="#快速启动VMware映像" class="headerlink" title="快速启动VMware映像"></a>快速启动VMware映像</h2><p>要启动VMware映像，您需要适用于Windows和Linux的VMware Player或适用于Mac的VMware Fusion。</p>
<p><strong>注意： VMware Fusion仅在英特尔架构上工作，因此具有PowerPC处理器的旧版Mac无法运行QuickStart VM。</strong></p>
<h2 id="快速启动VirtualBox图像"><a href="#快速启动VirtualBox图像" class="headerlink" title="快速启动VirtualBox图像"></a>快速启动VirtualBox图像</h2><p>有些用户报告了在VirtualBox中运行CentOS 6.4的问题。如果在VirtualBox VM启动时发生内核崩溃，您可以尝试解决此问题，方法是打开设置 &gt; 系统 &gt; 主板选项卡，然后为芯片集选择 ICH9而不是PIIX3。如果尚未这样做，还必须在同一选项卡上启用I / O APIC。</p>
<h2 id="快速启动KVM映像"><a href="#快速启动KVM映像" class="headerlink" title="快速启动KVM映像"></a>快速启动KVM映像</h2><p>KVM映像提供了可由许多管理程序使用的原始磁盘映像。使用足够的RAM配置使用此映像的计算机。有关VM大小要求，请参阅Cloudera QuickStart VM。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/python/readme.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/python/readme.html" itemprop="url">readme</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python 标识符<br>在python里，标识符有字母、数字、下划线组成。<br>在python中，所有标识符可以包括英文、数字以及下划线（_），但不能以数字开头。<br>python中的标识符是区分大小写的。<br>以下划线开头的标识符是有特殊意义的。以单下划线开头（_foo）的代表不能直接访问的类属性，需通过类提供的接口进行访问，不能用”from xxx import *”而导入；<br>以双下划线开头的（<strong>foo）代表类的私有成员；以双下划线开头和结尾的（</strong>foo<strong>）代表python里特殊方法专用的标识，如</strong>init__（）代表类的构造函数。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/OpenLDAP/slapd配置文件.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/OpenLDAP/slapd配置文件.html" itemprop="url">slapd配置文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/OpenLDAP/" itemprop="url" rel="index">
                    <span itemprop="name">OpenLDAP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#</div><div class="line"># See slapd.conf(5) for details on configuration options.</div><div class="line"># This file should NOT be world readable.</div><div class="line">#</div><div class="line"></div><div class="line">include		/etc/openldap/schema/corba.schema</div><div class="line">include		/etc/openldap/schema/core.schema</div><div class="line">include		/etc/openldap/schema/cosine.schema</div><div class="line">include		/etc/openldap/schema/duaconf.schema</div><div class="line">include		/etc/openldap/schema/dyngroup.schema</div><div class="line">include		/etc/openldap/schema/inetorgperson.schema</div><div class="line">include		/etc/openldap/schema/java.schema</div><div class="line">include		/etc/openldap/schema/misc.schema</div><div class="line">include		/etc/openldap/schema/nis.schema</div><div class="line">include		/etc/openldap/schema/openldap.schema</div><div class="line">include		/etc/openldap/schema/ppolicy.schema</div><div class="line">include		/etc/openldap/schema/collective.schema</div><div class="line"></div><div class="line"># Allow LDAPv2 client connections.  This is NOT the default.</div><div class="line">allow bind_v2</div><div class="line"></div><div class="line"># Do not enable referrals until AFTER you have a working directory</div><div class="line"># service AND an understanding of referrals.</div><div class="line">#referral	ldap://root.openldap.org</div><div class="line"></div><div class="line">pidfile		/var/run/openldap/slapd.pid</div><div class="line">argsfile	/var/run/openldap/slapd.args</div><div class="line"></div><div class="line"># Load dynamic backend modules</div><div class="line"># - modulepath is architecture dependent value (32/64-bit system)</div><div class="line"># - back_sql.la overlay requires openldap-server-sql package</div><div class="line"># - dyngroup.la and dynlist.la cannot be used at the same time</div><div class="line"></div><div class="line"># modulepath /usr/lib/openldap</div><div class="line"># modulepath /usr/lib64/openldap</div><div class="line"></div><div class="line"># moduleload accesslog.la</div><div class="line"># moduleload auditlog.la</div><div class="line"># moduleload back_sql.la</div><div class="line"># moduleload chain.la</div><div class="line"># moduleload collect.la</div><div class="line"># moduleload constraint.la</div><div class="line"># moduleload dds.la</div><div class="line"># moduleload deref.la</div><div class="line"># moduleload dyngroup.la</div><div class="line"># moduleload dynlist.la</div><div class="line"># moduleload memberof.la</div><div class="line"># moduleload pbind.la</div><div class="line"># moduleload pcache.la</div><div class="line"># moduleload ppolicy.la</div><div class="line"># moduleload refint.la</div><div class="line"># moduleload retcode.la</div><div class="line"># moduleload rwm.la</div><div class="line"># moduleload seqmod.la</div><div class="line"># moduleload smbk5pwd.la</div><div class="line"># moduleload sssvlv.la</div><div class="line"># moduleload syncprov.la</div><div class="line"># moduleload translucent.la</div><div class="line"># moduleload unique.la</div><div class="line"># moduleload valsort.la</div><div class="line"></div><div class="line"># The next three lines allow use of TLS for encrypting connections using a</div><div class="line"># dummy test certificate which you can generate by running</div><div class="line"># /usr/libexec/openldap/generate-server-cert.sh. Your client software may balk</div><div class="line"># at self-signed certificates, however.</div><div class="line">TLSCACertificatePath /etc/openldap/certs</div><div class="line">TLSCertificateFile &quot;\&quot;OpenLDAP Server\&quot;&quot;</div><div class="line">TLSCertificateKeyFile /etc/openldap/certs/password</div><div class="line"></div><div class="line"># Sample security restrictions</div><div class="line">#	Require integrity protection (prevent hijacking)</div><div class="line">#	Require 112-bit (3DES or better) encryption for updates</div><div class="line">#	Require 63-bit encryption for simple bind</div><div class="line"># security ssf=1 update_ssf=112 simple_bind=64</div><div class="line"></div><div class="line"># Sample access control policy:</div><div class="line">#	Root DSE: allow anyone to read it</div><div class="line">#	Subschema (sub)entry DSE: allow anyone to read it</div><div class="line">#	Other DSEs:</div><div class="line">#		Allow self write access</div><div class="line">#		Allow authenticated users read access</div><div class="line">#		Allow anonymous users to authenticate</div><div class="line">#	Directives needed to implement policy:</div><div class="line"># access to dn.base=&quot;&quot; by * read</div><div class="line"># access to dn.base=&quot;cn=Subschema&quot; by * read</div><div class="line"># access to *</div><div class="line">#	by self write</div><div class="line">#	by users read</div><div class="line">#	by anonymous auth</div><div class="line">#</div><div class="line"># if no access controls are present, the default policy</div><div class="line"># allows anyone and everyone to read anything but restricts</div><div class="line"># updates to rootdn.  (e.g., &quot;access to * by * read&quot;)</div><div class="line">#</div><div class="line"># rootdn can always read and write EVERYTHING!</div><div class="line"></div><div class="line"># enable on-the-fly configuration (cn=config)</div><div class="line">database config</div><div class="line">access to *</div><div class="line">	by dn.exact=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; manage</div><div class="line">	by * none</div><div class="line"></div><div class="line"># enable server status monitoring (cn=monitor)</div><div class="line">database monitor</div><div class="line">access to *</div><div class="line">	by dn.exact=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot; read</div><div class="line">        by dn.exact=&quot;cn=Manager,dc=my-domain,dc=com&quot; read</div><div class="line">        by * none</div><div class="line"></div><div class="line">#######################################################################</div><div class="line"># database definitions</div><div class="line">#######################################################################</div><div class="line"></div><div class="line">database	bdb</div><div class="line">suffix		&quot;dc=my-domain,dc=com&quot;</div><div class="line">checkpoint	1024 15</div><div class="line">rootdn		&quot;cn=Manager,dc=my-domain,dc=com&quot;</div><div class="line"># Cleartext passwords, especially for the rootdn, should</div><div class="line"># be avoided.  See slappasswd(8) and slapd.conf(5) for details.</div><div class="line"># Use of strong authentication encouraged.</div><div class="line"># rootpw		secret</div><div class="line"># rootpw		&#123;crypt&#125;ijFYNcSNctBYg</div><div class="line"></div><div class="line"># The database directory MUST exist prior to running slapd AND </div><div class="line"># should only be accessible by the slapd and slap tools.</div><div class="line"># Mode 700 recommended.</div><div class="line">directory	/var/lib/ldap</div><div class="line"></div><div class="line"># Indices to maintain for this database</div><div class="line">index objectClass                       eq,pres</div><div class="line">index ou,cn,mail,surname,givenname      eq,pres,sub</div><div class="line">index uidNumber,gidNumber,loginShell    eq,pres</div><div class="line">index uid,memberUid                     eq,pres,sub</div><div class="line">index nisMapName,nisMapEntry            eq,pres,sub</div><div class="line"></div><div class="line"># Replicas of this database</div><div class="line">#replogfile /var/lib/ldap/openldap-master-replog</div><div class="line">#replica host=ldap-1.example.com:389 starttls=critical</div><div class="line">#     bindmethod=sasl saslmech=GSSAPI</div><div class="line">#     authcId=host/ldap-master.example.com@EXAMPLE.COM</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/shell/shell编程.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/shell/shell编程.html" itemprop="url">shell编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/shell/" itemprop="url" rel="index">
                    <span itemprop="name">shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在shell编程中，”EOF“通常与”&lt;&lt;“结合使用，“&lt;&lt;EOF“表示后续的输入作为子命令或子shell的输入，直到遇到”EOF“，再次返回到主调shell，可将其理解为分界符（delimiter）。既然是分界符，那么形式自然不是固定的，这里可以将”EOF“可以进行自定义，但是前后的”EOF“必须成对出现且不能和shell命令冲突。其使用形式如下：</p>
<pre><code>交互式程序(命令)&lt;&lt;EOF
command1
command2
...
EOF


</code></pre><p>  ”EOF“中间的内容将以标准输入的形式输入到”交互式程序“，当shell看到”&lt;&lt;“知道其后面输入的分界符，当shell再次看到分界符时，两个分界符中间的部分将作为标准输入。<br>       “EOF”一般常和cat命令连用。<br>注意，最后的”EOF“必须单独占一行。</p>
<p>下面以cat命令为例讲解”EOF“使用。一般有以下两种形式<br>1.cat&lt;&lt;EOF
2.cat&lt;&lt;EOF&gt;filename或者cat&lt;&lt;EOF&gt;&gt;filename(cat&lt;&lt;EOF&gt;filename或者cat&lt;&lt;EOF&gt;&gt;filename )<br>其实，第一种形式和第二种形式没有什么本质的区别，第一种形式将内容直接输出到标准输出（屏幕），而第二种形式将标准输出进行重定向，将本应输出到屏幕的内容重定向到文件而已。</p>
<p>例1：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#cat&lt;&lt;EOF</div><div class="line">&gt;12</div><div class="line">&gt;34D</div><div class="line">&gt;EOF</div><div class="line">12</div><div class="line">34D</div></pre></td></tr></table></figure></p>
<p>例2：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#cat&gt;&gt;filename&lt;&lt;EOF</div><div class="line">&gt;DHA</div><div class="line">&gt;23</div><div class="line">&gt;EOF</div><div class="line">#cat filename</div><div class="line">DHA</div><div class="line">23</div></pre></td></tr></table></figure></p>
<p>$# 表示提供到shell脚本或者函数的参数总数。<br>$0 表示第一个参数。</p>
<pre><code>整数比较
-eq     等于,如:if [&quot;$a&quot; -eq &quot;$b&quot; ]
-ne     不等于,如:if [&quot;$a&quot; -ne &quot;$b&quot; ]
-gt     大于,如:if [&quot;$a&quot; -gt &quot;$b&quot; ]
-ge    大于等于,如:if [&quot;$a&quot; -ge &quot;$b&quot; ]
-lt      小于,如:if [&quot;$a&quot; -lt &quot;$b&quot; ]
-le      小于等于,如:if [&quot;$a&quot; -le &quot;$b&quot; ]
&lt;  小于(需要双括号),如:((&quot;$a&quot; &lt; &quot;$b&quot;))
&lt;=  小于等于(需要双括号),如:((&quot;$a&quot; &lt;= &quot;$b&quot;))
&gt;  大于(需要双括号),如:((&quot;$a&quot; &gt; &quot;$b&quot;))
&gt;=  大于等于(需要双括号),如:((&quot;$a&quot; &gt;= &quot;$b&quot;))




</code></pre><h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><p>在命令中调用a w k时,a w k脚本由各种操作和模式组成。<br>如果设置了 - F选项,则 a w k每次读一条记录或一行,并使用指定的分隔符分隔指定域,但<br>如果未设置- F选项,a w k假定空格为域分隔符,并保持这个设置直到发现一新行。当新行出现<br>时,a w k命令获悉已读完整条记录,然后在下一个记录启动读命令,这个读进程将持续到文件<br>尾或文件不再存在。</p>
<p>在碰到 a w k错误时,可相应查找:<br>• 确保整个a w k命令用单引号括起来。<br>• 确保命令内所有引号成对出现。<br>• 确保用花括号括起动作语句,用圆括号括起条件语句。<br>• 可能忘记使用花括号,也许你认为没有必要,但 a w k不这样认为,将按之解释语法。<br>如果查询文件不存在,将得到下述错误信息:</p>
<p>s e d脚本文件 [选项] 输入文件<br>不管是使用 s h e l l命令行方式或脚本文件方式,如果没有指定输入文件, s e d从标准输入中<br>接受输入,一般是键盘或重定向结果。<br>s e d选项如下:<br>n 不打印;s e d不写编辑行到标准输出,缺省为打印所有行(编辑和未编辑)。p命令可以<br>用来打印编辑行。<br>c 下一命令是编辑命令。使用多项编辑时加入此选项。如果只用到一条 s e d命令,<br>此选项无用,但指定它也没有关系。<br>f 如果正在调用 s e d脚本文件,使用此选项。此选项通知 s e d一个脚本文件支持所有的 s e d<br>命令,例如:sed -f myscript.sed input_file,这里m y s c r i p t . s e d即为支持s e d命令的文件。</p>
<p>&lt;EOT&gt; 就是CTRL+D</p>
<p>如果使用 { }来代替(),那么相应的命令将在子 s h e l l而不是当前 s h e l l中作为一个整体被执<br>行,只有在 { }中所有命令的输出作为一个整体被重定向时,其中的命令才被放到子 s h e l l中执<br>行,否则在当前 s h e l l执行。</p>
<h3 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h3><p>注意^符号的使用,当直接用在第一个括号里,意指否定或不匹配括号里内容<br>[ ^a-z A-Z] 匹配任一非字母型字符<br>[ ^ 0 - 9 ]     匹配任一非数字型字符</p>
<p>如果要抽出记录,使其行首不是 4 8,可以在方括号中使用 ^记号,表明查询在行首开始<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[root@CentOS3 devops]# grep &apos;^[^48]&apos; data.f </div><div class="line">219     dec     2CC1999 CAD     23.00   PLV2C   68</div><div class="line">216     sept    3ZL1998 USP     86.00   KVM9E   234</div></pre></td></tr></table></figure></p>
<p>awk 有许多内置变量用来设置环境信息<br>A R G C                     命令行参数个数<br>A R G V                     命令行参数排列<br>E N V I R O N          支持队列中系统环境变量的使用<br>FILENAME               a w k浏览的文件名<br>F N R                         浏览文件的记录数<br>F S                             设置输入域分隔符,等价于命令行 - F选项<br>NF                              浏览记录的域个数<br>N R                             已读的记录数<br>O F S                          输出域分隔符<br>O R S                          输出记录分隔符<br>R S                              控制记录分隔符</p>
<p>s e d选项如下:<br>n 不打印;s e d不写编辑行到标准输出,缺省为打印所有行(编辑和未编辑)。p命令可以<br>用来打印编辑行。<br>c 下一命令是编辑命令。使用多项编辑时加入此选项。如果只用到一条 s e d命令,<br>此选项无用,但指定它也没有关系。<br>f 如果正在调用 s e d脚本文件,使用此选项。此选项通知 s e d一个脚本文件支持所有的 s e d<br>命令,例如:sed -f myscript.sed input_file,这里m y s c r i p t . s e d即为支持s e d命令的文件。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Sentry/hive Sentry 权限配置.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Sentry/hive Sentry 权限配置.html" itemprop="url">hive Sentry 权限配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-24T00:00:00+08:00">
                2017-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Sentry/" itemprop="url" rel="index">
                    <span itemprop="name">Sentry</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="hive-Sentry用户授权配置"><a href="#hive-Sentry用户授权配置" class="headerlink" title="hive Sentry用户授权配置"></a>hive Sentry用户授权配置</h1><p><a href="www.cloudera.com/documentation/enterprise/latest/topics/sg_hive_sql.html#concept_c2q_4qx_p4__section_t5x_pg4_rp">Hive SQL Syntax for Use with Sentry</a></p>
<h2 id="为Hive用户添加全局的权限。"><a href="#为Hive用户添加全局的权限。" class="headerlink" title="为Hive用户添加全局的权限。"></a>为Hive用户添加全局的权限。</h2><p>目前的管理员为Hive，用户授权的操作都需要由Hive完成。这里使用Hive用户的Kerberos账户进入Beeline<br>为hive用户获取principal </p>
<p><code>kinit -kt hive.keytab  hive</code></p>
<p>列出了当前缓存中保存的Kerberos主体和Kerberos principal</p>
<p><code>klist</code></p>
<p>由于我们使用的是sentry基于数据库的存储方式,我们直接建在了hive的元数据库中</p>
<p><code>beeline -u &#39;jdbc:hive2://xx.xxx.xx.xx:xxxx/rptdata;principal=hive/xxxx@XXXX&#39;</code></p>
<p>在beeline中，添加管理员角色，然后将Sentry服务器上的所有权限付给hive用户，然后将admin的角色赋给hive组，让hive组能够自由的建立数据库。</p>
<h3 id="创建角色声明"><a href="#创建角色声明" class="headerlink" title="创建角色声明"></a>创建角色声明</h3><p>语句创建一个可以授予权限的角色。权限可以授予角色，然后可以将其分配给用户。已分配角色的用户只能行使该角色的权限。<br>只有具有管理权限的用户才能创建/删除角色。默认情况下hive, impala 和 hue用户在Sentry中拥有管理员权限。(然而并没有)</p>
<p><code>CREATE ROLE [role_name];</code></p>
<h3 id="删除角色声明"><a href="#删除角色声明" class="headerlink" title="删除角色声明"></a>删除角色声明</h3><p>一旦删除，该角色将被撤销给以前分配给它的所有用户。已经执行的查询不会受到影响。但是，由于Hive在执行每个查询之前检查用户权限，因此角色已启用的活动用户会话将受到影响。</p>
<p><code>DROP ROLE [role_name];</code></p>
<h3 id="授权角色声明"><a href="#授权角色声明" class="headerlink" title="授权角色声明"></a>授权角色声明</h3><p>只有Sentry管理员用户可以将角色授予组。</p>
<p><code>GRANT ROLE role_name [, role_name] TO GROUP &lt;groupName&gt; [,GROUP &lt;groupName&gt;]</code></p>
<h3 id="撤销角色声明"><a href="#撤销角色声明" class="headerlink" title="撤销角色声明"></a>撤销角色声明</h3><p>可用于从组中撤销角色。只有Sentry管理员用户可以从组中撤销该角色。</p>
<p><code>REVOKE ROLE role_name [, role_name] FROM GROUP &lt;groupName&gt; [,GROUP &lt;groupName&gt;]</code></p>
<h3 id="赋予角色权限声明"><a href="#赋予角色权限声明" class="headerlink" title="赋予角色权限声明"></a>赋予角色权限声明</h3><p>用户必须是Sentry admin用户。</p>
<p><code>GRANT &lt;PRIVILEGE&gt; [, &lt;PRIVILEGE&gt; ] ON &lt;OBJECT&gt; &lt;object_name&gt; TO ROLE &lt;roleName&gt; [,ROLE &lt;roleName&gt;]</code></p>
<h3 id="赋予角色外部表权限"><a href="#赋予角色外部表权限" class="headerlink" title="赋予角色外部表权限"></a>赋予角色外部表权限</h3><p><code>GRANT ALL ON URI &#39;hdfs://namenode:XXX/path/to/table&#39;</code></p>
<p><code>grant all on URI &#39;hdfs://nameservice1/user/thadoop/ods&#39; to role thadoop</code></p>
<h3 id="撤销角色权限"><a href="#撤销角色权限" class="headerlink" title="撤销角色权限"></a>撤销角色权限</h3><p>只有Sentry管理员用户可以从组中撤销权限</p>
<p><code>REVOKE &lt;PRIVILEGE&gt; [, &lt;PRIVILEGE&gt; ] ON &lt;OBJECT&gt; &lt;object_name&gt; FROM ROLE &lt;roleName&gt; [,ROLE &lt;roleName&gt;]</code></p>
<h3 id="指定角色声明"><a href="#指定角色声明" class="headerlink" title="指定角色声明"></a>指定角色声明</h3><p>用于指定当前会话启用的角色。用户只能启用已授予他们的角色。任何未列出，尚未启用的角色均将禁用当前会话。如果没有指定启用任何角色，用户将具有由他所属的所有角色授予的权限。</p>
<ul>
<li>启用特定角色</li>
</ul>
<p><code>SET ROLE &lt;roleName&gt;;</code></p>
<ul>
<li>启用所有角色：</li>
</ul>
<p><code>SET ROLE ALL;</code></p>
<ul>
<li>未启用角色：</li>
</ul>
<p><code>SET ROLE NONE;</code></p>
<h3 id="show声明"><a href="#show声明" class="headerlink" title="show声明"></a>show声明</h3><ul>
<li>列出当前用户具有数据库，表或列级访问的数据库：</li>
</ul>
<p><code>SHOW DATABASES;</code></p>
<ul>
<li>列出当前用户具有表或列级访问权限的表：</li>
</ul>
<p><code>SHOW TABLES;</code></p>
<ul>
<li>列出当前用户拥有的列的访问：</li>
</ul>
<p><code>SHOW COLUMNS;</code></p>
<ul>
<li>列出系统中的所有角色（仅适用于哨兵管理员用户）：</li>
</ul>
<p><code>SHOW ROLES;</code></p>
<ul>
<li>列出当前用户会话有效的所有角色：</li>
</ul>
<p><code>SHOW CURRENT ROLES;</code></p>
<ul>
<li>列出分配给给定的所有角色 &lt;groupName&gt; （仅允许Sentry管理员用户和属于指定的组的其他用户 &lt;groupName&gt;）：</li>
</ul>
<p><code>SHOW ROLE GRANT GROUP &lt;groupName&gt;;</code></p>
<ul>
<li>SHOW语句也可以用于列出授予角色的特权或给予特定对象的角色的所有特权</li>
</ul>
<p><code>SHOW GRANT ROLE &lt;roleName&gt;;</code></p>
<ul>
<li>列出给定的角色的所有授权</li>
</ul>
<p><code>SHOW GRANT ROLE &lt;roleName&gt; on OBJECT &lt;objectName&gt;;</code></p>
<h2 id="操作样例"><a href="#操作样例" class="headerlink" title="操作样例:"></a>操作样例:</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt; create role test_role;</div><div class="line">&gt; grant all on server hive to role test_role;</div><div class="line">&gt; show roles;</div><div class="line">+---------------+--+</div><div class="line">|     role      |</div><div class="line">+---------------+--+</div><div class="line">| test_role     |</div><div class="line">| thadoop       |</div><div class="line">| admin_role    |</div><div class="line">| thadoop_role  |</div><div class="line">+---------------+--+</div><div class="line">4 rows selected (0.179 seconds)</div><div class="line">&gt; show grant role test_role;</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| database  | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| *         |        |            |         | test_role       | ROLE            | *          | false         | 1493690779745000  | --       |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">1 row selected (0.146 seconds)</div><div class="line">&gt; show grant role admin_role;</div><div class="line"></div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| database  | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| *         |        |            |         | admin_role      | ROLE            | *          | false         | 1490532327514000  | --       |</div><div class="line">+-----------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">1 row selected (0.167 seconds)</div><div class="line"></div><div class="line">&gt; drop role test_role;</div><div class="line">&gt; show roles;</div><div class="line">+---------------+--+</div><div class="line">|     role      |</div><div class="line">+---------------+--+</div><div class="line">| thadoop       |</div><div class="line">| admin_role    |</div><div class="line">| thadoop_role  |</div><div class="line">+---------------+--+</div><div class="line">&gt; grant select on database rpt to role thadoop;</div><div class="line">&gt; grant insert on database rpt to role thadoop;</div><div class="line">&gt; grant all on database rptdata to role thadoop;</div><div class="line"></div><div class="line">#对于建表权限 必须先把要要建的表的权限赋给相应的role</div><div class="line">&gt; grant all on database ods to role thadoop;</div><div class="line">&gt; show grant role thadoop;</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">|               database                |               table               | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| hdfs://nameservice1/user/thadoop/ods  |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493369887314000  | --       |</div><div class="line">| ods                                   | pub_50118_visit_log_voms_tour_ex  |            |         | thadoop         | ROLE            | select     | false         | 1492593741232000  | --       |</div><div class="line">| rptdata                               |                                   |            |         | thadoop         | ROLE            | *          | false         | 1492619387707000  | --       |</div><div class="line">| rpt                                   |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493023378368000  | --       |</div><div class="line">| ods                                   |                                   |            |         | thadoop         | ROLE            | *          | false         | 1493369642620000  | --       |</div><div class="line">+---------------------------------------+-----------------------------------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">5 rows selected (0.159 seconds)</div><div class="line">&gt; use ods;</div><div class="line">&gt; revoke select on table pub_50118_visit_log_voms_tour_ex from role thadoop;</div><div class="line">&gt; show grant role thadoop;</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">|               database                | table  | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |    grant_time     | grantor  |</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">| ods                                   |        |            |         | thadoop         | ROLE            | *          | false         | 1493369642620000  | --       |</div><div class="line">| hdfs://nameservice1/user/thadoop/ods  |        |            |         | thadoop         | ROLE            | *          | false         | 1493369887314000  | --       |</div><div class="line">| rptdata                               |        |            |         | thadoop         | ROLE            | *          | false         | 1492619387707000  | --       |</div><div class="line">| rpt                                   |        |            |         | thadoop         | ROLE            | *          | false         | 1493023378368000  | --       |</div><div class="line">+---------------------------------------+--------+------------+---------+-----------------+-----------------+------------+---------------+-------------------+----------+--+</div><div class="line">4 rows selected (0.142 seconds)</div></pre></td></tr></table></figure>
</p>
<h4 id="此外发现hive开启sentry后-hue中对应的用户也得是sentry最终授权的用户-否则将无法访问元数据"><a href="#此外发现hive开启sentry后-hue中对应的用户也得是sentry最终授权的用户-否则将无法访问元数据" class="headerlink" title="此外发现hive开启sentry后 hue中对应的用户也得是sentry最终授权的用户,否则将无法访问元数据"></a>此外发现hive开启sentry后 hue中对应的用户也得是sentry最终授权的用户,否则将无法访问元数据</h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Nameless13" />
          <p class="site-author-name" itemprop="name">Nameless13</p>
           
              <p class="site-description motion-element" itemprop="description">90后，桶装水保洁工程狮，ಥ_ಥ</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">164</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        

      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nameless13</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
