<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:type" content="website">
<meta property="og:title" content="Nameless13">
<meta property="og:url" content="https://nameless13.github.io/page/8/index.html">
<meta property="og:site_name" content="Nameless13">
<meta property="og:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nameless13">
<meta name="twitter:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'J3OX6892F7',
      apiKey: '38852eb9095216f8f2ada575a06a9cfc',
      indexName: 'Blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://nameless13.github.io/page/8/"/>





  <title>Nameless13</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Nameless13</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Error/[Hive]hive zk 锁分区.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Error/[Hive]hive zk 锁分区.html" itemprop="url">hive zk 锁分区</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-30T00:00:00+08:00">
                2017-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Error/" itemprop="url" rel="index">
                    <span itemprop="name">Error</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="错误日志"><a href="#错误日志" class="headerlink" title="错误日志:"></a>错误日志:</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Got user-level KeeperException when processing sessionid:0x15bfba733be2c2b type:create cxid:0x8621e1c zxid:0x170a4b8e0d txntype:-1 reqpath:n/a Error Path:/hive_zookeeper_namespace_hive/rptdata/fact_kesheng_sdk_new_device_hourly/src_file_day=20170414/src_file_hour=07 Error:KeeperErrorCode = NodeExists for /hive_zookeeper_namespace_hive/rptdata/fact_kesheng_sdk_new_device_hourly/src_file_day=20170414/src_file_hour=07</div></pre></td></tr></table></figure>
</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">2013-11-04 23:52:40,485 ERROR ZooKeeperHiveLockManager (ZooKeeperHiveLockManager.java:unlockPrimitive(447)) - Failed to release ZooKeeper lock:</div><div class="line">org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /hive_zookeeper_namespace/&lt;hiveDBName&gt;/&lt;Table&gt;/&lt;PARTITION&gt;/LOCK-SHARED-0000000000</div></pre></td></tr></table></figure>
</p>
<h3 id="在ZK中可以看到对应的分区锁住了"><a href="#在ZK中可以看到对应的分区锁住了" class="headerlink" title="在ZK中可以看到对应的分区锁住了"></a>在ZK中可以看到对应的分区锁住了</h3><p><code>/hive_zookeeper_namespace_hive/&lt;hiveDBName&gt;/&lt;Table&gt;/LOCK-SHARED-</code></p>
<h3 id="在beeline中查看被锁的表和分区"><a href="#在beeline中查看被锁的表和分区" class="headerlink" title="在beeline中查看被锁的表和分区"></a>在beeline中查看被锁的表和分区</h3><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show locks &lt;hiveDBName&gt;.&lt;Table&gt;</div><div class="line"></div><div class="line">show locks &lt;hiveDBName&gt;.&lt;Table&gt; partition (src_file_day=&apos;20170218&apos; , src_file_our=&apos;17&apos;); </div><div class="line">show locks app.mgba_client_event_detail partition(src_file_day=&apos;20171114&apos;);</div><div class="line">unlock table</div></pre></td></tr></table></figure>
</p>
<p>可以看到<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">| &lt;hiveDBName&gt;@ugc_90103_bossmonthorderlog_test@&lt;PARTITION&gt;/&lt;PARTITION&gt; | SHARED     |</div></pre></td></tr></table></figure></p>
<h2 id="解锁table"><a href="#解锁table" class="headerlink" title="解锁table:"></a>解锁table:</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">unlock table &lt;hiveDBName&gt;.&lt;Table&gt;;</div></pre></td></tr></table></figure>
</p>
<h2 id="或者在beeline中-强行把配置删除对应table-不建议"><a href="#或者在beeline中-强行把配置删除对应table-不建议" class="headerlink" title="或者在beeline中,强行把配置删除对应table(不建议)"></a>或者在beeline中,强行把配置删除对应table(不建议)</h2><p><code>set hive.support.concurrency=false;</code></p>
<p>之后又被锁了一次,详细过程如下:<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show locks quancheng.ugc_secondline_order_v;</div><div class="line"></div><div class="line">+-----------------------------------+---------+--+</div><div class="line">|             tab_name              |  mode   |</div><div class="line">+-----------------------------------+---------+--+</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">+-----------------------------------+---------+--+</div><div class="line">set hive.support.concurrency=false;</div><div class="line">0: jdbc:hive2://10.200.60.106:10000/default&gt; show locks quancheng.ugc_secondline_order_v;</div><div class="line">INFO  : Compiling command(queryId=hive_20170629105454_e0e96d5e-9602-40e5-b100-250ebf6e5bf9): show locks quancheng.ugc_secondline_order_v</div><div class="line">INFO  : Semantic Analysis Completed</div><div class="line">INFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:tab_name, type:string, comment:from deserializer), FieldSchema(name:mode, type:string, comment:from deserializer)], properties:null)</div><div class="line">INFO  : Completed compiling command(queryId=hive_20170629105454_e0e96d5e-9602-40e5-b100-250ebf6e5bf9); Time taken: 0.07 seconds</div><div class="line">INFO  : Concurrency mode is disabled, not creating a lock manager</div><div class="line">INFO  : Executing command(queryId=hive_20170629105454_e0e96d5e-9602-40e5-b100-250ebf6e5bf9): show locks quancheng.ugc_secondline_order_v</div><div class="line">INFO  : Starting task [Stage-0:DDL] in serial mode</div><div class="line">INFO  : Completed executing command(queryId=hive_20170629105454_e0e96d5e-9602-40e5-b100-250ebf6e5bf9); Time taken: 0.034 seconds</div><div class="line">INFO  : OK</div><div class="line">+-----------------------------------+---------+--+</div><div class="line">|             tab_name              |  mode   |</div><div class="line">+-----------------------------------+---------+--+</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">| quancheng@ugc_secondline_order_v  | SHARED  |</div><div class="line">+-----------------------------------+---------+--+</div><div class="line">3 rows selected (0.144 seconds)</div><div class="line">0: jdbc:hive2://10.200.60.106:10000/default&gt; drop quancheng.ugc_secondline_order_v;</div><div class="line">Error: Error while compiling statement: FAILED: ParseException line 1:5 cannot recognize input near &apos;drop&apos; &apos;quancheng&apos; &apos;.&apos; in ddl statement (state=42000,code=40000)</div><div class="line">0: jdbc:hive2://10.200.60.106:10000/default&gt; drop view quancheng.ugc_secondline_order_v;</div><div class="line">INFO  : Compiling command(queryId=hive_20170629105656_e957e27e-ee27-45ba-853e-ac39660ddf7e): drop view quancheng.ugc_secondline_order_v</div><div class="line">INFO  : Semantic Analysis Completed</div><div class="line">INFO  : Returning Hive schema: Schema(fieldSchemas:null, properties:null)</div><div class="line">INFO  : Completed compiling command(queryId=hive_20170629105656_e957e27e-ee27-45ba-853e-ac39660ddf7e); Time taken: 0.168 seconds</div><div class="line">INFO  : Concurrency mode is disabled, not creating a lock manager</div><div class="line">INFO  : Executing command(queryId=hive_20170629105656_e957e27e-ee27-45ba-853e-ac39660ddf7e): drop view quancheng.ugc_secondline_order_v</div><div class="line">INFO  : Starting task [Stage-0:DDL] in serial mode</div><div class="line">INFO  : Completed executing command(queryId=hive_20170629105656_e957e27e-ee27-45ba-853e-ac39660ddf7e); Time taken: 0.061 seconds</div><div class="line">INFO  : OK</div><div class="line">No rows affected (0.238 seconds)</div><div class="line">0: jdbc:hive2://10.200.60.106:10000/default&gt; show tables;</div><div class="line">INFO  : Compiling command(queryId=hive_20170629105656_63fcacb8-ffae-4e00-b810-25317cec8058): show tables</div><div class="line">INFO  : Semantic Analysis Completed</div><div class="line">INFO  : Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:tab_name, type:string, comment:from deserializer)], properties:null)</div><div class="line">INFO  : Completed compiling command(queryId=hive_20170629105656_63fcacb8-ffae-4e00-b810-25317cec8058); Time taken: 0.068 seconds</div><div class="line">INFO  : Concurrency mode is disabled, not creating a lock manager</div><div class="line">INFO  : Executing command(queryId=hive_20170629105656_63fcacb8-ffae-4e00-b810-25317cec8058): show tables</div><div class="line">INFO  : Starting task [Stage-0:DDL] in serial mode</div><div class="line">INFO  : Completed executing command(queryId=hive_20170629105656_63fcacb8-ffae-4e00-b810-25317cec8058); Time taken: 0.1 seconds</div><div class="line">INFO  : OK</div><div class="line">+-----------+--+</div><div class="line">| tab_name  |</div><div class="line">+-----------+--+</div><div class="line">+-----------+--+</div></pre></td></tr></table></figure></p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;show locks ods.migulive_10108_func_use_log_ex;</div><div class="line"></div><div class="line">+-------------------------------------+---------+--+</div><div class="line">|              tab_name               |  mode   |</div><div class="line">+-------------------------------------+---------+--+</div><div class="line">| ods@migulive_10108_func_use_log_ex  | SHARED  |</div><div class="line">| ods@migulive_10108_func_use_log_ex  | SHARED  |</div><div class="line">| ods@migulive_10108_func_use_log_ex  | SHARED  |</div><div class="line">+-------------------------------------+---------+--+</div><div class="line">3 rows selected (0.27 seconds)</div><div class="line">&gt;show locks ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;00&apos;);</div><div class="line">+----------------------------------------------------+---------+--+</div><div class="line">|                      tab_name                      |  mode   |</div><div class="line">+----------------------------------------------------+---------+--+</div><div class="line">| ods@migulive_10108_func_use_log_ex@src_file_day=20171114/src_file_hour=00 | SHARED  |</div><div class="line">| ods@migulive_10108_func_use_log_ex@src_file_day=20171114/src_file_hour=00 | SHARED  |</div><div class="line">| ods@migulive_10108_func_use_log_ex@src_file_day=20171114/src_file_hour=00 | SHARED  |</div><div class="line">+----------------------------------------------------+---------+--+</div></pre></td></tr></table></figure>
</p>
<h2 id="解锁分区"><a href="#解锁分区" class="headerlink" title="解锁分区"></a>解锁分区</h2><p><code>unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&#39;20171114&#39;, src_file_hour=&#39;00&#39;);</code></p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt; unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;00&apos;);</div><div class="line">INFO  : Compiling command(queryId=hive_20171115221717_540d811a-473a-443a-91c3-e5aa545a2bc1): unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;00&apos;)</div><div class="line">INFO  : Semantic Analysis Completed</div><div class="line">INFO  : Returning Hive schema: Schema(fieldSchemas:null, properties:null)</div><div class="line">INFO  : Completed compiling command(queryId=hive_20171115221717_540d811a-473a-443a-91c3-e5aa545a2bc1); Time taken: 0.083 seconds</div><div class="line">INFO  : Executing command(queryId=hive_20171115221717_540d811a-473a-443a-91c3-e5aa545a2bc1): unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;00&apos;)</div><div class="line">INFO  : Starting task [Stage-0:DDL] in serial mode</div><div class="line">INFO  : Completed executing command(queryId=hive_20171115221717_540d811a-473a-443a-91c3-e5aa545a2bc1); Time taken: 0.025 seconds</div><div class="line">INFO  : OK</div><div class="line">No rows affected (0.117 seconds)</div><div class="line">&gt; unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;01&apos;);</div><div class="line">INFO  : Compiling command(queryId=hive_20171115221717_a3869646-831b-4d37-9344-3c8a598307c2): unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;01&apos;)</div><div class="line">INFO  : Semantic Analysis Completed</div><div class="line">INFO  : Returning Hive schema: Schema(fieldSchemas:null, properties:null)</div><div class="line">INFO  : Completed compiling command(queryId=hive_20171115221717_a3869646-831b-4d37-9344-3c8a598307c2); Time taken: 0.084 seconds</div><div class="line">INFO  : Executing command(queryId=hive_20171115221717_a3869646-831b-4d37-9344-3c8a598307c2): unlock table ods.migulive_10108_func_use_log_ex partition(src_file_day=&apos;20171114&apos;, src_file_hour=&apos;01&apos;)</div><div class="line">INFO  : Starting task [Stage-0:DDL] in serial mode</div><div class="line">INFO  : Completed executing command(queryId=hive_20171115221717_a3869646-831b-4d37-9344-3c8a598307c2); Time taken: 0.025 seconds</div><div class="line">INFO  : OK</div><div class="line">No rows affected (0.117 seconds)</div></pre></td></tr></table></figure>
</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/MySQL/mysql命令.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/MySQL/mysql命令.html" itemprop="url">mysql命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-30T00:00:00+08:00">
                2017-06-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在mysql的命令提示符下，执行下面一句话,查看mysql服务器的所有全局配置信息：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">show global variables;</div><div class="line">show slave status\G</div><div class="line">show global variables like &quot;%datadir%&quot;;</div></pre></td></tr></table></figure></p>
<p>前言：之前因为了修改服务器hostname，导致从库同步失败，一直解决不掉，没办法，只能重新设置同步。<br>先停止从库同步，并清空同步信息<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">stop slave；</div><div class="line">reset slave all;</div></pre></td></tr></table></figure></p>
<p>全量备份主库数据</p>
<p><code>mysqldump -u root -p --all-databases --routines &gt; senqiang.sql</code><br>全量还原数据库到从库</p>
<p><code>mysql -uroot -p &lt; senqiang.sql</code><br>查看主库最新的binlog日志偏移量，从库重新授权同步</p>
<p><code>change master to master_host=&#39;192.168.0.2&#39;,master_user=&#39;syncdb&#39;,master_password=&#39;passwd&#39;,master_log_file=&#39;mysql-bin.000005&#39;,master_log_pos=8188;</code><br>开启从库同步<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">start slave;</div><div class="line">show slave status\G;</div></pre></td></tr></table></figure></p>
<p>注：备份主库前最好停止主库的写入，记录最新日志偏移量，否则在你还原数据，重新授权同步时会有数据偏差</p>
<p>Error: Error while compiling statement: FAILED: InvalidConfigurationException hive.server2.authentication can’t be none in non-testing mode (state=42000,code=40000</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Installation/Cloudera部署SUSE.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Installation/Cloudera部署SUSE.html" itemprop="url">Cloudera部署SUSE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-27T00:00:00+08:00">
                2017-06-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Installation/" itemprop="url" rel="index">
                    <span itemprop="name">Installation</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>操作系统:SUSE11 SP3<br>CM版本:CM5.11.0<br>CDH版本:CDH5.10.1<br>使用root用户对集群进行部署</p>
</blockquote>
<h2 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h2><ul>
<li>关闭防火墙</li>
<li>配置时钟同步服务</li>
<li>检查数据盘是否挂载</li>
</ul>
<p>安装的机器ip:<br>192.168.65.40,192.168.65.41,192.168.65.42,192.168.65.43,192.168.65.44,192.168.65.45,192.168.65.46,192.168.65.47,192.168.65.48,192.168.65.49,</p>
<ol>
<li>安装操作系统，建议对操作系统盘做RAID1</li>
<li>如果不能连接互联网，先创建OS的repository，以便yum或zypper可以访问OS镜像</li>
<li><p>为了使集群中各个节点之间能互相通信，需要静态或动态配置节点的IP地址。如果使用动态配置，请安装DHCP和DNS服务器，具体请参见对应软件的安装文档，此不赘述；如果使用静态IP地址，请正确配置各节点的IP，并在/etc/hosts配置所有节点的静态DNS解析。<br>以cm节点为例：<code>/etc/sysconfig/network-scripts/ifcfg-eth0</code></p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">DEVICE=&quot;bond0&quot;</div><div class="line">BOOTPROTO=&quot;static&quot;</div><div class="line">IPV6INIT=&quot;no&quot;</div><div class="line">MTU=&quot;1500&quot;</div><div class="line">NM_CONTROLLED=&quot;no&quot;</div><div class="line">ONBOOT=&quot;yes&quot;</div><div class="line">TYPE=&quot;Ethernet&quot;</div><div class="line">IPADDR=192.168.60.25</div><div class="line">NETMASK=255.255.255.0</div><div class="line">GATEWAY=192.168.60.1</div></pre></td></tr></table></figure>
</p>
<p>/etc/hosts样例</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">192.168.60.24  ddp-cm</div><div class="line">192.168.60.25  ddp-hnn-01</div><div class="line">192.168.60.26  ddp-dn-001</div><div class="line">192.168.60.27  ddp-dn-002</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>如果机器配置有双网卡，可以做双网卡绑定；</p>
</li>
<li>关闭并禁用防火墙<br><code>/sbin/rcSuSEfirewall2 stop</code><br><code>chkconfig SuSEfirewall2_setup off</code></li>
<li>关闭SELinux<br><code>service boot.apparmor stop</code><br><code>chkconfig boot.apparmor off</code></li>
<li>重启网络服务，并初始化网络<br><code>/etc/init.d/network restart</code></li>
<li>修改transparent_hugepage参数，这一参数默认值可能会导致CDH性能下降<br>在/etc/init.d/after.local中增加一行：<br><code>if test -f /sys/kernel/mm/transparent_hugepage/enabled; then echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled fi</code></li>
<li><p>禁用交换内存</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$&gt; vim  /etc/sysctl.conf</div><div class="line">增加一行：vm.swappiness=0</div><div class="line">echo 0 &gt;/proc/sys/vm/swappiness</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>修改/etc/security/limits.conf或者在/etc/security/limits.d下增加相应的配置文件，可以设置一些硬限制和软限制；Cloudera Manager节点会为所有节点自动做这些修改。</p>
</li>
<li>在需要作为Repo库的节点上安装必要的软件，包含HTTP服务和Repo创建工具</li>
<li><p>SUSE11 SP3 安装会有缺失的依赖需要手动安装rpm包<br>记得先查看是否有失效的zypper源,删除后添加内网配置的zypper源</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">zypper ar http://192.168.58.55/suse/11/x86_64/ main</div><div class="line">zypper ref</div><div class="line">zypper in postgresql91</div></pre></td></tr></table></figure>
</p>
<p>之后即可安装所缺的依赖包 python-psycopg<br><code>sudo rpm -ivh python-psycopg2-2.6.2-3.2.x86_64.rpm</code></p>
</li>
</ol>
<h2 id="MySQL建表语句"><a href="#MySQL建表语句" class="headerlink" title="MySQL建表语句:"></a>MySQL建表语句:</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">CREATE USER &apos;hive&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxxxxxxx&apos;;</div><div class="line">create database metastore_r default character set utf8;</div><div class="line">GRANT ALL PRIVILEGES ON metastore_r. * TO &apos;hive&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;amon&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;</div><div class="line">create database amon_r default character set utf8;</div><div class="line">grant all privileges on amon_r.* to &apos;amon&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;rman&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;;</div><div class="line">create database rman_r default character set utf8;</div><div class="line">grant all privileges on rman_r.* to &apos;rman&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;sentry&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;;</div><div class="line">create database sentry_r default character set utf8;</div><div class="line">grant all privileges on sentry_r.* to &apos;sentry&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;nav&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;;</div><div class="line">create database nav_r default character set utf8;</div><div class="line">grant all privileges on nav_r.* to &apos;nav&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;navms&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;;</div><div class="line">create database navms_r default character set utf8;</div><div class="line">grant all privileges on navms_r.* to &apos;navms&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">create user &apos;cm&apos;@&apos;%&apos; identified by &apos;xxxxxxxx&apos;;</div><div class="line">create database cm_r default character set utf8;</div><div class="line">grant all privileges on cm_r.* to &apos;cm&apos;@&apos;%&apos;;</div><div class="line"></div><div class="line">CREATE USER &apos;hue&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxxxxxxx&apos;; </div><div class="line">create database hue_r default character set utf8;</div><div class="line">GRANT ALL PRIVILEGES ON hue_r.* TO &apos;hue&apos;@&apos;%&apos;; </div><div class="line"></div><div class="line">CREATE USER &apos;oozie&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxxxxxxx&apos;; </div><div class="line">create database oozie_r default character set utf8;</div><div class="line">GRANT ALL PRIVILEGES ON oozie_r.* TO &apos;oozie&apos;@&apos;%&apos;; </div><div class="line">FLUSH PRIVILEGES;</div></pre></td></tr></table></figure>
</p>
<h3 id="Mysql-修改密码"><a href="#Mysql-修改密码" class="headerlink" title="Mysql 修改密码"></a>Mysql 修改密码</h3><p>use mysql:<br>5.7之前版本<br>update user set password=passworD(“xxxxxxxx”) where user=’hive’;<br>update user set password=password(“xxxxxxxx”) where user=’hue’;<br>update user set password=passworD(“xxxxxxxx”) where user=’oozie’;<br>5.7之后版本<br>update user set authentication_string = password(‘xxxxxxxx’) where user = ‘hue’;</p>
<h2 id="CDH软件下载与配置（Cloudera管理器节点）"><a href="#CDH软件下载与配置（Cloudera管理器节点）" class="headerlink" title="CDH软件下载与配置（Cloudera管理器节点）"></a>CDH软件下载与配置（Cloudera管理器节点）</h2><ol>
<li><a href="http://archive-primary.cloudera.com/cm5/sles/11/x86_64/cm/5/RPMS/x86_64/" target="_blank" rel="noopener">下载Cloudera管理器需要的rpm包</a></li>
<li>下载Parcel包（包含了CDH中的Hadoop组件）<br><a href="http://archive-primary.cloudera.com/cdh5/parcels/latest" target="_blank" rel="noopener">选择合适版本的parcel包,包括manifest.json文件</a>    </li>
<li>下载后将下载的RPM包放置在一个文件夹后,<code>createrepo .</code></li>
<li>执行完后，在cm目录下生成目录repodata</li>
<li>将文件移动到特定的目录，确保可以通过HTTP协议进行访问<br>Apache2服务安装<code>zypper install apache2</code></li>
</ol>
<p>http服务侦听配置:修改/etc/apache2/listen.conf 配置HTTP服务器侦听IP和端口，如：<br><code>Listen 192.168.65.50:80</code><br>http共享目录配置:修改/etc/apache2/default-server.conf 配置一个共享目录，如:<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">DocumentRoot &quot;/srv/www/htdocs&quot;</div><div class="line">&lt;Directory &quot;/srv/www/htdocs&quot;&gt;</div><div class="line">    Options Indexes FollowSymLinks</div><div class="line">    AllowOverride None</div><div class="line">    Order allow,deny</div><div class="line">    Allow from all</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure></p>
<h3 id="启动apache2服务："><a href="#启动apache2服务：" class="headerlink" title="启动apache2服务："></a>启动apache2服务：</h3><p><code>/etc/init.d/apache2 start</code><br>将下载的CM和Parcels介质文件存放到/srv/www/htdocs/下的自定义目录下<br>把cm的rpm包移到/var/www/htdocs/cm5.11<br>把parcels包移到/srv/www/htdocs/parcels/<br>能通过浏览器通过HTTP URL访问介质目录内容即可，如：<br>http://&lt;IP&gt;/cm5.11/<br>http://&lt;IP&gt;/parcels/<br>新建/etc/zypp/repos.d/myrepo.repo<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[myrepo]</div><div class="line">name=repo</div><div class="line">baseurl=http://192.168.65.40/cm5.11/</div><div class="line">enabled=true</div><div class="line">gpgcheck=false</div></pre></td></tr></table></figure></p>
<h2 id="安装Cloudera管理器"><a href="#安装Cloudera管理器" class="headerlink" title="安装Cloudera管理器"></a>安装Cloudera管理器</h2><ol>
<li>安装JDK <code>zypper install oracle-j2sdk1.7</code></li>
<li>安装Cloudera管理器服务器 <code>zypper install cloudera-manager-daemons cloudera-manager-server</code></li>
<li><p>在需要访问MySQL的节点上安装mysql-connector-java</p>
<p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">cp mysql-connector-java-5.1.34.jar /usr/share/java/</div><div class="line">ln –s mysql-connector-java-5.1.34.jar mysql-connector-java.jar</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>为Cloudera管理器配置外部数据库</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">/usr/share/cmf/schema/scm_prepare_database.sh -h &lt;MYSQL_HOST&gt; &lt;DB_TYPE&gt; &lt;DATABASE&gt; &lt;USERNAME&gt; &lt;PASSWORD&gt;</div><div class="line">-h &lt;MYSQL_HOST&gt;可以不指定，默认是localhost</div><div class="line">DB_TYPE可以是mysql, oracle</div><div class="line">DATABASE即为之前为Cloudera Manager配置的数据库</div><div class="line">USERNAME/PASSWORD 即为可以访问这个数据库的用户</div><div class="line"></div><div class="line">/usr/share/cmf/schema/scm_prepare_database.sh -h 192.168.60.173 mysql &apos;cm_r&apos; cm &apos;xxxxxxxx&apos;</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>启动Cloudera管理器服务器 <code>service cloudera-scm-server start</code> 启动后就可以访问Cloudera管理器页面了,Cloudera管理器的监听端口为7180</p>
</li>
</ol>
<h2 id="安装CDH集群"><a href="#安装CDH集群" class="headerlink" title="安装CDH集群"></a>安装CDH集群</h2><ol>
<li>输入账户密码admin/admin，点击“登录” </li>
<li>选择要安装的集群版本，点击“继续</li>
<li>了解CDH支持的Hadoop组件信息，点击“继续”</li>
<li>查找并选择需要安装CDH的机器，点击“继续”</li>
<li>点击“使用Parcels（建议）”右侧的“更多选项”按钮，在弹出框中设置CDH Parcel包的URL，点击“确定”</li>
<li>选择5.10.1-1.cdh5.10.1.p0.10，在“自定义存储库”填写依赖包的URL，点击“继续”</li>
<li>选择需要的JDK，点击“继续”</li>
<li>输入集群机器的登录密码，点击“继续”</li>
<li>集群依赖包安装，安装完后点击“继续”</li>
<li>Parcel包安装，安装完后点击“继续”</li>
<li>检查主机正确性，如果检查出现任何潜在问题，你可以到集群中进行修复，修复后点击“重新运行”重新检查。解决所有问题后，点击“完成”</li>
<li>选择要安装的服务套装，点击“继续”</li>
<li>选择具体的角色分配</li>
<li>设置数据库，设置完毕后点击“测试连接”，测试全部通过后点击“继续”</li>
<li>配置集群组件的相关参数，点击“继续”</li>
<li>启动集群，完成后点击“继续”</li>
<li>点击“完成”</li>
<li>访问集群</li>
<li>搞定…</li>
</ol>
<hr>
<h2 id="彻底删除CM和CDH步骤-以便重来"><a href="#彻底删除CM和CDH步骤-以便重来" class="headerlink" title="彻底删除CM和CDH步骤,以便重来"></a>彻底删除CM和CDH步骤,以便重来</h2><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">service cloudera-scm-agent stop</div><div class="line">umount /var/run/cloudera-scm-agent/process</div><div class="line">rm -rf /usr/share/cmf /var/lib/cloudera* /var/cache/zypp/packages/cloudera-* /var/cache/zypp/raw/cloudera-* /var/cache/zypp/solv/cloudera-* /var/log/cloudera-scm-* /var/run/cloudera-scm-* /etc/cloudera-scm-server*</div><div class="line"></div><div class="line">rpm -qa |grep cloudera</div><div class="line">rpm -e cloudera-manager-agent-5.11.1-1.cm5111.p0.9.sles11 </div><div class="line">rpm -e cloudera-manager-server-5.11.1-1.cm5111.p0.9.sles11</div><div class="line">rpm -e cloudera-manager-daemons-5.11.1-1.cm5111.p0.9.sles11</div><div class="line"></div><div class="line">rm -rf /var/lib/hadoop-* /var/lib/impala /var/lib/solr /var/lib/zookeeper /var/lib/hue /var/lib/oozie  /var/lib/pgsql  /var/lib/sqoop2  /data/dfs/  /data/impala/ /data/yarn/  /dfs/ /impala/ /yarn/  /var/run/hadoop-*/ /var/run/hdfs-*/ /usr/bin/hadoop* /usr/bin/zookeeper* /usr/bin/hbase* /usr/bin/hive* /usr/bin/hdfs /usr/bin/mapred /usr/bin/yarn /usr/bin/sqoop* /usr/bin/oozie /etc/hadoop* /etc/zookeeper* /etc/hive* /etc/hue /etc/impala /etc/sqoop* /etc/oozie /etc/hbase* /etc/hcatalog </div><div class="line">rm -rf /opt/cloudera/parcel-cache /opt/cloudera/parcels</div><div class="line"></div><div class="line">ps aux|grep  supervisord |grep -v grep | awk &apos;&#123;print &quot;kill -9 &quot;$2&#125;&apos;|sh</div><div class="line"></div><div class="line">umount /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1 /dev/sdf1 /dev/sdg1 /dev/sdh1 /dev/sdi1  /dev/sdj1  /dev/sdk1  /dev/sdl1  /dev/sdm1 </div><div class="line">查看磁盘占用:fuser -m -v /mnt/test</div></pre></td></tr></table></figure>
</p>
<p>sh formatdisk.sh<br>sh mountdisk.sh </p>
<p>删除创建的数据库<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">drop database amon_r;      </div><div class="line">drop database hue_r;      </div><div class="line">drop database metastore_r;                </div><div class="line">drop database nav_r;      </div><div class="line">drop database navms_r;</div><div class="line">drop database oozie_r;</div><div class="line">drop database rman_r;</div><div class="line">drop database sentry_r;</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="Running-a-MapReduce-Job"><a href="#Running-a-MapReduce-Job" class="headerlink" title="Running a MapReduce Job"></a>Running a MapReduce Job</h2><ol>
<li>Log into a cluster host.</li>
<li><p>Run the Hadoop PiEstimator example:</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">sudo -u hdfs hadoop jar \</div><div class="line">/opt/cloudera/parcels/CDH/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar \</div><div class="line">pi 10 100</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>View the result of running the job by selecting the following from the top navigation bar in the Cloudera Manager Admin Console: Clusters &gt; Cluster Name &gt; YARN Applications. </p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Spark/Cloudera平台安装Apache Spark 2.0 Beta版本.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Spark/Cloudera平台安装Apache Spark 2.0 Beta版本.html" itemprop="url">选择和配置数据压缩</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Spark/" itemprop="url" rel="index">
                    <span itemprop="name">Spark</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Cloudera平台安装Apache-Spark-2-0-Beta版本"><a href="#Cloudera平台安装Apache-Spark-2-0-Beta版本" class="headerlink" title="Cloudera平台安装Apache Spark 2.0 Beta版本"></a>Cloudera平台安装Apache Spark 2.0 Beta版本</h1><p><a href="http://www.cloudera.com/documentation/betas/spark2/latest/topics/spark2.html" target="_blank" rel="noopener">兼容信息</a><br><a href="https://www.cloudera.com/documentation/spark2/latest/topics/spark2_installing.html" target="_blank" rel="noopener">安装步骤</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Hive/Hive Metastore Server僵死.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Hive/Hive Metastore Server僵死.html" itemprop="url">Hive Metastore Server 僵死</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Hive/" itemprop="url" rel="index">
                    <span itemprop="name">Hive</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hive-Metastore-Server-僵死"><a href="#Hive-Metastore-Server-僵死" class="headerlink" title="Hive Metastore Server 僵死"></a>Hive Metastore Server 僵死</h1><p>现状: 在Hive Metastore Server上的角色只要停止服务,就无法再启动</p>
<p>开头怀疑是cloudera-scm-agent 出问题<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">877  2017-05-24 15:50:05 /etc/init.d/cloudera-scm-agent stop</div><div class="line">878  2017-05-24 15:50:15 ss -anp|grep 9000</div><div class="line">879  2017-05-24 15:50:39 ps axu|grep agent</div><div class="line">880  2017-05-24 15:51:08 ss -anp|grep 9000</div><div class="line">881  2017-05-24 15:51:18 /etc/init.d/cloudera-scm-agent start</div><div class="line">882  2017-05-24 15:51:27 /etc/init.d/cloudera-scm-agent status</div><div class="line">883  2017-05-24 15:51:51 ss -anp|grep 9000</div><div class="line">884  2017-05-24 15:55:14 cd /var/log/</div></pre></td></tr></table></figure></p>
<p>重启服务后发现依旧</p>
<p>于是怀疑IO问题<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">891  2017-05-24 16:04:03 ulimit -a</div><div class="line">892  2017-05-24 16:04:55 cat /etc/passwd</div><div class="line"></div><div class="line">896  2017-05-24 16:07:10 vi /etc/security/limits.conf </div><div class="line">897  2017-05-24 16:08:14 ulimit -a</div><div class="line">898  2017-05-24 16:09:38 lsof -n |awk &apos;&#123;print $2&#125;&apos;|sort|uniq -c |sort -nr|more</div></pre></td></tr></table></figure></p>
<p>设置最大文件打开数<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#ftp             hard    nproc           0</div><div class="line">#@student        -       maxlogins       4</div><div class="line"></div><div class="line">*                soft    nofile          65535</div><div class="line">*                hard    nofile          65535</div></pre></td></tr></table></figure></p>
<p>之后reboot解决</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Error/[Linux]Recv-Q.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Error/[Linux]Recv-Q.html" itemprop="url">Recv-Q</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Error/" itemprop="url" rel="index">
                    <span itemprop="name">Error</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Recv-Q：表示收到的数据中还有多少没有被进程取走（通过recv）</p>
<p>Send-Q：表示需要发送的数据还有多少没有被发出</p>
<p>所以，一般来说这两个值都是0，如果不为0且持续增长，那就表明程序出现了问题。</p>
<p>比如Recv-Q的数字持续增长，表示没有进程去取这些收到的数据。比如使用select+recv来收数据的时候，由于select有1024这个限制，所以如果socket的FD大于1024的时候，就会导致这个socket FD上的数据不会被select检测到从而导致recv不会被调用。<br>说<br>所以，通过netstat的这两个值就可以简单判断程序收不到包到底是包没到还是包没有被进程recv。</p>
<p>Recv-Q Send-Q分别表示网络接收队列，发送队列。Q是Queue的缩写。<br>这两个值通常应该为0，如果不为0可能是有问题的。packets在两个队列里都不应该有堆积状态。可接受短暂的非0情况。如文中的示例，短暂的Send-Q队列发送pakets非0是正常状态。<br>如果接收队列Recv-Q一直处于阻塞状态，可能是遭受了拒绝服务 denial-of-service 攻击。<br>如果发送队列Send-Q不能很快的清零，可能是有应用向外发送数据包过快，或者是对方接收数据包不够快。</p>
<p>Recv-Q：表示收到的数据已经在本地接收缓冲，但是还有多少没有被进程取走，recv()<br>Send-Q：对方没有收到的数据或者说没有Ack的,还是本地缓冲区.<br>通过netstat的这两个值就可以简单判断程序收不到包到底是包没到还是包没有被进程recv。</p>
<p>SYN（synchronous）是TCP/IP建立连接时使用的握手信号。在客户机和服务器之间建立正常的TCP网络连接时，客户机首先发出一个SYN消息，服务器使用SYN+ACK应答表示接收到了这个消息，最后客户机再以ACK消息响应。这样在客户机和服务器之间才能建立起可靠的TCP连接，数据才可以在客户机和服务器之间传递。<br>TCP连接的第一个包，非常小的一种数据包。SYN 攻击包括大量此类的包，由于这些包看上去来自实际不存在的站点，因此无法有效进行处理。每个机器的欺骗包都要花几秒钟进行尝试方可放弃提供正常响应。</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ddp-dn-032:~ # netstat -ntp</div><div class="line">Active Internet connections (w/o servers)</div><div class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name   </div><div class="line">tcp        1      0 10.200.60.110:39524     10.200.60.79:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:43629     10.200.60.93:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.63.26:36895      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:57353     10.200.63.39:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:33582     10.200.63.25:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:58218     10.200.60.78:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:38065     10.200.63.22:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:34440     10.200.60.11:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34530     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:58388     10.200.60.67:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:60931     10.200.60.58:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:45359     10.200.60.42:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:44558     10.200.60.125:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:43614     10.200.60.45:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:46176     10.200.60.107:8022      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:33359     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:56717     10.200.60.30:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:37897     10.200.60.139:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:38204     10.200.60.38:52139      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:55412     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:44500     10.200.63.33:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:44914     10.200.60.66:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34546     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:44192     10.200.63.97:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59643     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34069     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:58423     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:53904     10.200.63.87:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:40765     10.200.60.106:24000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:34611     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.108:42258     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59639     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:52427     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:58581     10.200.60.79:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:49472     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:48228     10.200.63.37:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:35413     10.200.60.81:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:57373     10.200.60.68:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34074     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:57849     10.200.60.92:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34567     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:50730     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:35099     10.200.63.86:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:38220     10.200.60.26:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:59716     10.200.63.29:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:54124     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:37479     10.200.60.141:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:41114     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:39161     10.200.60.95:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:48509     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34554     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:49090     10.200.63.90:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:35952     10.200.60.119:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:50717     10.200.63.96:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34565     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:41805     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:56712     10.200.60.73:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:13562     10.200.63.15:45265      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:32921     10.200.60.85:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:49914     10.200.60.44:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 127.0.0.1:19001         127.0.0.1:48835         ESTABLISHED 4358/python         </div><div class="line">tcp        1      0 10.200.60.110:57788     10.200.60.41:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.110:33646     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:57086     10.200.60.122:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.18:47133      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:38618     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:43323     10.200.60.104:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:59139     10.200.63.92:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:51328     10.200.60.34:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:41141     10.200.63.32:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:51310     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:36547     10.200.63.33:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:52474     10.200.60.49:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:44185     10.200.60.65:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:55500     10.200.63.82:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:55282     10.200.63.99:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.110:33612     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:59901     10.200.60.142:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34541     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:37878     10.200.63.39:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1006      10.200.60.110:53278     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:56068     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:37815     10.200.60.36:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:56368     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:55441     10.200.60.114:7184      ESTABLISHED -                   </div><div class="line">tcp        1      0 10.200.60.110:36442     10.200.60.84:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:39030     10.200.60.21:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:53485     10.200.63.98:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59640     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:51471     10.200.63.84:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35204     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.106:43806     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:46782     10.200.60.114:9997      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:58886     10.200.60.35:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59650     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:34547     10.200.60.101:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:33777     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:40089     10.200.60.110:22000     ESTABLISHED 3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:46225     10.200.60.131:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:42449     10.200.60.39:22000      ESTABLISHED 3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:58714     10.200.60.57:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:43433     10.200.63.38:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34523     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:42977     10.200.60.22:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43551     10.200.60.45:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:52667     10.200.60.31:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34574     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:49041     10.200.63.93:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59649     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:45658     10.200.60.132:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:46681     10.200.60.10:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.33:58198      TIME_WAIT   -                   </div><div class="line">tcp        0      0 127.0.0.1:48678         127.0.0.1:38125         TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.110:33610     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:47087     10.200.60.17:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:55872     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:45731     10.200.60.89:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:43394     10.200.60.33:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59645     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:57161     10.200.63.26:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35181     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:54587     10.200.60.63:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:58509     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:36560     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:53854     10.200.60.24:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:58085     10.200.60.39:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:41370     10.200.60.80:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:44716     10.200.63.31:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:56643     10.200.60.27:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:38664     10.200.60.93:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:36117     10.200.60.54:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:43341     10.200.60.38:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:47925     10.200.60.32:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:55668     10.200.60.91:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:50525     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:42549     10.200.60.19:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:40820     10.200.60.62:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:33385     10.200.60.127:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:43579     10.200.60.46:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:57880     10.200.60.115:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:51313     10.200.60.34:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:34983     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:32825     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.11:52494      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:51739     10.200.60.52:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:37688     10.200.60.20:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:47758     10.200.63.88:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:50720     10.200.60.103:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34634     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:41560     10.200.60.87:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:52832     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:34798     10.200.60.18:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:35880     10.200.60.88:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34636     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:57439     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43615     10.200.60.45:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34457     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:35774     10.200.60.51:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:38703     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:42735     10.200.60.75:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:40540     10.200.60.120:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:33758     10.200.63.15:60474      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34428     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34452     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:59235     10.200.60.138:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.110:33618     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:60847     10.200.60.37:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:41148     10.200.63.32:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:52696     10.200.63.23:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:49919     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:35344     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:35852     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:43472     10.200.60.64:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:58358     10.200.63.34:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:51110     10.200.60.135:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:59746     10.200.60.126:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35179     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:46546     10.200.60.120:42316     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:47625     10.200.60.38:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:50478     10.200.60.43:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:54797     10.200.60.94:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59638     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:39141     10.200.60.45:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:39467     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:47234     10.200.60.32:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:46087     10.200.60.121:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59641     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:44411     10.200.60.76:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:59982     10.200.60.47:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:41529     10.200.63.40:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.110:33611     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:55201     10.200.60.83:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:56656     10.200.63.28:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35857     10.200.60.100:8031      ESTABLISHED 25756/java          </div><div class="line">tcp        0      0 10.200.60.110:44367     10.200.63.33:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:35038     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:58129     10.200.60.100:8022      ESTABLISHED 17586/jsvc.exec     </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.114:45135     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:47338     10.200.60.36:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:36706     10.200.60.116:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:52908     10.200.60.143:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:46523     10.200.60.22:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:36894     TIME_WAIT   -                   </div><div class="line">tcp        0   1600 10.200.60.110:22        172.16.15.152:45994     ESTABLISHED 6613/0              </div><div class="line">tcp        1      0 10.200.60.110:46552     10.200.60.55:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:55737     10.200.60.53:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:55624     10.200.60.48:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:40554     10.200.60.23:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34570     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:33616     10.200.60.61:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34512     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:60560     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:56346     10.200.60.140:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:35952     10.200.63.85:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:58899     10.200.60.40:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:42605     10.200.60.34:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:48608     10.200.60.137:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:46823     10.200.60.72:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:52516     10.200.60.68:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:58748     10.200.63.35:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:34263     10.200.60.29:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35426     10.200.60.114:7182      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.10:60425      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:52262     10.200.60.96:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:39774     10.200.63.27:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:52287     10.200.60.78:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.109:34509     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34431     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:58934     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:39446     10.200.63.91:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34519     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34524     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:53548     10.200.60.107:8022      ESTABLISHED 17586/jsvc.exec     </div><div class="line">tcp        0      0 10.200.60.110:58702     10.200.60.79:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:46409     10.200.63.21:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:53868     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59636     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:55013     10.200.60.133:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:37623     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:42372     10.200.60.71:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:48924     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.47:35044      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:58038     10.200.60.39:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:43450     10.200.63.36:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:42540     10.200.63.100:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:49093     10.200.60.130:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:38290     10.200.60.70:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:40222     10.200.60.114:9995      ESTABLISHED -                   </div><div class="line">tcp        0      0 127.0.0.1:48678         127.0.0.1:38123         TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34817     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:57345     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:60163     10.200.63.99:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:57777     10.200.60.136:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:48268     10.200.60.134:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:36046     10.200.60.90:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:37334     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:35844     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:56651     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59652     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:53482     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:59656     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59651     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43580     10.200.60.45:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:49601     10.200.60.13:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:35245     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:59712     10.200.60.69:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:59892     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:45377     10.200.63.27:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59646     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:39956     10.200.60.25:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:57575     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:50241     10.200.63.94:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:39157     10.200.60.74:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:54917     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:60532     10.200.60.110:25000     ESTABLISHED 10961/python2.6     </div><div class="line">tcp        1      0 10.200.60.110:47873     10.200.60.97:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:33719     10.200.60.56:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:47678     10.200.60.38:1004       TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:35614     10.200.60.15:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:54145     10.200.63.10:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:60122     10.200.60.114:7184      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34520     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:38596     10.200.60.93:1004       TIME_WAIT   -                   </div><div class="line">tcp      145      0 10.200.60.110:25000     10.200.60.110:60532     ESTABLISHED -                   </div><div class="line">tcp        1      0 10.200.60.110:48614     10.200.63.95:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34422     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.109:35923     ESTABLISHED 17586/jsvc.exec     </div><div class="line">tcp        0      0 10.200.60.110:38570     10.200.60.93:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:33691     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:59731     10.200.63.32:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59653     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:54115     10.200.60.104:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:44487     10.200.63.33:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59648     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:1004      10.200.60.109:33239     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:46379     10.200.60.66:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59642     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:55158     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34529     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:8042      10.200.60.110:38454     TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:51789     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:51095     10.200.60.28:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34672     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34538     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:50437     10.200.60.14:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:42807     10.200.60.77:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:38546     10.200.60.93:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59637     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:39137     10.200.63.83:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:33081     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:56981     10.200.60.128:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34544     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:37497     10.200.63.20:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 127.0.0.1:48835         127.0.0.1:19001         ESTABLISHED 10961/python2.6     </div><div class="line">tcp        1      0 10.200.60.110:54544     10.200.60.50:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:13562     10.200.63.15:45297      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:10050     10.200.56.126:55794     TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:34069     10.200.60.108:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:38488     10.200.60.109:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:39349     10.200.60.117:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:38059     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:40902     10.200.60.102:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:59644     10.200.60.60:45021      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:46899     10.200.60.35:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:45439     10.200.63.30:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:58067     10.200.60.12:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:50828     10.200.60.60:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:34498     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:35053     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        1      0 10.200.60.110:38862     10.200.60.118:22000     CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:51123     10.200.60.82:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        1      0 10.200.60.110:38239     10.200.60.59:22000      CLOSE_WAIT  3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:51203     10.200.60.130:50663     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43657     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:48673     10.200.60.10:45054      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.110:43945     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43628     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:39392     10.200.60.135:43112     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:57126     10.200.60.104:39564     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.108:38875     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.13:35105      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.120:33405     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43627     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:53577     10.200.63.146:36796     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.94:48726      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:48251     10.200.60.17:39091      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:35619     10.200.60.52:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:52264     10.200.60.126:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:53413     10.200.60.77:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:39592     10.200.60.18:39020      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:47232     10.200.60.36:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43957     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59096     10.200.60.88:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.134:50254     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:48966     10.200.60.120:56307     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.120:54619     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.93:34037      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:53105     10.200.60.110:34343     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:46447     10.200.60.135:60200     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.18:49100      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34465     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.88:36447      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.102:44567     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34888     10.200.60.13:33395      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:33010     10.200.60.91:40437      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:55799     10.200.63.146:28953     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.17:38818      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.93:52154      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.17:57011      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:42664     10.200.60.132:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43697     10.200.60.132:51099     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.63.33:35719      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:55784     10.200.60.81:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:42854     10.200.60.54:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:36582     10.200.60.69:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:45759     10.200.60.18:36351      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.134:51566     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.95:41489      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.102:49566     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43647     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.13:53288      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.132:60655     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.18:52145      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:50904     10.200.60.17:59411      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:56594     10.200.60.102:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43661     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:38734     10.200.60.116:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.13:33424      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:42346     10.200.60.108:33625     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:53142     10.200.60.20:33749      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:43055     10.200.60.17:59411      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:33356     10.200.60.21:50118      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:56850     10.200.60.135:60200     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.91:60345      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.133:36635     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43626     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.120:57623     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:41023     10.200.60.94:59659      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.93:58054      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:60275     10.200.60.18:38386      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34491     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.13:57803      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:49110     10.200.60.88:55412      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:47284     10.200.60.67:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:45771     10.200.60.14:58840      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43640     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59371     10.200.60.13:56295      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:56773     10.200.60.138:43354     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.89:48962      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:39074     10.200.60.93:60854      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43659     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.104:59050     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:38973     10.200.60.21:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:53836     10.200.60.13:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:41357     10.200.60.120:58005     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.130:58637     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.138:51915     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:48811     10.200.60.133:54288     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:46585     10.200.60.10:45054      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:45229     10.200.60.120:58005     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:46190     10.200.60.88:39875      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34737     10.200.60.13:33395      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:48637     10.200.60.95:59369      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.10:46774      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:40263     10.200.60.80:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.88:33716      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.135:34287     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.17:54158      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:40143     10.200.60.46:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:40287     10.200.60.128:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.20:36625      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.18:36782      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:57351     10.200.63.39:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:41154     10.200.63.32:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:49677     10.200.60.134:56338     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:45569     10.200.60.108:46035     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:57754     10.200.60.26:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:37501     10.200.60.91:40437      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.20:56536      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:50742     10.200.60.90:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43593     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34081     10.200.63.146:36796     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:36762     10.200.60.14:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.138:44763     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:54402     10.200.63.93:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.10:57589      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:40962     10.200.60.134:56338     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:60855     10.200.60.108:46035     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:44252     10.200.60.17:47796      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:38960     10.200.60.22:35610      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.108:39511     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43440     10.200.60.120:34289     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.94:58282      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43427     10.200.60.102:36923     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:43650     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.135:42927     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:33618     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.102:49160     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.135:40508     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.21:41447      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:40731     10.200.60.102:51610     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.95:51058      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:37353     10.200.63.22:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:42092     10.200.63.28:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34505     10.200.60.93:39789      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.93:45092      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.18:48871      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.120:44772     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.14:43564      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43335     10.200.60.20:33749      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:60169     10.200.63.99:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43623     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.17:41051      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43625     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:38969     10.200.60.109:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:36232     10.200.60.21:50118      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.21:55883      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.110:53105     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34867     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59663     10.200.60.18:36351      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34417     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43111     10.200.60.108:33625     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.18:56058      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:53180     10.200.60.14:58840      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34097     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.17:53950      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34416     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43660     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:37145     10.200.63.97:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.22:43760      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:56233     10.200.60.24:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:47205     10.200.60.17:39480      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:59359     10.200.60.138:43354     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:46863     10.200.60.104:39564     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:54459     10.200.60.89:49015      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:39622     10.200.60.46:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.89:38803      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.17:55992      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:52924     10.200.60.22:35610      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:52461     10.200.60.102:36923     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:36788     10.200.60.14:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34659     10.200.63.170:9092      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.116:49015     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:41475     10.200.60.94:59659      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34783     10.200.60.130:50663     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34479     10.200.60.132:51099     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34430     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43945     10.200.60.110:59011     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.33:37370      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:51167     10.200.60.34:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:57216     10.200.60.120:34289     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.102:33926     ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:46140     10.200.60.66:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:45301     10.200.63.82:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:52795     10.200.60.116:53969     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43643     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.104:37286     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:43512     10.200.60.45:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:39253     10.200.60.76:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:33435     10.200.60.95:59369      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:43634     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:35136     10.200.60.93:60854      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:33792     10.200.60.110:1004      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:44122     10.200.60.96:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34593     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.14:42779      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:52399     10.200.60.102:51610     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:32909     10.200.60.13:56295      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:22000     10.200.60.110:40089     ESTABLISHED 3773/impalad        </div><div class="line">tcp        0      0 10.200.60.110:47171     10.200.60.36:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.17:35312      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.130:39980     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34955     10.200.60.17:47796      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:47370     10.200.60.32:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.17:38840      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43631     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.120:41992     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:57476     10.200.63.91:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:38870     10.200.63.146:28953     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:52231     10.200.60.133:54288     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.132:60810     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:41083     10.200.60.17:39091      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:48201     10.200.60.17:39480      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:43252     10.200.60.18:39020      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:53382     10.200.60.33:52178      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:34480     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:47055     10.200.60.48:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43658     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:43654     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:53971     10.200.60.120:56307     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.88:34671      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:38780     10.200.60.58:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.120:36822     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.22:50797      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:58893     10.200.60.135:43112     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:49199     10.200.60.116:53969     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:46026     10.200.60.18:38386      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:59851     10.200.60.89:49015      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:55987     10.200.60.88:55412      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.133:46192     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.108:46307     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34487     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:41980     10.200.60.33:52178      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34485     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:33359     10.200.60.73:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.91:35867      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.116:33957     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:60408     10.200.60.88:39875      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.18:33993      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:34468     10.200.60.100:8020      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:39549     10.200.63.33:38616      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.108:44681     ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.33:50491      ESTABLISHED 16089/java          </div><div class="line">tcp        0      0 10.200.60.110:54537     10.200.60.93:39789      ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:43716     10.200.60.110:8040      TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:59011     10.200.60.88:58972      ESTABLISHED 29726/java          </div><div class="line">tcp        0      0 10.200.60.110:55521     10.200.60.81:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:52129     10.200.60.68:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:34343     10.200.60.135:54525     ESTABLISHED -                   </div><div class="line">tcp        0      0 10.200.60.110:45792     10.200.63.92:1004       TIME_WAIT   -                   </div><div class="line">tcp        0      0 10.200.60.110:38798     10.200.60.10:1004       TIME_WAIT   -</div></pre></td></tr></table></figure>
</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Hive/添加HiveServer2.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Hive/添加HiveServer2.html" itemprop="url">添加HiveServer2角色</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Hive/" itemprop="url" rel="index">
                    <span itemprop="name">Hive</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="添加HiveServer2角色"><a href="#添加HiveServer2角色" class="headerlink" title="添加HiveServer2角色"></a>添加HiveServer2角色</h1><p>HIVE–&gt;实例–&gt;添加角色实例–&gt;选择HiveServer2<br>添加一台主机 ddp-dn-12.cmdmp.com   192.168.65.64<br>添加成功后,会显示没有该角色的keytab<br>到在节点上选择操作–&gt; <em>停止主机上的角色</em><br>成功后选择操作–&gt; <em>重新生成Keytab</em></p>
<p>如果集群使用UDF的话需要创建相应目录<br>登入该主机<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">mkdir -p /opt/local/hive/lib/</div><div class="line">mkdir -p /opt/local/hive/reloadable</div><div class="line">scp root@192.168.65.50:/opt/local/hive/lib/* /opt/local/hive/lib/</div><div class="line">scp root@192.168.65.50:/opt/local/hive/reloadable/* /opt/local/hive/reloadable/</div></pre></td></tr></table></figure></p>
<p>之后回到cloudera manager 的该节点页面下选择操作–&gt; <em>启动主机上的角色</em><br><code>beeline -u &#39;jdbc:hive2://192.168.65.64:10000/default;principal=hive/ddp-dn-12.cmdmp.com@CMDMP.COM&#39;</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Error/[Hbase]Hbase ZK锁表.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Error/[Hbase]Hbase ZK锁表.html" itemprop="url">Hbase ZK锁表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Error/" itemprop="url" rel="index">
                    <span itemprop="name">Error</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Hbase-ZK锁表"><a href="#Hbase-ZK锁表" class="headerlink" title="Hbase ZK锁表"></a>Hbase ZK锁表</h1><p>开发反复create drop table 导致zk的数据不同步<br>首先到Zookeeper中<strong>/hbase/table-lock</strong> 和<strong>/hbase/table</strong> 两个目录删除对应的表</p>
<p><code>rmr /hbase/table-lock/user_order_info</code></p>
<p>之后重启Hbase集群,发现报错<strong>/hbase/.tmp/</strong> 在HDFS中发现刚刚锁住的表还在被占用中,必须手动删除</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">5月 16, 上午10点55:19.778分	ERROR	org.apache.hadoop.hbase.backup.HFileArchiver	</div><div class="line">Failed to archive class org.apache.hadoop.hbase.backup.HFileArchiver$FileablePath, file:hdfs://nameservice2/hbase/.tmp/data/default/user_order_info/63fa237eba286bf13d01d0e04b13d149/info/88be874a75d345af848dfd07f0ff0340_SeqId_55_</div><div class="line"></div><div class="line"></div><div class="line">5月 16, 上午10点55:19.467分	ERROR	org.apache.hadoop.hbase.backup.HFileArchiver	</div><div class="line">Failed to archive class org.apache.hadoop.hbase.backup.HFileArchiver$FileablePath, file:hdfs://nameservice2/hbase/.tmp/data/default/user_order_info/63fa237eba286bf13d01d0e04b13d149/info/88be874a75d345af848dfd07f0ff0340_SeqId_55_</div></pre></td></tr></table></figure>
</p>
<p>手动删除后发现,HMaster节点虽然启动成功但不能被选举为active,读取日志发现,打开文件数过多,最终导致HMaster节点一段时间后自动停止服务,</p>
<ul>
<li>开始的想法是通过<code>ulimit -n</code>手动调整hbase用户所能打开的最大文件数,发现修改后不起作用</li>
<li>把/hbase//MasterProcWALs目录下的文件mv出去</li>
<li>同时需要删除HDFS下tmp目录下对应的临时文件，然后重启成功</li>
</ul>
<p>因为HMaster启动的时候会加载这个目录下的所有文件，才会导致too many open files,这个是HBase自身的问题导致是HDFS的connection太多了,重启太多，然后又失败导致的。重启成功后，所有那个目录下的文件应该会被删除的</p>
<hr>
<p>第二天 发现RegionServer 陆续停止服务<br>通过调大 HBase REST Server 最大线程,重启服务解决 </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Shell/Cloudera Manager API.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Shell/Cloudera Manager API.html" itemprop="url">Cloudera Manager API</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Cloudera-Manager-API"><a href="#Cloudera-Manager-API" class="headerlink" title="Cloudera Manager API"></a>Cloudera Manager API</h1><p><a href="http://cloudera.github.io/cm_api/apidocs/v15/index.html" target="_blank" rel="noopener">CM 5.10 API</a><br><a href="https://www.cloudera.com/documentation/enterprise/5-10-x/topics/cm_intro_api.html" target="_blank" rel="noopener">Cloudera Manager API</a></p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例:"></a>示例:</h2><p>重启cluster集群的impala服务</p>
<p><code>curl -X POST -u user:&#39;xxx&#39; http://192.168.65.50:7180/api/v15/clusters/cluster/services/impala/commands/restart</code></p>
<p>显示cluster集群的所有服务</p>
<p><code>curl -u user:&#39;passwd&#39; http://192.168.65.50:7180/api/v15/clusters/cluster/services</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Error/[HDFS]HDFS-diskbalance.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Error/[HDFS]HDFS-diskbalance.html" itemprop="url">HDFS-diskbalance</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+08:00">
                2017-06-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Error/" itemprop="url" rel="index">
                    <span itemprop="name">Error</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HDFS-diskbalance问题"><a href="#HDFS-diskbalance问题" class="headerlink" title="HDFS-diskbalance问题"></a>HDFS-diskbalance问题</h1><p>开头怀疑是sentry的权限问题,就也给hdfs用户hive元数据库的admin权限<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">create role hdfs_role;</div><div class="line">grant role hdfs_role to group hdfs;</div><div class="line">grant all on URI &apos;hdfs:///system/diskbalancer&apos; to role hdfs_role;</div></pre></td></tr></table></figure></p>
<p>发现问题依旧<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">hdfs dfs -ls /system/diskbalancer</div><div class="line">hdfs diskbalancer -plan ddp-dn-04.cmdmp.com</div><div class="line">hdfs diskbalancer -plan ddp-dn-129.cmdmp.com</div><div class="line"></div><div class="line">hdfs@ddp-dn-129:~&gt; hdfs diskbalancer -plan ddp-dn-129.cmdmp.com</div><div class="line">17/06/12 13:42:31 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">17/06/12 13:42:31 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">17/06/12 13:42:31 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">17/06/12 13:42:32 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 0 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:33 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 1 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:34 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 2 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:35 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 3 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:36 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 4 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:37 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 5 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:38 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 6 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:39 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 7 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:40 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 8 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:41 INFO ipc.Client: Retrying connect to server: ddp-dn-129.cmdmp.com/10.200.60.40:50020. Already tried 9 time(s); retry policy is RetryUpToMaximumCountWithFixedSleep(maxRetries=10, sleepTime=1000 MILLISECONDS)</div><div class="line">17/06/12 13:42:41 ERROR tools.DiskBalancerCLI: java.net.ConnectException: Call From ddp-dn-129.cmdmp.com/10.200.60.40 to ddp-dn-129.cmdmp.com:50020 failed on connection exception: java.net.ConnectException: Connection refused; For more details see:  http://wiki.apache.org/hadoop/ConnectionRefused</div></pre></td></tr></table></figure></p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ddp-dn-04:~ # hdfs diskbalancer -help plan</div><div class="line">usage: hdfs diskbalancer -plan &lt;hostname&gt; [options]</div><div class="line">Creates a plan that describes how much data should be moved between disks.</div><div class="line"></div><div class="line">    --bandwidth &lt;arg&gt;             Maximum disk bandwidth (MB/s) in integer</div><div class="line">                                  to be consumed by diskBalancer. e.g. 10</div><div class="line">                                  MB/s.</div><div class="line">    --maxerror &lt;arg&gt;              Describes how many errors can be</div><div class="line">                                  tolerated while copying between a pair</div><div class="line">                                  of disks.</div><div class="line">    --out &lt;arg&gt;                   Local path of file to write output to,</div><div class="line">                                  if not specified defaults will be used.</div><div class="line">    --plan &lt;arg&gt;                  Hostname, IP address or UUID of datanode</div><div class="line">                                  for which a plan is created.</div><div class="line">    --thresholdPercentage &lt;arg&gt;   Percentage of data skew that is</div><div class="line">                                  tolerated before disk balancer starts</div><div class="line">                                  working. For example, if total data on a</div><div class="line">                                  2 disk node is 100 GB then disk balancer</div><div class="line">                                  calculates the expected value on each</div><div class="line">                                  disk, which is 50 GB. If the tolerance</div><div class="line">                                  is 10% then data on a single disk needs</div><div class="line">                                  to be more than 60 GB (50 GB + 10%</div><div class="line">                                  tolerance value) for Disk balancer to</div><div class="line">                                  balance the disks.</div><div class="line">    --v                           Print out the summary of the plan on</div><div class="line">                                  console</div><div class="line"></div><div class="line">Plan command creates a set of steps that represent a planned data move. A</div><div class="line">plan file can be executed on a data node, which will balance the data.</div><div class="line"></div><div class="line"></div><div class="line">ddp-nn-02:/etc/hadoop/conf # hdfs getconf -confkey dfs.disk.balancer.enabled</div><div class="line">false</div><div class="line"></div><div class="line">ddp-dn-01:~ # hdfs diskbalancer --plan ddp-dn-12.cmdmp.com</div><div class="line">17/06/13 16:54:09 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">17/06/13 16:54:09 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">17/06/13 16:54:09 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">17/06/13 16:54:09 ERROR tools.DiskBalancerCLI: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.AccessControlException): Permission denied.</div><div class="line">  at org.apache.hadoop.hdfs.server.datanode.DataNode.checkSuperuserPrivilege(DataNode.java:948)</div><div class="line">  at org.apache.hadoop.hdfs.server.datanode.DataNode.getDiskBalancerSetting(DataNode.java:3208)</div><div class="line">  at org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolServerSideTranslatorPB.getDiskBalancerSetting(ClientDatanodeProtocolServerSideTranslatorPB.java:361)</div><div class="line">  at org.apache.hadoop.hdfs.protocol.proto.ClientDatanodeProtocolProtos$ClientDatanodeProtocolService$2.callBlockingMethod(ClientDatanodeProtocolProtos.java:17901)</div><div class="line">  at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:617)</div><div class="line">  at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1073)</div><div class="line">  at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2216)</div><div class="line">  at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2212)</div><div class="line">  at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">  at javax.security.auth.Subject.doAs(Subject.java:415)</div><div class="line">  at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1796)</div><div class="line">  at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2210)</div></pre></td></tr></table></figure>
</p>
<hr>
<h1 id="hdfs-diskbalancer"><a href="#hdfs-diskbalancer" class="headerlink" title="hdfs diskbalancer"></a>hdfs diskbalancer</h1><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ddp-dn-033:~ # hdfs diskbalancer -plan ddp-dn-033.cmdmp.com</div><div class="line">17/10/27 11:01:31 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">17/10/27 11:01:31 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">17/10/27 11:01:31 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">17/10/27 11:01:31 ERROR tools.DiskBalancerCLI: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.AccessControlException): Permission denied.</div><div class="line">    at org.apache.hadoop.hdfs.server.datanode.DataNode.checkSuperuserPrivilege(DataNode.java:948)</div><div class="line">    at org.apache.hadoop.hdfs.server.datanode.DataNode.getDiskBalancerSetting(DataNode.java:3208)</div><div class="line">    at org.apache.hadoop.hdfs.protocolPB.ClientDatanodeProtocolServerSideTranslatorPB.getDiskBalancerSetting(ClientDatanodeProtocolServerSideTranslatorPB.java:361)</div><div class="line">    at org.apache.hadoop.hdfs.protocol.proto.ClientDatanodeProtocolProtos$ClientDatanodeProtocolService$2.callBlockingMethod(ClientDatanodeProtocolProtos.java:17901)</div><div class="line">    at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:617)</div><div class="line">    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1073)</div><div class="line">    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2216)</div><div class="line">    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2212)</div><div class="line">    at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">    at javax.security.auth.Subject.doAs(Subject.java:415)</div><div class="line">    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1796)</div><div class="line">    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2210)</div></pre></td></tr></table></figure>
</p>
<p>一般来说，对于需要HDFS超级用户权限的命令，使用任何HDFS主体去kinit都是有效的。然而，为了增加datanodes安全性在CDH 5.10.0中增加了一个变化。–HDFS11069<br>这一更改确保了对任何datanode运行一个超级用户命令，您必须首先执行kinit并使用和datanode相同服务主体</p>
<p>To run the intra node balancer, you must do the following:</p>
<ol>
<li>Ensure that the HDFS Gateway is deployed on the Datanode you wish to run it against.(个人认为只需要保证本机使用HDFS-cli能连上nn就好,自己配置也行当然通过cm配置会比较块)</li>
<li><p>Login to the datanode you wish to balance, and kinit as follows:</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">    cd /var/run/cloudera-scm-agent/process/`ls -1 /var/run/cloudera-scm-agent/process/ | grep &apos;hdfs-DATANODE$&apos; |</div><div class="line">sort -n | tail -1`</div><div class="line">    kinit -kt hdfs.keytab hdfs/$(hostname -f)</div></pre></td></tr></table></figure>
</p>
</li>
<li><p>Run the intra node balancer as usual:<br>hdfs diskbalancer -plan datanode.hostname.com<br>hdfs diskbalancer -plan $(hostname -f)</p>
</li>
</ol>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">cd /var/run/cloudera-scm-agent/process/`ls -1 /var/run/cloudera-scm-agent/process/ | grep &apos;hdfs-DATANODE$&apos; |sort -n | tail -1`</div><div class="line">kinit -kt hdfs.keytab hdfs/$(hostname -f)</div><div class="line">hdfs diskbalancer -plan $(hostname -f)</div><div class="line"></div><div class="line">    17/11/15 10:41:25 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">    17/11/15 10:41:25 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">    17/11/15 10:41:25 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">    17/11/15 10:41:25 INFO planner.GreedyPlanner: Starting plan for Node : ddp-dn-165.cmdmp.com:50020</div><div class="line">    17/11/15 10:41:25 INFO planner.GreedyPlanner: Disk Volume set 9006e969-abee-4719-b2fa-be1b5a1bb0a0 Type : DISK plan completed.</div><div class="line">    17/11/15 10:41:25 INFO planner.GreedyPlanner: Compute Plan for Node : ddp-dn-165.cmdmp.com:50020 took 11 ms </div><div class="line">    17/11/15 10:41:26 INFO command.Command: Writing plan to : /system/diskbalancer/2017-Nov-15-10-41-25</div><div class="line"></div><div class="line">hdfs dfs -ls /system/diskbalancer/2017-Nov-15-10-41-25</div><div class="line"></div><div class="line">hdfs diskbalancer -execute /system/diskbalancer/2017-Nov-15-10-41-25/$(hostname -f).plan.json</div><div class="line"></div><div class="line">hdfs diskbalancer -query $(hostname) --v</div></pre></td></tr></table></figure>
</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">hdfs diskbalancer -plan $(hostname -f) --out /root/hdfs-diskplan --thresholdPercentage 5</div><div class="line">18/02/26 10:14:44 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">18/02/26 10:14:44 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">18/02/26 10:14:44 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">18/02/26 10:14:45 INFO planner.GreedyPlanner: Starting plan for Node : ddp-dn-165.cmdmp.com:50020</div><div class="line">18/02/26 10:14:45 INFO planner.GreedyPlanner: Disk Volume set 25e83c15-13e4-4429-96c1-cec44fe8c94c Type : DISK plan completed.</div><div class="line">18/02/26 10:14:45 INFO planner.GreedyPlanner: Compute Plan for Node : ddp-dn-165.cmdmp.com:50020 took 8 ms </div><div class="line">18/02/26 10:14:45 INFO command.Command: Writing plan to : /root/hdfs-diskplan</div></pre></td></tr></table></figure>
</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ddp-dn-165:/var/run/cloudera-scm-agent/process/68817-hdfs-DATANODE # hdfs diskbalancer -plan $(hostname -f)  --thresholdPercentage 5</div><div class="line">18/02/28 09:44:08 INFO balancer.KeyManager: Block token params received from NN: update interval=10hrs, 0sec, token lifetime=10hrs, 0sec</div><div class="line">18/02/28 09:44:08 INFO block.BlockTokenSecretManager: Setting block keys</div><div class="line">18/02/28 09:44:08 INFO balancer.KeyManager: Update block keys every 2hrs, 30mins, 0sec</div><div class="line">18/02/28 09:44:08 INFO planner.GreedyPlanner: Starting plan for Node : ddp-dn-165.cmdmp.com:50020</div><div class="line">18/02/28 09:44:08 INFO planner.GreedyPlanner: Disk Volume set 6a0d20f1-3936-40f7-a4dd-207c228a676a Type : DISK plan completed.</div><div class="line">18/02/28 09:44:08 INFO planner.GreedyPlanner: Compute Plan for Node : ddp-dn-165.cmdmp.com:50020 took 7 ms </div><div class="line">18/02/28 09:44:09 INFO command.Command: Writing plan to : /system/diskbalancer/2018-Feb-28-09-44-08</div><div class="line">ddp-dn-165:/var/run/cloudera-scm-agent/process/68817-hdfs-DATANODE # hdfs dfs -ls /system/diskbalancer/2018-Feb-28-09-44-08/</div><div class="line">Found 2 items</div><div class="line">-rw-r--r--   3 hdfs supergroup     606859 2018-02-28 09:44 /system/diskbalancer/2018-Feb-28-09-44-08/ddp-dn-165.cmdmp.com.before.json</div><div class="line">-rw-r--r--   3 hdfs supergroup        928 2018-02-28 09:44 /system/diskbalancer/2018-Feb-28-09-44-08/ddp-dn-165.cmdmp.com.plan.json</div><div class="line">ddp-dn-165:/var/run/cloudera-scm-agent/process/68817-hdfs-DATANODE # hdfs diskbalancer -execute /system/diskbalancer/2018-Feb-28-09-44-08/ddp-dn-165.cmdmp.com.plan.json</div><div class="line">18/02/28 09:44:46 INFO command.Command: Executing &quot;execute plan&quot; command</div><div class="line">ddp-dn-165:/var/run/cloudera-scm-agent/process/68817-hdfs-DATANODE # hdfs diskbalancer -query  $(hostname) --v</div><div class="line">18/02/28 09:44:54 INFO command.Command: Executing &quot;query plan&quot; command.</div><div class="line">Plan File: /system/diskbalancer/2018-Feb-28-09-44-08/ddp-dn-165.cmdmp.com.plan.json</div><div class="line">Plan ID: bf4e1d912cf52fb2df81d1af4406ba3f8fcb4cb05023711a64d1f4101a2379ff8a0e36cedbc901ddbda4c17bc0a851fddfb55361e347c580a0792f6e08d935ac</div><div class="line">Result: PLAN_UNDER_PROGRESS</div><div class="line">[&#123;&quot;sourcePath&quot;:&quot;/mnt/sdf1/dfs/dn&quot;,&quot;destPath&quot;:&quot;/mnt/sdl1/dfs/dn&quot;,&quot;workItem&quot;:&#123;&quot;bytesToCopy&quot;:195547775977,&quot;bytesCopied&quot;:134219396,&quot;errorCount&quot;:0,&quot;errMsg&quot;:null,&quot;blocksCopied&quot;:2,&quot;maxDiskErrors&quot;:0,&quot;tolerancePercent&quot;:0,&quot;bandwidth&quot;:0&#125;&#125;]</div></pre></td></tr></table></figure>
</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">hdfs diskbalancer -plan $(hostname -f) --out /system/diskbalancer/$(hostname -f)  --thresholdPercentage 5</div><div class="line">hdfs diskbalancer -execute /system/diskbalancer/$(hostname -f)/$(hostname -f).plan.json</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Nameless13" />
          <p class="site-author-name" itemprop="name">Nameless13</p>
           
              <p class="site-description motion-element" itemprop="description">90后，桶装水保洁工程狮，ಥ_ಥ</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">164</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        

      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nameless13</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
