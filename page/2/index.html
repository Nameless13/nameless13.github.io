<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:type" content="website">
<meta property="og:title" content="Nameless13">
<meta property="og:url" content="https://nameless13.github.io/page/2/index.html">
<meta property="og:site_name" content="Nameless13">
<meta property="og:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Nameless13">
<meta name="twitter:description" content="90后，桶装水保洁工程狮，ಥ_ಥ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'J3OX6892F7',
      apiKey: '38852eb9095216f8f2ada575a06a9cfc',
      indexName: 'Blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://nameless13.github.io/page/2/"/>





  <title>Nameless13</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Nameless13</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Kerberos MIT/kt_renewer.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Kerberos MIT/kt_renewer.html" itemprop="url">kt_renewer</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T10:31:24+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Kerberos-MIT/" itemprop="url" rel="index">
                    <span itemprop="name">Kerberos MIT</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HUE-kt-renewer"><a href="#HUE-kt-renewer" class="headerlink" title="HUE kt_renewer"></a>HUE kt_renewer</h1><p>[29/Jul/2017 17:04:21 ] kt_renewer   INFO     Reinitting kerberos from keytab: /usr/bin/kinit -k -t /var/run/cloudera-scm-agent/process/56353-hue-KT_RENEWER/hue.keytab -c /tmp/hue_krb5_ccache hue/ddp-dn-062.cmdmp.com@CMDMP.COM<br>[29/Jul/2017 18:04:21 ] kt_renewer   INFO     Reinitting kerberos from keytab: /usr/bin/kinit -k -t /var/run/cloudera-scm-agent/process/56353-hue-KT_RENEWER/hue.keytab -c /tmp/hue_krb5_ccache hue/ddp-dn-062.cmdmp.com@CMDMP.COM</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Spark/Spark集成S3 Service.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Spark/Spark集成S3 Service.html" itemprop="url">Spark集成S3 Service</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Spark/" itemprop="url" rel="index">
                    <span itemprop="name">Spark</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Spark集成S3-Service"><a href="#Spark集成S3-Service" class="headerlink" title="Spark集成S3 Service"></a>Spark集成S3 Service</h1><p>Spark的DataSource支持S3和Swift，考虑到Ceph也提供了S3和Swift的API，而C++的效率也是Python难以望其项背的，所以Spark+Ceph(S3 Service)可能是一个比较合适的方案。</p>
<p>如果想试试Spark with Swift，可以参考<a href="http://spark.apache.org/docs/latest/storage-openstack-swift.html" target="_blank" rel="noopener">Accessing OpenStack Swift from Spark</a>这篇文章，这里不再涉及。<br>由于我是配置haddop的core-site.xml,所以下面sc的配置并不用,开箱即用</p>
<h2 id="spark-shell"><a href="#spark-shell" class="headerlink" title="spark-shell"></a>spark-shell</h2><p>Spark shell在启动前，需要保证HDFS/YARN已经启动，并且使用–jars指定aws-java-sdk和hadoop-aws两个jar包的位置。我的参数比较多图省事创建了个shell脚本存着。</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">./spark-shell --master yarn-client --principal dtdream/zelda1@ZELDA.COM --keytab /etc/security/dtdream.zelda1.keytab --driver-java-options &apos;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=13838&apos;  --jars /home/dtdream/hadoop/hadoop-2.7.2/share/hadoop/tools/lib/aws-java-sdk-1.7.4.jar,/home/dtdream/hadoop/hadoop-2.7.2/share/hadoop/tools/lib/hadoop-aws-2.7.2.jar</div></pre></td></tr></table></figure>
</p>
<p>进入shell以后：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">scala&gt; sc.hadoopConfiguration.set(&quot;fs.s3a.access.key&quot;, &quot;xxx&quot;)</div><div class="line">scala&gt; sc.hadoopConfiguration.set(&quot;fs.s3a.secret.key&quot;, &quot;yyyyyyyy&quot;)</div><div class="line">scala&gt; sc.hadoopConfiguration.set(&quot;fs.s3a.endpoint&quot;, &quot;192.168.103.224:80&quot;)</div><div class="line">scala&gt; sc.hadoopConfiguration.set(&quot;fs.s3a.connection.ssl.enabled&quot;, &quot;false&quot;)</div><div class="line">scala&gt; val myRdd = sc.textFile(&quot;s3a://xxx/diamonds.csv&quot;)</div><div class="line">scala&gt; myRdd.count</div><div class="line">..</div><div class="line">16/07/27 11:27:03 INFO DAGScheduler: Submitting ResultStage 0 (s3a://xxx/diamonds.csv MapPartitionsRDD[1] at textFile at &lt;console&gt;:27), which has no missing parents</div><div class="line">16/07/27 11:27:03 INFO MemoryStore: Block broadcast_1 stored as values in memory (estimated size 2.9 KB, free 254.7 KB)</div><div class="line">16/07/27 11:27:03 INFO MemoryStore: Block broadcast_1_piece0 stored as bytes in memory (estimated size 1762.0 B, free 256.4 KB)</div><div class="line">..</div><div class="line">16/07/27 11:27:03 INFO TaskSetManager: Starting task 0.0 in stage 0.0 of job 0 (TID 0, zelda3, partition 0,PROCESS_LOCAL, 2254 bytes)</div><div class="line">16/07/27 11:27:03 INFO TaskSetManager: Starting task 1.0 in stage 0.0 of job 0 (TID 1, zelda1, partition 1,PROCESS_LOCAL, 2254 bytes)</div><div class="line">..</div><div class="line">res4: Long = 53940</div></pre></td></tr></table></figure>
</p>
<p>由于我们在sc这里设置了hadoop的配置，所以haddop的core-site.xml那边就不要再设置了，否则会出现参数覆盖的问题。</p>
<p>使用wholeTextFiles处理文件夹里的所有文件，比较适合存放大量小图片的目录：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">scala&gt; val myRdd = sc.wholeTextFiles(&quot;s3a://xxx/&quot;)</div><div class="line">res4: Long = 3</div><div class="line">scala&gt; myRdd2.count</div><div class="line">3</div></pre></td></tr></table></figure>
</p>
<h2 id="Spark-SQL"><a href="#Spark-SQL" class="headerlink" title="Spark SQL"></a>Spark SQL</h2><p>1、没有找到像HDFS或者本地文件这种load data [local] inpath into table xxx这种比较方便的直接从S3导入到hive表的方法。绕路的方法就是hadoop distcp s3a:// -&gt; hdfs://，然后再在SPARK SQL里load。</p>
<p>2、没有找到像Spark集成SQL这种CREATE TEMPORARY TABLE USING XX.XX.XX OPTION (XXX)的办法。其实这种在SPARK SQL里用才是比较直接的，并且没有可以绕开的方法。对于本质是结构化的文本文件来说，使用S3来存储实际没有太大意义；对于非结构化的图片、视频等，如果没有SQL入口的话，就只能强迫用户编写Spark APP来处理了，相对来说门槛更高一点。</p>
<p>参考hortonworks为Redshift写的插件，还是应该提供SQL入口，更友好一些，类似：</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">CREATE TABLE my_table</div><div class="line">USING com.databricks.spark.redshift</div><div class="line">OPTIONS (</div><div class="line">  dbtable &apos;my_table&apos;,</div><div class="line">  tempdir &apos;s3n://path/for/temp/data&apos;,</div><div class="line">  url &apos;jdbc:redshift://redshifthost:5439/database?user=username&amp;password=pass&apos;</div><div class="line">);</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/Linux下解压,压缩JAR包的方法.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/Linux下解压,压缩JAR包的方法.html" itemprop="url">Linux下解压,压缩JAR包的方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux下解压-压缩JAR包的方法"><a href="#Linux下解压-压缩JAR包的方法" class="headerlink" title="Linux下解压,压缩JAR包的方法"></a>Linux下解压,压缩JAR包的方法</h1><p>把当前目录下的所有文件打包成project.jar<br>jar -cvfM0 project.jar ./<br>-c   创建jar包<br>-v   显示过程信息<br>-f<br>-M<br>-0   这个是阿拉伯数字，只打包不压缩的意思</p>
<p>解压project.jar</p>
<p>jar -xvf project.jar<br>解压到当前目录,注意,不会创建一个game文件夹,而是将所有jar包的内容全部解压到当前文件夹.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Notes/松江资源池云主机cdh环境准备.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Notes/松江资源池云主机cdh环境准备.html" itemprop="url">松江资源池云主机cdh环境准备</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Notes/" itemprop="url" rel="index">
                    <span itemprop="name">Notes</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="松江资源池云主机cdh环境准备"><a href="#松江资源池云主机cdh环境准备" class="headerlink" title="松江资源池云主机cdh环境准备"></a>松江资源池云主机cdh环境准备</h1><p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">  1  reboot</div><div class="line">  2  ping 114.114.114.114</div><div class="line">  3  reboot</div><div class="line">  4  ls</div><div class="line">  5  cat /etc/issue</div><div class="line">  6  top</div><div class="line">  7  yum --help</div><div class="line">  8  ifconfig </div><div class="line">  9  chkconfig --list</div><div class="line"> 10  cat /etc/sysconfig/selinux </div><div class="line"> 11  echo &quot;SELINUX=disabled&quot; &gt; /etc/sysconfig/selinux </div><div class="line"> 12  cat /etc/sysconfig/selinux </div><div class="line"> 13  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 14  echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 15  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 16  cat /etc/sysctl.conf </div><div class="line"> 17  echo 0 &gt;/proc/sys/vm/swappiness </div><div class="line"> 18  echo &apos;vm.swqppiness=0&apos;&gt;&gt; /etc/sysctl.conf </div><div class="line"> 19  cat /proc/sys/vm/swappiness </div><div class="line"> 20  cat /etc/sysctl.conf </div><div class="line"> 21  cat /etc/security/limits.conf </div><div class="line"> 22  vo /etc/security/limits.conf </div><div class="line"> 23  vi /etc/security/limits.conf </div><div class="line"> 24  yum install ntp</div><div class="line"> 25  ifconfig </div><div class="line"> 26  ip a</div><div class="line"> 27  yum install tree</div><div class="line"> 28  yum install lrzsz</div><div class="line"> 29  free -g</div><div class="line"> 30  systemctl stop firewalld.service</div><div class="line"> 31  chkconfig --list</div><div class="line"> 32  yum install createrop</div><div class="line"> 33  yum install createrepo</div><div class="line"> 34  yum install -y postgresql91</div><div class="line"> 35  yum install -y python-psycopg2</div><div class="line"> 36  vi /etc/rc.local </div><div class="line"> 37  cat /etc/rc.local </div><div class="line"> 38  cat /sys/kernel/mm/transparent_hugepage/</div><div class="line"> 39  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 40  ll /etc/rc.local </div><div class="line"> 41  hostname</div><div class="line"> 42  hostname -f</div><div class="line"> 43  view /etc/ssh/ssh_config </div><div class="line"> 44  chkconfig ntp on</div><div class="line"> 45  chkconfig ntpd on</div><div class="line"> 46  chkconfig --lis</div><div class="line"> 47  chkconfig --list</div><div class="line"> 48  systemctl enable ntpd.service</div><div class="line"> 49  chkconfig --list</div><div class="line"> 50  systemctl list-unit-files</div><div class="line"> 51  systemctl list-unit-files |grep ntp</div><div class="line"> 52  systemctl list-unit-files |grep fire</div><div class="line"> 53  systemctl list-unit-files |grep ip</div><div class="line"> 54  systemctl list-unit-files |grep wall</div><div class="line"> 55  yum install gcc</div><div class="line"> 56  systemctl list-unit-files |grep firewall</div><div class="line"> 57  systemctl list-unit-files |grep ipta</div><div class="line"> 58  iptables -C</div><div class="line"> 59  iptables -V</div><div class="line"> 60  systemctl list-unit-files |grep iptables</div><div class="line"> 61  whereis iptables</div><div class="line"> 62  ll /usr/bin/iptables-xml </div><div class="line"> 63  systat</div><div class="line"> 64  sysstat</div><div class="line"> 65  yum install -y sysstat</div><div class="line"> 66  firewalls -v</div><div class="line"> 67  firewalld -v</div><div class="line"> 68  systemctl stop firewalld.service</div><div class="line"> 69  whereis firewalld</div><div class="line"> 70  ll /usr/lib/firewalld/ipsets/</div><div class="line"> 71  ll /etc/firewalld/zones/public.xml</div><div class="line"> 72  systemctl disable firewalld.service</div><div class="line"> 73  cat /etc/sysctl.conf </div><div class="line"> 74  systemctl list-unit-files |Net</div><div class="line"> 75  systemctl list-unit-files |grep Net</div><div class="line"> 76  systemctl list-unit-files |grep net</div><div class="line"> 77  systemctl --help</div><div class="line"> 78  systemctl list -units --type=service</div><div class="line"> 79  sudo systemctl status firewalld.service</div><div class="line"> 80  systemctl enable ntpd.service</div><div class="line"> 81  chkconfig --list</div><div class="line"> 82  systemctl list-unit-files |grep ntpd</div><div class="line"> 83  reboot</div><div class="line"> 84  df -h</div><div class="line"> 85  firewalld</div><div class="line"> 86  whereis firewalld</div><div class="line"> 87  systemctl status firewalld</div><div class="line"> 88  cat /etc/issue</div><div class="line"> 89  uname -a</div><div class="line"> 90  cat /etc/*release</div><div class="line"> 91  ping 8.8.8.8</div><div class="line"> 92  vi /etc/ntp.conf </div><div class="line"> 93  /etc/init.d/ntpd restart</div><div class="line"> 94  service ntpd restart</div><div class="line"> 95  ntpq -p</div><div class="line"> 96  date</div><div class="line"> 97  reboot </div><div class="line"> 98  vi /etc/ssh/sshd_config </div><div class="line"> 99  systemctl restart sshd.service</div><div class="line">100  history &gt; 1.log</div><div class="line"></div><div class="line"></div><div class="line">  1  systemctl --hlep</div><div class="line">  2  systemctl --help</div><div class="line">  3  systemctl stop firewalld.service</div><div class="line">  4  ssh 10.150.4.5</div><div class="line">  5  ssh 10.150.4.5 -p 10022</div><div class="line">  6  ssh 10.150.4.5 </div><div class="line">  7  head 1.log </div><div class="line">  8  head 15 1.log </div><div class="line">  9  head -15 1.log </div><div class="line"> 10  cat /etc/sysconfig/selinux </div><div class="line"> 11  echo &quot;SELINUX=disabled&quot; &gt; /etc/sysconfig/selinux </div><div class="line"> 12  cat /etc/sysconfig/selinux </div><div class="line"> 13  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 14  echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 15  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line"> 16  head -20 1.log |tail -5</div><div class="line"> 17  cat /etc/sysctl.conf </div><div class="line"> 18  free</div><div class="line"> 19  echo 0 &gt; /proc/sys/vm/swappiness </div><div class="line"> 20  echo &apos;vm.swappiness=0&apos; &gt;&gt; /etc/sysctl.conf </div><div class="line"> 21  cat /etc/sysctl.conf </div><div class="line"> 22  cat /proc/sys/vm/swappiness </div><div class="line"> 23  head -25 1.log |tail -5</div><div class="line"> 24  cat /etc/security/limits.conf </div><div class="line"> 25  ll</div><div class="line"> 26  cat /etc/security/limits.conf </div><div class="line"> 27  ll /etc/security/limits.conf </div><div class="line"> 28  scp root@10.150.4.5:/etc/security/limits.conf /etc/security/limits.conf </div><div class="line"> 29  vi /etc/security/limits.conf </div><div class="line"> 30  head -25 1.log |tail -5</div><div class="line"> 31  yum install ntp</div><div class="line"> 32  head -25 1.log |tail -5</div><div class="line"> 33  head -30 1.log |tail -5</div><div class="line"> 34  yum install tree</div><div class="line"> 35  yum install -y lrzsz</div><div class="line"> 36  yum install -y bash-completion</div><div class="line"> 37  head -30 1.log |tail -5</div><div class="line"> 38  head -35 1.log |tail -5</div><div class="line"> 39  head -33 1.log |tail -1 | sh</div><div class="line"> 40  yum install -y createrepo python-psycopg2</div><div class="line"> 41  yum instal -y httpd</div><div class="line"> 42  yum install -y httpd</div><div class="line"> 43  vi /etc/ntp.conf </div><div class="line"> 44  ssh 10.150.4.5</div><div class="line"> 45  head -40 1.log |tail -5</div><div class="line"> 46  vi /etc/rc.local </div><div class="line"> 47  scp root@10.150.4.5:/etc/rc.local /etc/rc.local </div><div class="line"> 48  head -40 1.log |tail -5</div><div class="line"> 49  cat /etc/rc.local </div><div class="line"> 50  head -45 1.log |tail -5</div><div class="line"> 51  chkconfig ntpd on</div><div class="line"> 52  ntpq -p</div><div class="line"> 53  systemctl enable ntpd.service</div><div class="line"> 54  systemctl start ntpd.service</div><div class="line"> 55  ntpq -p</div><div class="line"> 56  date</div><div class="line"> 57  ssh 10.150.4.5</div><div class="line"> 58  scp root@10.150.4.5:/etc/ntp.conf /etc/ntp.conf </div><div class="line"> 59  systemctl restart ntpd.service</div><div class="line"> 60  ntpq -p</div><div class="line"> 61  date</div><div class="line"> 62  ntpq -p</div><div class="line"> 63  timedatectl </div><div class="line"> 64  timedatectl set-timezone Asia/Shanghai</div><div class="line"> 65  timedatectl </div><div class="line"> 66  date</div><div class="line"> 67  head -45 1.log |tail -5</div><div class="line"> 68  head -50 1.log |tail -5</div><div class="line"> 69  head -50 1.log |tail -10</div><div class="line"> 70  head -60 1.log |tail -10</div><div class="line"> 71  head -70 1.log |tail -10</div><div class="line"> 72  yum install -y gcc sysstat</div><div class="line"> 73  head -70 1.log |tail -10</div><div class="line"> 74  head -80 1.log |tail -10</div><div class="line"> 75  systemctl list-unit-file |grep ntp</div><div class="line"> 76  systemctl list-unit-files |grep ntp</div><div class="line"> 77  ntpq -p</div><div class="line"> 78  yum install httpd</div><div class="line"> 79  ulimit -a</div><div class="line"> 80  reboot</div><div class="line"> 81  cat /etc/issue</div><div class="line"> 82  root</div><div class="line"> 83  reboot </div><div class="line"> 84  ifconfig </div><div class="line"> 85  python --version</div><div class="line"> 86  yum update python</div><div class="line"> 87  yum upgrade python</div><div class="line"> 88  ifconfig</div><div class="line"> 89  vi /etc/default/grub </div><div class="line"> 90  grub2-mkconfig -0 /boot/grub2/grub.cfg </div><div class="line"> 91  grub2-mkconfig -o /boot/grub2/grub.cfg </div><div class="line"> 92  lsmod |grep ipv6</div><div class="line"> 93  reboot </div><div class="line"> 94  pinh 8.8.8.8</div><div class="line"> 95  ping 8.8.8.8</div><div class="line"> 96  route -n</div><div class="line"> 97  ifconfig </div><div class="line"> 98  lsblk</div><div class="line"> 99  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line">100  cat /etc/rc.local </div><div class="line">101  echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line">102  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line">103  df -h</div><div class="line">104  cd /opt/</div><div class="line">105  ll</div><div class="line">106  cat /sys/kernel/mm/transparent_hugepage/defrag </div><div class="line">107  vi /etc/rc.d/rc.local </div><div class="line">108  ll /etc/rc.d/rc.local </div><div class="line">109  chmod  +x /etc/rc.d/rc.local </div><div class="line">110  reboot </div><div class="line">111  echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</div><div class="line">112  echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</div><div class="line">113  vi /etc/rc.d/rc.local</div><div class="line">114  chmod +x /etc/rc.d/rc.local</div><div class="line">115  route add -net 10.200.0.0/16 gw 10.151.0.1</div><div class="line">116  history </div><div class="line">117  ll</div><div class="line">118  sz 1.log </div><div class="line">119  history &gt; 2.log</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/OpenLDAP,AD,Samba,FreeIPA介绍.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/OpenLDAP,AD,Samba,FreeIPA介绍.html" itemprop="url">OpenLDAP,AD,Samba,FreeIPA介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>OpenLDAP is a decent product, but it’s really just a bare-bones LDAP server, and something you might integrate into a more complete product or service. For example, even the schemas that it ships with have not changed in a long time and would need to be augmented with at least rfc2307bis. It also doesn’t ship with any management tools. Apache Directory Studio is decent, but quite low-level.</p>
<p>Active Directory is a suite of services that include LDAP and some schemas, but also a Kerberos service, a certificate authority, and a DNS service. The (Windows based) AD user and group management tools are OK, and slightly more convenient than Apache Directory Studio, although they only run on Windows. The integration between everything is very good. Binding Linux machines to AD is pretty simple these days with sssd.</p>
<p>Samba 4 is the open source implementation of Active Directory, and is what Amazon use to power their Active Directory compatible Simple AD service.</p>
<p>FreeIPA is an open source alternative to AD that combines LDAP, Kerberos, CA services and management tools, and ships with its own schemas.</p>
<p>To echo other commenters, if most of your users are running Windows, I would recommend deploying Active Directory or Samba 4, and look into binding your Linux machines to it with SSSD.</p>
<p>(Migration from openldap to freeipa.)[<a href="https://www.reddit.com/r/linuxadmin/comments/7979e3/migration_from_openldap_to_freeipa/" target="_blank" rel="noopener">https://www.reddit.com/r/linuxadmin/comments/7979e3/migration_from_openldap_to_freeipa/</a>]</p>
<p><code>ldapsearch -Z -h oldldap.company.com -D &quot;uid=admin,ou=people,DC=company,DC=com&quot; -W -b &quot;dc=company,dc=com&quot; &gt; /tmp/ldapdump</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/OpenLDAP使用手册.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/OpenLDAP使用手册.html" itemprop="url">OpenLDAP使用手册</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="OpenLDAP使用手册"><a href="#OpenLDAP使用手册" class="headerlink" title="OpenLDAP使用手册"></a>OpenLDAP使用手册</h1><hr>
<h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h2><p>当前的LDAP服务器部署在dsj-ddp-ad-kdc-01上,管理员先以root登录 到dsj-ddp-ad-kdc-01节点上,为一个新的用户创建一个LDIF文件(其中uid,uidNumber,gidNumber,homeDirectory可以自行定义)<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#cat adduser.ldif</div><div class="line">dn: uid=ldaptest,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: top</div><div class="line">objectClass: shadowAccount</div><div class="line">uid: ldaptest</div><div class="line">cn: ldaptest</div><div class="line">loginShell: /bin/bash</div><div class="line">userPassword: &#123;crypt&#125;x</div><div class="line">uidNumber: 2004</div><div class="line">gidNumber: 100</div><div class="line">homeDirectory: /home/ldaptest</div></pre></td></tr></table></figure></p>
<p>使用ladpadd添加用户,终端会提示输入ladpadm密码:<br>ldapadd -x -W -D “cn=ldapadm,dc=sjad,dc=com” -f adduser.ldif</p>
<p>为ladptest用户设置密码:<br>ldappasswd -s password123 -W -D “cn=ldapadm,dc=sjad,dc=com” -x<br>“uid=ldaptest,ou=People,dc=sjad,dc=com”</p>
<p>也可以在开始ldif文件中指定用户密码,根据需要灵活配置</p>
<h2 id="创建组"><a href="#创建组" class="headerlink" title="创建组"></a>创建组</h2><p>创建一个ldif文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#cat addgroup.ldif</div><div class="line">dn: cn=group2,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: group2</div><div class="line">gidNumber: 2345</div></pre></td></tr></table></figure></p>
<h2 id="使用ldapadd添加组"><a href="#使用ldapadd添加组" class="headerlink" title="使用ldapadd添加组"></a>使用ldapadd添加组</h2><p>ldapadd -x -W -D “cn=ldapadm,dc=sjad,dc=com” -f addgroup.ldif</p>
<h2 id="把用户添加到组中"><a href="#把用户添加到组中" class="headerlink" title="把用户添加到组中"></a>把用户添加到组中</h2><p>把ladptest添加到用户组<strong>group4</strong>中,创建一个LDIF文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">#cat u2g.ldif</div><div class="line">dn: cn=group4,ou=Group,dc=sjad,dc=com</div><div class="line">changetype: modify</div><div class="line">add: memberuid</div><div class="line">memberuid: ldaptest</div></pre></td></tr></table></figure></p>
<p>使用<strong>ladpmodify</strong>将user添加到group<br><code>ldapmodify -x -W -D &quot;cn=ldapadm,dc=sjad,dc=com&quot; -f u2g.ldif</code></p>
<h2 id="列出当前用户和组"><a href="#列出当前用户和组" class="headerlink" title="列出当前用户和组"></a>列出当前用户和组</h2><p>ldapsearch -x</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[root@dsj-ddp-ad-kdc-01 cn=config]# ldapsearch -x</div><div class="line"># extended LDIF</div><div class="line">#</div><div class="line"># LDAPv3</div><div class="line"># base &lt;dc=sjad,dc=com&gt; (default) with scope subtree</div><div class="line"># filter: (objectclass=*)</div><div class="line"># requesting: ALL</div><div class="line">#</div><div class="line"></div><div class="line"># sjad.com</div><div class="line">dn: dc=sjad,dc=com</div><div class="line">dc: sjad</div><div class="line">objectClass: top</div><div class="line">objectClass: domain</div><div class="line"></div><div class="line"># ldapadm, sjad.com</div><div class="line">dn: cn=ldapadm,dc=sjad,dc=com</div><div class="line">objectClass: organizationalRole</div><div class="line">cn: ldapadm</div><div class="line">description: LDAP Manager</div><div class="line"></div><div class="line"># People, sjad.com</div><div class="line">dn: ou=People,dc=sjad,dc=com</div><div class="line">objectClass: organizationalUnit</div><div class="line">ou: People</div><div class="line"></div><div class="line"># Group, sjad.com</div><div class="line">dn: ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: organizationalUnit</div><div class="line">ou: Group</div><div class="line"></div><div class="line"># ldaptest, People, sjad.com</div><div class="line">dn: uid=ldaptest,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: top</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: shadowAccount</div><div class="line">cn: ldaptest</div><div class="line">uid: ldaptest</div><div class="line">uidNumber: 9988</div><div class="line">gidNumber: 100</div><div class="line">homeDirectory: /home/ldaptest</div><div class="line">loginShell: /bin/bash</div><div class="line">gecos: LDAP Replication Test User</div><div class="line">shadowLastChange: 17058</div><div class="line">shadowMin: 0</div><div class="line">shadowMax: 99999</div><div class="line">shadowWarning: 7</div><div class="line"></div><div class="line"># ldaptestgroup, Group, sjad.com</div><div class="line">dn: cn=ldaptestgroup,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: ldaptestgroup</div><div class="line">gidNumber: 100</div><div class="line">memberUid: ldaptest</div><div class="line"></div><div class="line"># ldaptest1, People, sjad.com</div><div class="line">dn: uid=ldaptest1,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: top</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: shadowAccount</div><div class="line">cn: ldaptest1</div><div class="line">uid: ldaptest1</div><div class="line">uidNumber: 9989</div><div class="line">gidNumber: 101</div><div class="line">homeDirectory: /home/ldaptest1</div><div class="line">loginShell: /bin/bash</div><div class="line">gecos: LDAP Replication Test User</div><div class="line">shadowLastChange: 17058</div><div class="line">shadowMin: 0</div><div class="line">shadowMax: 99999</div><div class="line">shadowWarning: 7</div><div class="line"></div><div class="line"># ldaptest2, People, sjad.com</div><div class="line">dn: uid=ldaptest2,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: top</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: shadowAccount</div><div class="line">cn: ldaptest2</div><div class="line">uid: ldaptest2</div><div class="line">uidNumber: 9990</div><div class="line">gidNumber: 1500</div><div class="line">homeDirectory: /home/ldaptest2</div><div class="line">loginShell: /bin/bash</div><div class="line">gecos: LDAP Replication Test User</div><div class="line">shadowLastChange: 17058</div><div class="line">shadowMin: 0</div><div class="line">shadowMax: 99999</div><div class="line">shadowWarning: 7</div><div class="line"></div><div class="line"># ldaptestgroup2, Group, sjad.com</div><div class="line">dn: cn=ldaptestgroup2,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: ldaptestgroup</div><div class="line">cn: ldaptestgroup2</div><div class="line">gidNumber: 1500</div><div class="line">memberUid: ldaptest2</div><div class="line"></div><div class="line"># ldaptestgroup3, Group, sjad.com</div><div class="line">dn: cn=ldaptestgroup3,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: ldaptestgroup</div><div class="line">cn: ldaptestgroup3</div><div class="line">gidNumber: 1501</div><div class="line">memberUid: ldaptest2</div><div class="line">memberUid: ldaptest</div><div class="line"></div><div class="line"># hadoop, People, sjad.com</div><div class="line">dn: uid=hadoop,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: top</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: shadowAccount</div><div class="line">cn: hadoop</div><div class="line">uid: hadoop</div><div class="line">uidNumber: 6606</div><div class="line">gidNumber: 991</div><div class="line">homeDirectory: /home/hadoop</div><div class="line">loginShell: /bin/bash</div><div class="line">gecos: LDAP Replication Test User</div><div class="line">shadowLastChange: 17058</div><div class="line">shadowMin: 0</div><div class="line">shadowMax: 99999</div><div class="line">shadowWarning: 7</div><div class="line"></div><div class="line"># hadoop, Group, sjad.com</div><div class="line">dn: cn=hadoop,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: hadoop</div><div class="line">gidNumber: 991</div><div class="line">memberUid: hadoop</div><div class="line"></div><div class="line"># addata, People, sjad.com</div><div class="line">dn: uid=addata,ou=People,dc=sjad,dc=com</div><div class="line">objectClass: top</div><div class="line">objectClass: account</div><div class="line">objectClass: posixAccount</div><div class="line">objectClass: shadowAccount</div><div class="line">cn: addata</div><div class="line">uid: addata</div><div class="line">uidNumber: 1504</div><div class="line">gidNumber: 1504</div><div class="line">homeDirectory: /home/addata</div><div class="line">loginShell: /bin/bash</div><div class="line">gecos: LDAP Replication Test User</div><div class="line">shadowLastChange: 17058</div><div class="line">shadowMin: 0</div><div class="line">shadowMax: 99999</div><div class="line">shadowWarning: 7</div><div class="line"></div><div class="line"># addata, Group, sjad.com</div><div class="line">dn: cn=addata,ou=Group,dc=sjad,dc=com</div><div class="line">objectClass: posixGroup</div><div class="line">objectClass: top</div><div class="line">cn: addata</div><div class="line">gidNumber: 1504</div><div class="line">memberUid: addata</div><div class="line"></div><div class="line"># search result</div><div class="line">search: 2</div><div class="line">result: 0 Success</div><div class="line"></div><div class="line"># numResponses: 15</div><div class="line"># numEntries: 14</div></pre></td></tr></table></figure>
</p>
<p>FreeIPA 迁移工具<strong>ipa migrate-ds</strong>,有-shema参数,您可以使用它来指定您正在从中迁移的是什么属性 (values are RFC2307 and RFC2307bis)</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/SSSD介绍.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/SSSD介绍.html" itemprop="url">SSSD介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SSSD介绍"><a href="#SSSD介绍" class="headerlink" title="SSSD介绍"></a>SSSD介绍</h1><p>SSSD是自红帽企业版Linux6起新加入的一个守护进程，该进程可以用来访问多种验证服务器，如LDAP，Kerberos等，并提供授权。SSSD是<br>介于本地用户和数据存储之间的进程，本地客户端首先连接SSSD，再由SSSD联系外部资源提供者(一台远程服务器)。 </p>
<p>这样做有一些几点优势：</p>
<p>1.避免了本地每个客户端程序对认证服务器大量连接，所有本地程序仅联系SSSD，由SSSD连接认证服务器或SSSD缓存，有效的降低了负载。</p>
<p>2.允许离线授权。SSSD可以缓存远程服务器的用户认证身份，这允许在远程认证服务器宕机是，继续成功授权用户访问必要的资源。</p>
<p>SSSD无需特殊设置即可运行，当你配置完system-configure-authentication后该服务会自己运行。</p>
<p>SSSD默认配置文件位于/etc/sssd/sssd.conf，你可以通过命令使得SSSD以指定的配置文件运行：<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line"># sssd  --c  /etc/sssd/customfile.conf</div><div class="line">配置文件格式如下：</div><div class="line"></div><div class="line">关键字=键值</div><div class="line">  #####################################################</div><div class="line">  ##  [section]                    ##</div><div class="line">  ##  key1 = value1                  ##</div><div class="line">  ##  key2 = value2,value3              ##</div><div class="line">  #####################################################</div></pre></td></tr></table></figure></p>
<p>管理SSSD进程</p>
<p>service  sssd  start 开启<br>service  sssd  stop 关闭<br>使用authconfig命令开启SSSD： #authconfig  –enablesssd  –update</p>
<p>使用systemctl命令开启SSSD： # systemctl  enable  sssd</p>
<p>总结：简单来说现在在RHEL6中连接LDAP或Kerberos等认证服务器，都是先有SSSD连接认证服务器取得认证与授权信息，再交于本地客户端程序。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/Testing network bandwidth using iperf3.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/Testing network bandwidth using iperf3.html" itemprop="url">Testing network bandwidth using iperf3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Testing-network-bandwidth-using-iperf3"><a href="#Testing-network-bandwidth-using-iperf3" class="headerlink" title="Testing network bandwidth using iperf3"></a>Testing network bandwidth using iperf3</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Sometimes you want to test the network connection between two computers. Which tool will you use? Using web server and wget is an option, but it’s not very direct.</p>
<p>Using iperf3, you can easily measure the bandwidth from the client to the server as well as the bandwidth from the server to the client easily.</p>
<h2 id="How-to-install-iperf3"><a href="#How-to-install-iperf3" class="headerlink" title="How to install iperf3"></a>How to install iperf3</h2><p>Installing iperf3 on Debian/Ubuntu only needs one simple command.</p>
<p><code>apt install iperf3</code></p>
<p>On macOS, using homebrew is also very easy.</p>
<p><code>brew install iperf3</code></p>
<h2 id="How-to-use-iperf3"><a href="#How-to-use-iperf3" class="headerlink" title="How to use iperf3"></a>How to use iperf3</h2><p>On one of the computer (regarding as server), run iperf3 -s.</p>
<p>On the other computer (regarding as client), a common test is iperf3 -i 1 -t 30 -c SERVER_IP, which shows the result per second and lasts 30 seconds.<br>Note: This command shows the transfer speed from the client to the server. If you want the reverse, just add -R to the command.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/CDH/Shell/rmall.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/CDH/Shell/rmall.html" itemprop="url">rmall</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/" itemprop="url" rel="index">
                    <span itemprop="name">CDH</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CDH/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">for i in `cat ~/servers.txt`</div><div class="line">do</div><div class="line">    echo &quot;--------------begin to change ntpd to $i--------------&quot;</div><div class="line"></div><div class="line">    ssh $i &apos;service cloudera-scm-agent stop&apos;</div><div class="line">    ssh $i &apos;umount /var/run/cloudera-scm-agent/process&apos;</div><div class="line">    ssh $i &apos;rm -rf /usr/share/cmf /var/lib/cloudera* /var/cache/zypp/packages/cloudera-* /var/cache/zypp/raw/cloudera-* /var/cache/zypp/solv/cloudera-* /var/log/cloudera-scm-* /var/run/&apos;cloudera-scm-* /etc/cloudera-scm-server*&apos;</div><div class="line">    ssh $i &apos;rpm -qa |grep cloudera&apos;</div><div class="line">    ssh $i &apos;rpm -e cloudera-manager-agent-5.13.0-1.cm5130.p0.55.el7.x86_64&apos;</div><div class="line">    ssh $i &apos;rpm -e cloudera-manager-daemons-5.13.0-1.cm5130.p0.55.el7.x86_64&apos;</div><div class="line">    ssh $i rm -rf /var/lib/hadoop-* /var/lib/impala /var/lib/solr /var/lib/zookeeper /var/lib/hue /var/lib/oozie  /var/lib/pgsql  /var/lib/sqoop2  /data/dfs/  /data/impala/ /data/yarn/  /dfs/ /impala/ /yarn/  /var/run/hadoop-*/ /var/run/hdfs-*/ /usr/bin/hadoop* /usr/bin/zookeeper* /usr/bin/hbase* /usr/bin/hive* /usr/bin/hdfs /usr/bin/mapred /usr/bin/yarn /usr/&apos;bin/sqoop* /usr/bin/oozie /etc/hadoop* /etc/zookeeper* /etc/hive* /etc/hue /etc/impala /etc/sqoop* /etc/oozie /etc/hbase* /etc/hcatalog &apos;</div><div class="line">    ssh $i &apos;rm -rf /opt/cloudera/parcel-cache /opt/cloudera/parcels&apos;</div><div class="line">    ssh $i &apos;ps aux|grep  supervisord |grep -v grep | awk &apos;&#123;print &quot;kill -9 &quot;$2&#125;&apos;|sh&apos;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">done</div></pre></td></tr></table></figure>
</p>
<hr>
<h2 id="更换Default-gw"><a href="#更换Default-gw" class="headerlink" title="更换Default gw"></a>更换Default gw</h2><p>[root@tddp-nm-5 ~]# route del default gw 10.151.0.1<br>[root@tddp-nm-5 ~]# route add default gw 10.150.4.1</p>
<hr>
<h2 id="Zypper-源配置"><a href="#Zypper-源配置" class="headerlink" title="Zypper 源配置"></a>Zypper 源配置</h2><p>zypper ar <a href="http://10.200.58.39/suse/" target="_blank" rel="noopener">http://10.200.58.39/suse/</a> local.main<br>zypper update</p>
<h2 id="备份源地址："><a href="#备份源地址：" class="headerlink" title="备份源地址："></a>备份源地址：</h2><p>zypper ar <a href="http://10.200.58.43" target="_blank" rel="noopener">http://10.200.58.43</a> local.main<br>zypper ar <a href="http://10.200.58.70/SLES-11-SP3/x86_64/" target="_blank" rel="noopener">http://10.200.58.70/SLES-11-SP3/x86_64/</a> main</p>
<p>zypper 常用命令：<br>      repos, lr     List all defined repositories.<br>addrepo, ar     Add a new repository.<br>removerepo, rr      Remove specified repository.<br>renamerepo, nr      Rename specified repository.<br>modifyrepo, mr      Modify specified repository.<br>refresh, ref        Refresh all repositories.<br>clean           Clean local caches.</p>
<hr>
<h2 id="角色启动失败-报错supervisor"><a href="#角色启动失败-报错supervisor" class="headerlink" title="角色启动失败 报错supervisor"></a>角色启动失败 报错supervisor</h2><p>检查一下,客户端配置是否部署<br>检查 krb5.conf</p>
<hr>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">for i in `cat ~/servers.txt`</div><div class="line">do</div><div class="line">    echo &quot;--------------begin to rm cloudera to $i--------------&quot;</div><div class="line"></div><div class="line">    scp /root/rmall.sh $i:/root/</div><div class="line">    ssh $i &apos;sh /root/rmall.sh&apos;</div><div class="line"></div><div class="line">done</div></pre></td></tr></table></figure>
</p>
<p><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">service cloudera-scm-server stop</div><div class="line">service cloudera-scm-agent stop</div><div class="line">umount /var/run/cloudera-scm-agent/process</div><div class="line">rm -rf /usr/share/cmf /var/lib/cloudera* /var/cache/zypp/packages/cloudera-* /var/cache/zypp/raw/cloudera-* /var/cache/zypp/solv/cloudera-* /var/log/cloudera-scm-* /var/run/cloudera-scm-* /etc/cloudera-scm-server*</div><div class="line">rpm -qa |grep cloudera</div><div class="line">rpm -e cloudera-manager-agent-5.13.0-1.cm5130.p0.55.el7.x86_64</div><div class="line">rpm -e cloudera-manager-server-5.13.0-1.cm5130.p0.55.el7.x86_64</div><div class="line">rpm -e cloudera-manager-daemons-5.13.0-1.cm5130.p0.55.el7.x86_64</div><div class="line">rm -rf /var/lib/hadoop-* /var/lib/impala /var/lib/solr /var/lib/zookeeper /var/lib/hue /var/lib/oozie  /var/lib/pgsql  /var/lib/sqoop2  /data/dfs/  /data/impala/ /data/yarn/  /dfs/ /impala/ /yarn/  /var/run/hadoop-*/ /var/run/hdfs-*/ /usr/bin/hadoop* /usr/bin/zookeeper* /usr/bin/hbase* /usr/bin/hive* /usr/bin/hdfs /usr/bin/mapred /usr/bin/yarn /usr/bin/sqoop* /usr/bin/oozie /etc/hadoop* /etc/zookeeper* /etc/hive* /etc/hue /etc/impala /etc/sqoop* /etc/oozie /etc/hbase* /etc/hcatalog </div><div class="line">rm -rf /opt/cloudera/parcel-cache /opt/cloudera/parcels</div><div class="line">ps aux|grep  supervisord |grep -v grep | awk &apos;&#123;print &quot;kill -9 &quot; $2&#125;&apos;|sh</div></pre></td></tr></table></figure>
</p>
<h2 id="删除对应数据库"><a href="#删除对应数据库" class="headerlink" title="删除对应数据库"></a>删除对应数据库</h2><p><figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> amon_test;      </div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> hue_test;      </div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> cm_test;      </div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> metastore_test;                </div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> nav_test;      </div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> navms_test;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> oozie_test;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> rman_test;</div><div class="line"><span class="keyword">drop</span> <span class="keyword">database</span> sentry_test;</div><div class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> metastore_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> metastore_test. * <span class="keyword">TO</span> <span class="string">'hive'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> amon_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> amon_test.* <span class="keyword">to</span> <span class="string">'amon'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> rman_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> rman_test.* <span class="keyword">to</span> <span class="string">'rman'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> sentry_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> sentry_test.* <span class="keyword">to</span> <span class="string">'sentry'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> nav_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> nav_test.* <span class="keyword">to</span> <span class="string">'nav'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> navms_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> navms_test.* <span class="keyword">to</span> <span class="string">'navms'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> cm_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">grant</span> all <span class="keyword">privileges</span> <span class="keyword">on</span> cm_test.* <span class="keyword">to</span> <span class="string">'cm'</span>@<span class="string">'%'</span>;</div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> hue_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> hue_test.* <span class="keyword">TO</span> <span class="string">'hue'</span>@<span class="string">'%'</span>; </div><div class="line"><span class="keyword">create</span> <span class="keyword">database</span> oozie_test <span class="keyword">default</span> <span class="built_in">character</span> <span class="keyword">set</span> utf8;</div><div class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> oozie_test.* <span class="keyword">TO</span> <span class="string">'oozie'</span>@<span class="string">'%'</span>; </div><div class="line"><span class="keyword">FLUSH</span> <span class="keyword">PRIVILEGES</span>;</div></pre></td></tr></table></figure>
</p>
<p>删除路由 route del -net 10.125.137.0/24 gw 10.150.4.1<br>显示路由 netstat -rn<br><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">[root@tddp-nm-5 ~]# route del default gw 10.151.0.1</div><div class="line">[root@tddp-nm-5 ~]# route add default gw 10.150.4.1</div><div class="line"></div><div class="line">route del default gw 10.151.0.1</div><div class="line">route add default gw 10.150.4.1</div><div class="line"></div><div class="line"></div><div class="line">route add -net 10.200.0.0/16 gw 10.151.0.1</div><div class="line">route add -net 10.125.137.0/24 gw 10.151.0.1</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">route add -net 10.150.4.0/16 gw 10.150.4.1</div></pre></td></tr></table></figure></p>
<h2 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h2><p><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">yum install cloudera-manager-daemons cloudera-manager-server</div><div class="line">/usr/share/cmf/schema/scm_prepare_database.sh -h 10.150.4.88 mysql cm_test cm Cloudera@123</div><div class="line">vi /etc/hosts</div><div class="line">sh sync_hosts.sh </div><div class="line">service cloudera-scm-server start</div><div class="line"></div><div class="line">tail -f /var/<span class="built_in">log</span>/cloudera-scm-server/cloudera-scm-server.log</div></pre></td></tr></table></figure>
</p>
<p>[root@tddp-zk-2 ~]# tail -f /var/log/cloudera-scm-agent/cloudera-scm-agent.log </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://nameless13.github.io/Linux/setfacl提示 Operation not supported.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Nameless13">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Nameless13">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Linux/setfacl提示 Operation not supported.html" itemprop="url">setfacl提示 Operation not supported</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-23T09:57:35+08:00">
                2018-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="setfacl提示-Operation-not-supported"><a href="#setfacl提示-Operation-not-supported" class="headerlink" title="setfacl提示 Operation not supported"></a>setfacl提示 Operation not supported</h1><p>问题：/mnt/bak为硬盘的一个分区，在fstab做了defaults挂载，当我需要配置acl权限时</p>
<p>命令为：setfacl -m u:luo:rwx /mnt/bak的时候提示</p>
<p>setfacl: /mnt/bak: Operation not supported 错误</p>
<p>解决方法：重新修改/etc/fstab文件，加入acl选项</p>
<p>/dev/vg/bak             /mnt/bak                ext3    defaults,acl    0 0</p>
<p>然后：mount -o remount /mnt/bak 重新挂载，再执行上面的命令，成功！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Nameless13" />
          <p class="site-author-name" itemprop="name">Nameless13</p>
           
              <p class="site-description motion-element" itemprop="description">90后，桶装水保洁工程狮，ಥ_ಥ</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">164</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        

      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Nameless13</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
